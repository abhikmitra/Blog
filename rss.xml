<?xml version="1.0" encoding="UTF-8"?><rss xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:content="http://purl.org/rss/1.0/modules/content/" xmlns:atom="http://www.w3.org/2005/Atom" version="2.0"><channel><title><![CDATA[Abhik's Blog]]></title><description><![CDATA[A place to pen down and share what I learn]]></description><link>https://abhikmitra.github.io/blog</link><generator>GatsbyJS</generator><lastBuildDate>Sat, 25 Apr 2020 20:14:03 GMT</lastBuildDate><item><title><![CDATA[Durable Task Framework Internals - Part 4 (Terminated Orchestrations & Middlewares)]]></title><description><![CDATA[Durable Task Framework Series This post is part 4 of a series of posts on DTF. Durable Task Framework Internals - Part 1 (Dataflow and…]]></description><link>https://abhikmitra.github.io/blog/durable-task-4/</link><guid isPermaLink="false">https://abhikmitra.github.io/blog/durable-task-4/</guid><pubDate>Mon, 27 Apr 2020 18:00:00 GMT</pubDate><content:encoded>&lt;h3&gt;Durable Task Framework Series&lt;/h3&gt;
&lt;p&gt;This post is &lt;strong&gt;part 4&lt;/strong&gt; of a series of posts on DTF.&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;a href=&quot;https://abhikmitra.github.io/blog/durable-task/&quot;&gt;Durable Task Framework Internals - Part 1 (Dataflow and Reliability)&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://abhikmitra.github.io/blog/durable-task-2/&quot;&gt;Durable Task Framework Internals - Part 2 (The curious case of Orchestrations)&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://abhikmitra.github.io/blog/durable-task-3/&quot;&gt;Durable Task Framework Internals - Part 3 (Tracker Queue, Instance History, and JumpStart)&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://abhikmitra.github.io/blog/durable-task-4/&quot;&gt;Durable Task Framework Internals - Part 4 (Terminated Orchestrations &amp;#x26; Middlewares)&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;Do you think there is more that I should cover or something I should fix ? Please raise an &lt;a href=&quot;https://github.com/abhikmitra/blog/issues&quot;&gt;issue&lt;/a&gt; and let me know.&lt;/p&gt;
&lt;hr&gt;
&lt;h3&gt;Terminate an orchestration&lt;/h3&gt;
&lt;p&gt;The Client can control the orchestration even though the Hub manages the orchestration. The Client can issue &lt;code class=&quot;language-text&quot;&gt;TerminateInstanceAsync&lt;/code&gt; to terminate the ongoing orchestration.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;csharp&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber NaN&quot; class=&quot;language-csharp line-numbers&quot;&gt;&lt;code class=&quot;language-csharp&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;var&lt;/span&gt; instance &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; client&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;CreateOrchestrationInstanceAsync&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;typeof&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;TestOrchestration&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;InstanceId5306&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;Test Input&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Result&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
Task&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Delay&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;5000&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Wait&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
client&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;TerminateInstanceAsync&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;instance&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Here is the sequence diagram as to what happens behind the scenes&lt;/p&gt;
&lt;div class=&quot;mermaid&quot; data-processed=&quot;true&quot;&gt;&lt;svg id=&quot;mermaid-1587845640347&quot; width=&quot;100%&quot; xmlns=&quot;http://www.w3.org/2000/svg&quot; height=&quot;100%&quot; style=&quot;max-width:1250px;&quot; viewBox=&quot;-50 -10 1250 702&quot;&gt;&lt;style&gt;#mermaid-1587845640347 .label{font-family:&apos;trebuchet ms&apos;, verdana, arial;font-family:var(--mermaid-font-family);color:#333}#mermaid-1587845640347 .label text{fill:#333}#mermaid-1587845640347 .node rect,#mermaid-1587845640347 .node circle,#mermaid-1587845640347 .node ellipse,#mermaid-1587845640347 .node polygon,#mermaid-1587845640347 .node path{fill:#ECECFF;stroke:#9370db;stroke-width:1px}#mermaid-1587845640347 .node .label{text-align:center}#mermaid-1587845640347 .node.clickable{cursor:pointer}#mermaid-1587845640347 .arrowheadPath{fill:#333}#mermaid-1587845640347 .edgePath .path{stroke:#333;stroke-width:1.5px}#mermaid-1587845640347 .edgeLabel{background-color:#e8e8e8;text-align:center}#mermaid-1587845640347 .cluster rect{fill:#ffffde;stroke:#aa3;stroke-width:1px}#mermaid-1587845640347 .cluster text{fill:#333}#mermaid-1587845640347 div.mermaidTooltip{position:absolute;text-align:center;max-width:200px;padding:2px;font-family:&apos;trebuchet ms&apos;, verdana, arial;font-family:var(--mermaid-font-family);font-size:12px;background:#ffffde;border:1px solid #aa3;border-radius:2px;pointer-events:none;z-index:100}#mermaid-1587845640347 .actor{stroke:#ccf;fill:#ECECFF}#mermaid-1587845640347 text.actor{fill:#000;stroke:none}#mermaid-1587845640347 .actor-line{stroke:grey}#mermaid-1587845640347 .messageLine0{stroke-width:1.5;stroke-dasharray:&apos;2 2&apos;;stroke:#333}#mermaid-1587845640347 .messageLine1{stroke-width:1.5;stroke-dasharray:&apos;2 2&apos;;stroke:#333}#mermaid-1587845640347 #arrowhead{fill:#333}#mermaid-1587845640347 .sequenceNumber{fill:#fff}#mermaid-1587845640347 #sequencenumber{fill:#333}#mermaid-1587845640347 #crosshead path{fill:#333 !important;stroke:#333 !important}#mermaid-1587845640347 .messageText{fill:#333;stroke:none}#mermaid-1587845640347 .labelBox{stroke:#ccf;fill:#ECECFF}#mermaid-1587845640347 .labelText{fill:#000;stroke:none}#mermaid-1587845640347 .loopText{fill:#000;stroke:none}#mermaid-1587845640347 .loopLine{stroke-width:2;stroke-dasharray:&apos;2 2&apos;;stroke:#ccf}#mermaid-1587845640347 .note{stroke:#aa3;fill:#fff5ad}#mermaid-1587845640347 .noteText{fill:black;stroke:none;font-family:&apos;trebuchet ms&apos;, verdana, arial;font-family:var(--mermaid-font-family);font-size:14px}#mermaid-1587845640347 .activation0{fill:#f4f4f4;stroke:#666}#mermaid-1587845640347 .activation1{fill:#f4f4f4;stroke:#666}#mermaid-1587845640347 .activation2{fill:#f4f4f4;stroke:#666}#mermaid-1587845640347 .mermaid-main-font{font-family:&quot;trebuchet ms&quot;, verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1587845640347 .section{stroke:none;opacity:0.2}#mermaid-1587845640347 .section0{fill:rgba(102,102,255,0.49)}#mermaid-1587845640347 .section2{fill:#fff400}#mermaid-1587845640347 .section1,#mermaid-1587845640347 .section3{fill:#fff;opacity:0.2}#mermaid-1587845640347 .sectionTitle0{fill:#333}#mermaid-1587845640347 .sectionTitle1{fill:#333}#mermaid-1587845640347 .sectionTitle2{fill:#333}#mermaid-1587845640347 .sectionTitle3{fill:#333}#mermaid-1587845640347 .sectionTitle{text-anchor:start;font-size:11px;text-height:14px;font-family:&apos;trebuchet ms&apos;, verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1587845640347 .grid .tick{stroke:#d3d3d3;opacity:0.8;shape-rendering:crispEdges}#mermaid-1587845640347 .grid .tick text{font-family:&apos;trebuchet ms&apos;, verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1587845640347 .grid path{stroke-width:0}#mermaid-1587845640347 .today{fill:none;stroke:red;stroke-width:2px}#mermaid-1587845640347 .task{stroke-width:2}#mermaid-1587845640347 .taskText{text-anchor:middle;font-family:&apos;trebuchet ms&apos;, verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1587845640347 .taskText:not([font-size]){font-size:11px}#mermaid-1587845640347 .taskTextOutsideRight{fill:#000;text-anchor:start;font-size:11px;font-family:&apos;trebuchet ms&apos;, verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1587845640347 .taskTextOutsideLeft{fill:#000;text-anchor:end;font-size:11px}#mermaid-1587845640347 .task.clickable{cursor:pointer}#mermaid-1587845640347 .taskText.clickable{cursor:pointer;fill:#003163 !important;font-weight:bold}#mermaid-1587845640347 .taskTextOutsideLeft.clickable{cursor:pointer;fill:#003163 !important;font-weight:bold}#mermaid-1587845640347 .taskTextOutsideRight.clickable{cursor:pointer;fill:#003163 !important;font-weight:bold}#mermaid-1587845640347 .taskText0,#mermaid-1587845640347 .taskText1,#mermaid-1587845640347 .taskText2,#mermaid-1587845640347 .taskText3{fill:#fff}#mermaid-1587845640347 .task0,#mermaid-1587845640347 .task1,#mermaid-1587845640347 .task2,#mermaid-1587845640347 .task3{fill:#8a90dd;stroke:#534fbc}#mermaid-1587845640347 .taskTextOutside0,#mermaid-1587845640347 .taskTextOutside2{fill:#000}#mermaid-1587845640347 .taskTextOutside1,#mermaid-1587845640347 .taskTextOutside3{fill:#000}#mermaid-1587845640347 .active0,#mermaid-1587845640347 .active1,#mermaid-1587845640347 .active2,#mermaid-1587845640347 .active3{fill:#bfc7ff;stroke:#534fbc}#mermaid-1587845640347 .activeText0,#mermaid-1587845640347 .activeText1,#mermaid-1587845640347 .activeText2,#mermaid-1587845640347 .activeText3{fill:#000 !important}#mermaid-1587845640347 .done0,#mermaid-1587845640347 .done1,#mermaid-1587845640347 .done2,#mermaid-1587845640347 .done3{stroke:grey;fill:#d3d3d3;stroke-width:2}#mermaid-1587845640347 .doneText0,#mermaid-1587845640347 .doneText1,#mermaid-1587845640347 .doneText2,#mermaid-1587845640347 .doneText3{fill:#000 !important}#mermaid-1587845640347 .crit0,#mermaid-1587845640347 .crit1,#mermaid-1587845640347 .crit2,#mermaid-1587845640347 .crit3{stroke:#f88;fill:red;stroke-width:2}#mermaid-1587845640347 .activeCrit0,#mermaid-1587845640347 .activeCrit1,#mermaid-1587845640347 .activeCrit2,#mermaid-1587845640347 .activeCrit3{stroke:#f88;fill:#bfc7ff;stroke-width:2}#mermaid-1587845640347 .doneCrit0,#mermaid-1587845640347 .doneCrit1,#mermaid-1587845640347 .doneCrit2,#mermaid-1587845640347 .doneCrit3{stroke:#f88;fill:#d3d3d3;stroke-width:2;cursor:pointer;shape-rendering:crispEdges}#mermaid-1587845640347 .milestone{transform:rotate(45deg) scale(0.8, 0.8)}#mermaid-1587845640347 .milestoneText{font-style:italic}#mermaid-1587845640347 .doneCritText0,#mermaid-1587845640347 .doneCritText1,#mermaid-1587845640347 .doneCritText2,#mermaid-1587845640347 .doneCritText3{fill:#000 !important}#mermaid-1587845640347 .activeCritText0,#mermaid-1587845640347 .activeCritText1,#mermaid-1587845640347 .activeCritText2,#mermaid-1587845640347 .activeCritText3{fill:#000 !important}#mermaid-1587845640347 .titleText{text-anchor:middle;font-size:18px;fill:#000;font-family:&apos;trebuchet ms&apos;, verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1587845640347 g.classGroup text{fill:#9370db;stroke:none;font-family:&apos;trebuchet ms&apos;, verdana, arial;font-family:var(--mermaid-font-family);font-size:10px}#mermaid-1587845640347 g.classGroup text .title{font-weight:bolder}#mermaid-1587845640347 g.clickable{cursor:pointer}#mermaid-1587845640347 g.classGroup rect{fill:#ECECFF;stroke:#9370db}#mermaid-1587845640347 g.classGroup line{stroke:#9370db;stroke-width:1}#mermaid-1587845640347 .classLabel .box{stroke:none;stroke-width:0;fill:#ECECFF;opacity:0.5}#mermaid-1587845640347 .classLabel .label{fill:#9370db;font-size:10px}#mermaid-1587845640347 .relation{stroke:#9370db;stroke-width:1;fill:none}#mermaid-1587845640347 .dashed-line{stroke-dasharray:3}#mermaid-1587845640347 #compositionStart{fill:#9370db;stroke:#9370db;stroke-width:1}#mermaid-1587845640347 #compositionEnd{fill:#9370db;stroke:#9370db;stroke-width:1}#mermaid-1587845640347 #aggregationStart{fill:#ECECFF;stroke:#9370db;stroke-width:1}#mermaid-1587845640347 #aggregationEnd{fill:#ECECFF;stroke:#9370db;stroke-width:1}#mermaid-1587845640347 #dependencyStart{fill:#9370db;stroke:#9370db;stroke-width:1}#mermaid-1587845640347 #dependencyEnd{fill:#9370db;stroke:#9370db;stroke-width:1}#mermaid-1587845640347 #extensionStart{fill:#9370db;stroke:#9370db;stroke-width:1}#mermaid-1587845640347 #extensionEnd{fill:#9370db;stroke:#9370db;stroke-width:1}#mermaid-1587845640347 .commit-id,#mermaid-1587845640347 .commit-msg,#mermaid-1587845640347 .branch-label{fill:lightgrey;color:lightgrey;font-family:&apos;trebuchet ms&apos;, verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1587845640347 .pieTitleText{text-anchor:middle;font-size:25px;fill:#000;font-family:&apos;trebuchet ms&apos;, verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1587845640347 .slice{font-family:&apos;trebuchet ms&apos;, verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1587845640347 g.stateGroup text{fill:#9370db;stroke:none;font-size:10px;font-family:&apos;trebuchet ms&apos;, verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1587845640347 g.stateGroup text{fill:#9370db;stroke:none;font-size:10px}#mermaid-1587845640347 g.stateGroup .state-title{font-weight:bolder;fill:#000}#mermaid-1587845640347 g.stateGroup rect{fill:#ECECFF;stroke:#9370db}#mermaid-1587845640347 g.stateGroup line{stroke:#9370db;stroke-width:1}#mermaid-1587845640347 .transition{stroke:#9370db;stroke-width:1;fill:none}#mermaid-1587845640347 .stateGroup .composit{fill:white;border-bottom:1px}#mermaid-1587845640347 .stateGroup .alt-composit{fill:#e0e0e0;border-bottom:1px}#mermaid-1587845640347 .state-note{stroke:#aa3;fill:#fff5ad}#mermaid-1587845640347 .state-note text{fill:black;stroke:none;font-size:10px}#mermaid-1587845640347 .stateLabel .box{stroke:none;stroke-width:0;fill:#ECECFF;opacity:0.5}#mermaid-1587845640347 .stateLabel text{fill:#000;font-size:10px;font-weight:bold;font-family:&apos;trebuchet ms&apos;, verdana, arial;font-family:var(--mermaid-font-family)}:root{--mermaid-font-family: &apos;&quot;trebuchet ms&quot;, verdana, arial&apos;;--mermaid-font-family: &quot;Comic Sans MS&quot;, &quot;Comic Sans&quot;, cursive}

:root { --mermaid-font-family: &quot;trebuchet ms&quot;, verdana, arial;}&lt;/style&gt;&lt;style&gt;#mermaid-1587845640347 {
    color: rgb(0, 0, 0);
    font: normal normal 400 normal 16px / normal &quot;trebuchet ms&quot;, verdana, arial;
  }&lt;/style&gt;&lt;g&gt;&lt;/g&gt;&lt;g&gt;&lt;line id=&quot;actor0&quot; x1=&quot;75&quot; y1=&quot;5&quot; x2=&quot;75&quot; y2=&quot;691&quot; class=&quot;actor-line&quot; stroke-width=&quot;0.5px&quot; stroke=&quot;#999&quot;&gt;&lt;/line&gt;&lt;rect x=&quot;0&quot; y=&quot;0&quot; fill=&quot;#eaeaea&quot; stroke=&quot;#666&quot; width=&quot;150&quot; height=&quot;65&quot; rx=&quot;3&quot; ry=&quot;3&quot; class=&quot;actor&quot;&gt;&lt;/rect&gt;&lt;text x=&quot;75&quot; y=&quot;32.5&quot; dominant-baseline=&quot;central&quot; alignment-baseline=&quot;central&quot; class=&quot;actor&quot; style=&quot;text-anchor: middle; font-size: 14px;&quot;&gt;&lt;tspan x=&quot;75&quot; dy=&quot;0&quot;&gt;Client&lt;/tspan&gt;&lt;/text&gt;&lt;/g&gt;&lt;g&gt;&lt;line id=&quot;actor1&quot; x1=&quot;275&quot; y1=&quot;5&quot; x2=&quot;275&quot; y2=&quot;691&quot; class=&quot;actor-line&quot; stroke-width=&quot;0.5px&quot; stroke=&quot;#999&quot;&gt;&lt;/line&gt;&lt;rect x=&quot;200&quot; y=&quot;0&quot; fill=&quot;#eaeaea&quot; stroke=&quot;#666&quot; width=&quot;150&quot; height=&quot;65&quot; rx=&quot;3&quot; ry=&quot;3&quot; class=&quot;actor&quot;&gt;&lt;/rect&gt;&lt;text x=&quot;275&quot; y=&quot;32.5&quot; dominant-baseline=&quot;central&quot; alignment-baseline=&quot;central&quot; class=&quot;actor&quot; style=&quot;text-anchor: middle; font-size: 14px;&quot;&gt;&lt;tspan x=&quot;275&quot; dy=&quot;0&quot;&gt;Orchestrator&lt;/tspan&gt;&lt;/text&gt;&lt;/g&gt;&lt;g&gt;&lt;line id=&quot;actor2&quot; x1=&quot;475&quot; y1=&quot;5&quot; x2=&quot;475&quot; y2=&quot;691&quot; class=&quot;actor-line&quot; stroke-width=&quot;0.5px&quot; stroke=&quot;#999&quot;&gt;&lt;/line&gt;&lt;rect x=&quot;400&quot; y=&quot;0&quot; fill=&quot;#eaeaea&quot; stroke=&quot;#666&quot; width=&quot;150&quot; height=&quot;65&quot; rx=&quot;3&quot; ry=&quot;3&quot; class=&quot;actor&quot;&gt;&lt;/rect&gt;&lt;text x=&quot;475&quot; y=&quot;32.5&quot; dominant-baseline=&quot;central&quot; alignment-baseline=&quot;central&quot; class=&quot;actor&quot; style=&quot;text-anchor: middle; font-size: 14px;&quot;&gt;&lt;tspan x=&quot;475&quot; dy=&quot;0&quot;&gt;Hub&lt;/tspan&gt;&lt;/text&gt;&lt;/g&gt;&lt;g&gt;&lt;line id=&quot;actor3&quot; x1=&quot;675&quot; y1=&quot;5&quot; x2=&quot;675&quot; y2=&quot;691&quot; class=&quot;actor-line&quot; stroke-width=&quot;0.5px&quot; stroke=&quot;#999&quot;&gt;&lt;/line&gt;&lt;rect x=&quot;600&quot; y=&quot;0&quot; fill=&quot;#eaeaea&quot; stroke=&quot;#666&quot; width=&quot;150&quot; height=&quot;65&quot; rx=&quot;3&quot; ry=&quot;3&quot; class=&quot;actor&quot;&gt;&lt;/rect&gt;&lt;text x=&quot;675&quot; y=&quot;32.5&quot; dominant-baseline=&quot;central&quot; alignment-baseline=&quot;central&quot; class=&quot;actor&quot; style=&quot;text-anchor: middle; font-size: 14px;&quot;&gt;&lt;tspan x=&quot;675&quot; dy=&quot;0&quot;&gt;TestOrchestration&lt;/tspan&gt;&lt;/text&gt;&lt;/g&gt;&lt;g&gt;&lt;line id=&quot;actor4&quot; x1=&quot;875&quot; y1=&quot;5&quot; x2=&quot;875&quot; y2=&quot;691&quot; class=&quot;actor-line&quot; stroke-width=&quot;0.5px&quot; stroke=&quot;#999&quot;&gt;&lt;/line&gt;&lt;rect x=&quot;800&quot; y=&quot;0&quot; fill=&quot;#eaeaea&quot; stroke=&quot;#666&quot; width=&quot;150&quot; height=&quot;65&quot; rx=&quot;3&quot; ry=&quot;3&quot; class=&quot;actor&quot;&gt;&lt;/rect&gt;&lt;text x=&quot;875&quot; y=&quot;32.5&quot; dominant-baseline=&quot;central&quot; alignment-baseline=&quot;central&quot; class=&quot;actor&quot; style=&quot;text-anchor: middle; font-size: 14px;&quot;&gt;&lt;tspan x=&quot;875&quot; dy=&quot;0&quot;&gt;Worker&lt;/tspan&gt;&lt;/text&gt;&lt;/g&gt;&lt;g&gt;&lt;line id=&quot;actor5&quot; x1=&quot;1075&quot; y1=&quot;5&quot; x2=&quot;1075&quot; y2=&quot;691&quot; class=&quot;actor-line&quot; stroke-width=&quot;0.5px&quot; stroke=&quot;#999&quot;&gt;&lt;/line&gt;&lt;rect x=&quot;1000&quot; y=&quot;0&quot; fill=&quot;#eaeaea&quot; stroke=&quot;#666&quot; width=&quot;150&quot; height=&quot;65&quot; rx=&quot;3&quot; ry=&quot;3&quot; class=&quot;actor&quot;&gt;&lt;/rect&gt;&lt;text x=&quot;1075&quot; y=&quot;32.5&quot; dominant-baseline=&quot;central&quot; alignment-baseline=&quot;central&quot; class=&quot;actor&quot; style=&quot;text-anchor: middle; font-size: 14px;&quot;&gt;&lt;tspan x=&quot;1075&quot; dy=&quot;0&quot;&gt;TaskActivity&lt;/tspan&gt;&lt;/text&gt;&lt;/g&gt;&lt;defs&gt;&lt;marker id=&quot;arrowhead&quot; refX=&quot;5&quot; refY=&quot;2&quot; markerWidth=&quot;6&quot; markerHeight=&quot;4&quot; orient=&quot;auto&quot;&gt;&lt;path d=&quot;M 0,0 V 4 L6,2 Z&quot;&gt;&lt;/path&gt;&lt;/marker&gt;&lt;/defs&gt;&lt;defs&gt;&lt;marker id=&quot;crosshead&quot; markerWidth=&quot;15&quot; markerHeight=&quot;8&quot; orient=&quot;auto&quot; refX=&quot;16&quot; refY=&quot;4&quot;&gt;&lt;path fill=&quot;black&quot; stroke=&quot;#000000&quot; stroke-width=&quot;1px&quot; d=&quot;M 9,2 V 6 L16,4 Z&quot; style=&quot;stroke-dasharray: 0, 0;&quot;&gt;&lt;/path&gt;&lt;path fill=&quot;none&quot; stroke=&quot;#000000&quot; stroke-width=&quot;1px&quot; d=&quot;M 0,1 L 6,7 M 6,1 L 0,7&quot; style=&quot;stroke-dasharray: 0, 0;&quot;&gt;&lt;/path&gt;&lt;/marker&gt;&lt;/defs&gt;&lt;defs&gt;&lt;marker id=&quot;sequencenumber&quot; refX=&quot;15&quot; refY=&quot;15&quot; markerWidth=&quot;60&quot; markerHeight=&quot;40&quot; orient=&quot;auto&quot;&gt;&lt;circle cx=&quot;15&quot; cy=&quot;15&quot; r=&quot;6&quot;&gt;&lt;/circle&gt;&lt;/marker&gt;&lt;/defs&gt;&lt;g&gt;&lt;text x=&quot;175&quot; y=&quot;93&quot; class=&quot;messageText&quot; style=&quot;text-anchor: middle;&quot;&gt;ExecutionStarted&lt;/text&gt;&lt;line x1=&quot;75&quot; y1=&quot;100&quot; x2=&quot;275&quot; y2=&quot;100&quot; class=&quot;messageLine1&quot; stroke-width=&quot;2&quot; stroke=&quot;black&quot; marker-end=&quot;url(#arrowhead)&quot; style=&quot;stroke-dasharray: 3, 3; fill: none;&quot;&gt;&lt;/line&gt;&lt;/g&gt;&lt;g&gt;&lt;text x=&quot;375&quot; y=&quot;128&quot; class=&quot;messageText&quot; style=&quot;text-anchor: middle;&quot;&gt;ExecutionStarted&lt;/text&gt;&lt;line x1=&quot;275&quot; y1=&quot;135&quot; x2=&quot;475&quot; y2=&quot;135&quot; class=&quot;messageLine1&quot; stroke-width=&quot;2&quot; stroke=&quot;black&quot; marker-end=&quot;url(#arrowhead)&quot; style=&quot;stroke-dasharray: 3, 3; fill: none;&quot;&gt;&lt;/line&gt;&lt;/g&gt;&lt;g&gt;&lt;text x=&quot;575&quot; y=&quot;163&quot; class=&quot;messageText&quot; style=&quot;text-anchor: middle;&quot;&gt;Orchestration Invoked&lt;/text&gt;&lt;line x1=&quot;475&quot; y1=&quot;170&quot; x2=&quot;675&quot; y2=&quot;170&quot; class=&quot;messageLine0&quot; stroke-width=&quot;2&quot; stroke=&quot;black&quot; marker-end=&quot;url(#arrowhead)&quot; style=&quot;fill: none;&quot;&gt;&lt;/line&gt;&lt;/g&gt;&lt;g&gt;&lt;text x=&quot;675&quot; y=&quot;198&quot; class=&quot;messageText&quot; style=&quot;text-anchor: middle;&quot;&gt;TaskScheduled&lt;/text&gt;&lt;line x1=&quot;475&quot; y1=&quot;205&quot; x2=&quot;875&quot; y2=&quot;205&quot; class=&quot;messageLine1&quot; stroke-width=&quot;2&quot; stroke=&quot;black&quot; marker-end=&quot;url(#arrowhead)&quot; style=&quot;stroke-dasharray: 3, 3; fill: none;&quot;&gt;&lt;/line&gt;&lt;/g&gt;&lt;g&gt;&lt;text x=&quot;675&quot; y=&quot;233&quot; class=&quot;messageText&quot; style=&quot;text-anchor: middle;&quot;&gt;Task Scheduled&lt;/text&gt;&lt;line x1=&quot;875&quot; y1=&quot;240&quot; x2=&quot;475&quot; y2=&quot;240&quot; class=&quot;messageLine1&quot; stroke-width=&quot;2&quot; stroke=&quot;black&quot; marker-end=&quot;url(#arrowhead)&quot; style=&quot;stroke-dasharray: 3, 3; fill: none;&quot;&gt;&lt;/line&gt;&lt;/g&gt;&lt;g&gt;&lt;text x=&quot;775&quot; y=&quot;268&quot; class=&quot;messageText&quot; style=&quot;text-anchor: middle;&quot;&gt;Task Invoked&lt;/text&gt;&lt;line x1=&quot;475&quot; y1=&quot;275&quot; x2=&quot;1075&quot; y2=&quot;275&quot; class=&quot;messageLine0&quot; stroke-width=&quot;2&quot; stroke=&quot;black&quot; marker-end=&quot;url(#arrowhead)&quot; style=&quot;fill: none;&quot;&gt;&lt;/line&gt;&lt;/g&gt;&lt;g&gt;&lt;rect x=&quot;1070&quot; y=&quot;277&quot; fill=&quot;#EDF2AE&quot; stroke=&quot;#666&quot; width=&quot;10&quot; height=&quot;200&quot; rx=&quot;0&quot; ry=&quot;0&quot; class=&quot;activation0&quot;&gt;&lt;/rect&gt;&lt;/g&gt;&lt;g&gt;&lt;rect x=&quot;0&quot; y=&quot;285&quot; fill=&quot;#EDF2AE&quot; stroke=&quot;#666&quot; width=&quot;150&quot; height=&quot;52&quot; rx=&quot;0&quot; ry=&quot;0&quot; class=&quot;note&quot;&gt;&lt;/rect&gt;&lt;text x=&quot;-4&quot; y=&quot;309&quot; class=&quot;noteText&quot;&gt;&lt;tspan x=&quot;16&quot;&gt;After 5 seconds of &lt;/tspan&gt;&lt;/text&gt;&lt;text x=&quot;-4&quot; y=&quot;325&quot; class=&quot;noteText&quot;&gt;&lt;tspan x=&quot;16&quot;&gt; waiting&lt;/tspan&gt;&lt;/text&gt;&lt;/g&gt;&lt;g&gt;&lt;text x=&quot;175&quot; y=&quot;365&quot; class=&quot;messageText&quot; style=&quot;text-anchor: middle;&quot;&gt;ExecutionTerminated&lt;/text&gt;&lt;line x1=&quot;75&quot; y1=&quot;372&quot; x2=&quot;275&quot; y2=&quot;372&quot; class=&quot;messageLine1&quot; stroke-width=&quot;2&quot; stroke=&quot;black&quot; marker-end=&quot;url(#arrowhead)&quot; style=&quot;stroke-dasharray: 3, 3; fill: none;&quot;&gt;&lt;/line&gt;&lt;/g&gt;&lt;g&gt;&lt;text x=&quot;375&quot; y=&quot;400&quot; class=&quot;messageText&quot; style=&quot;text-anchor: middle;&quot;&gt;ExecutionTerminated&lt;/text&gt;&lt;line x1=&quot;275&quot; y1=&quot;407&quot; x2=&quot;475&quot; y2=&quot;407&quot; class=&quot;messageLine1&quot; stroke-width=&quot;2&quot; stroke=&quot;black&quot; marker-end=&quot;url(#arrowhead)&quot; style=&quot;stroke-dasharray: 3, 3; fill: none;&quot;&gt;&lt;/line&gt;&lt;/g&gt;&lt;g&gt;&lt;text x=&quot;375&quot; y=&quot;435&quot; class=&quot;messageText&quot; style=&quot;text-anchor: middle;&quot;&gt;TaskCompleted&lt;/text&gt;&lt;line x1=&quot;475&quot; y1=&quot;442&quot; x2=&quot;275&quot; y2=&quot;442&quot; class=&quot;messageLine1&quot; stroke-width=&quot;2&quot; stroke=&quot;black&quot; marker-end=&quot;url(#arrowhead)&quot; style=&quot;stroke-dasharray: 3, 3; fill: none;&quot;&gt;&lt;/line&gt;&lt;/g&gt;&lt;g&gt;&lt;text x=&quot;772.5&quot; y=&quot;470&quot; class=&quot;messageText&quot; style=&quot;text-anchor: middle;&quot;&gt;Task Finished&lt;/text&gt;&lt;line x1=&quot;1070&quot; y1=&quot;477&quot; x2=&quot;475&quot; y2=&quot;477&quot; class=&quot;messageLine0&quot; stroke-width=&quot;2&quot; stroke=&quot;black&quot; marker-end=&quot;url(#arrowhead)&quot; style=&quot;fill: none;&quot;&gt;&lt;/line&gt;&lt;/g&gt;&lt;g&gt;&lt;text x=&quot;375&quot; y=&quot;505&quot; class=&quot;messageText&quot; style=&quot;text-anchor: middle;&quot;&gt;TaskCompleted&lt;/text&gt;&lt;line x1=&quot;275&quot; y1=&quot;512&quot; x2=&quot;475&quot; y2=&quot;512&quot; class=&quot;messageLine1&quot; stroke-width=&quot;2&quot; stroke=&quot;black&quot; marker-end=&quot;url(#arrowhead)&quot; style=&quot;stroke-dasharray: 3, 3; fill: none;&quot;&gt;&lt;/line&gt;&lt;/g&gt;&lt;g&gt;&lt;rect x=&quot;400&quot; y=&quot;522&quot; fill=&quot;#EDF2AE&quot; stroke=&quot;#666&quot; width=&quot;150&quot; height=&quot;84&quot; rx=&quot;0&quot; ry=&quot;0&quot; class=&quot;note&quot;&gt;&lt;/rect&gt;&lt;text x=&quot;396&quot; y=&quot;546&quot; class=&quot;noteText&quot;&gt;&lt;tspan x=&quot;416&quot;&gt;Since the &lt;/tspan&gt;&lt;/text&gt;&lt;text x=&quot;396&quot; y=&quot;562&quot; class=&quot;noteText&quot;&gt;&lt;tspan x=&quot;416&quot;&gt; orchestration is&lt;/tspan&gt;&lt;/text&gt;&lt;text x=&quot;396&quot; y=&quot;578&quot; class=&quot;noteText&quot;&gt;&lt;tspan x=&quot;416&quot;&gt; already terminated &lt;/tspan&gt;&lt;/text&gt;&lt;text x=&quot;396&quot; y=&quot;594&quot; class=&quot;noteText&quot;&gt;&lt;tspan x=&quot;416&quot;&gt; - No-Op&lt;/tspan&gt;&lt;/text&gt;&lt;/g&gt;&lt;g&gt;&lt;rect x=&quot;0&quot; y=&quot;626&quot; fill=&quot;#eaeaea&quot; stroke=&quot;#666&quot; width=&quot;150&quot; height=&quot;65&quot; rx=&quot;3&quot; ry=&quot;3&quot; class=&quot;actor&quot;&gt;&lt;/rect&gt;&lt;text x=&quot;75&quot; y=&quot;658.5&quot; dominant-baseline=&quot;central&quot; alignment-baseline=&quot;central&quot; class=&quot;actor&quot; style=&quot;text-anchor: middle; font-size: 14px;&quot;&gt;&lt;tspan x=&quot;75&quot; dy=&quot;0&quot;&gt;Client&lt;/tspan&gt;&lt;/text&gt;&lt;/g&gt;&lt;g&gt;&lt;rect x=&quot;200&quot; y=&quot;626&quot; fill=&quot;#eaeaea&quot; stroke=&quot;#666&quot; width=&quot;150&quot; height=&quot;65&quot; rx=&quot;3&quot; ry=&quot;3&quot; class=&quot;actor&quot;&gt;&lt;/rect&gt;&lt;text x=&quot;275&quot; y=&quot;658.5&quot; dominant-baseline=&quot;central&quot; alignment-baseline=&quot;central&quot; class=&quot;actor&quot; style=&quot;text-anchor: middle; font-size: 14px;&quot;&gt;&lt;tspan x=&quot;275&quot; dy=&quot;0&quot;&gt;Orchestrator&lt;/tspan&gt;&lt;/text&gt;&lt;/g&gt;&lt;g&gt;&lt;rect x=&quot;400&quot; y=&quot;626&quot; fill=&quot;#eaeaea&quot; stroke=&quot;#666&quot; width=&quot;150&quot; height=&quot;65&quot; rx=&quot;3&quot; ry=&quot;3&quot; class=&quot;actor&quot;&gt;&lt;/rect&gt;&lt;text x=&quot;475&quot; y=&quot;658.5&quot; dominant-baseline=&quot;central&quot; alignment-baseline=&quot;central&quot; class=&quot;actor&quot; style=&quot;text-anchor: middle; font-size: 14px;&quot;&gt;&lt;tspan x=&quot;475&quot; dy=&quot;0&quot;&gt;Hub&lt;/tspan&gt;&lt;/text&gt;&lt;/g&gt;&lt;g&gt;&lt;rect x=&quot;600&quot; y=&quot;626&quot; fill=&quot;#eaeaea&quot; stroke=&quot;#666&quot; width=&quot;150&quot; height=&quot;65&quot; rx=&quot;3&quot; ry=&quot;3&quot; class=&quot;actor&quot;&gt;&lt;/rect&gt;&lt;text x=&quot;675&quot; y=&quot;658.5&quot; dominant-baseline=&quot;central&quot; alignment-baseline=&quot;central&quot; class=&quot;actor&quot; style=&quot;text-anchor: middle; font-size: 14px;&quot;&gt;&lt;tspan x=&quot;675&quot; dy=&quot;0&quot;&gt;TestOrchestration&lt;/tspan&gt;&lt;/text&gt;&lt;/g&gt;&lt;g&gt;&lt;rect x=&quot;800&quot; y=&quot;626&quot; fill=&quot;#eaeaea&quot; stroke=&quot;#666&quot; width=&quot;150&quot; height=&quot;65&quot; rx=&quot;3&quot; ry=&quot;3&quot; class=&quot;actor&quot;&gt;&lt;/rect&gt;&lt;text x=&quot;875&quot; y=&quot;658.5&quot; dominant-baseline=&quot;central&quot; alignment-baseline=&quot;central&quot; class=&quot;actor&quot; style=&quot;text-anchor: middle; font-size: 14px;&quot;&gt;&lt;tspan x=&quot;875&quot; dy=&quot;0&quot;&gt;Worker&lt;/tspan&gt;&lt;/text&gt;&lt;/g&gt;&lt;g&gt;&lt;rect x=&quot;1000&quot; y=&quot;626&quot; fill=&quot;#eaeaea&quot; stroke=&quot;#666&quot; width=&quot;150&quot; height=&quot;65&quot; rx=&quot;3&quot; ry=&quot;3&quot; class=&quot;actor&quot;&gt;&lt;/rect&gt;&lt;text x=&quot;1075&quot; y=&quot;658.5&quot; dominant-baseline=&quot;central&quot; alignment-baseline=&quot;central&quot; class=&quot;actor&quot; style=&quot;text-anchor: middle; font-size: 14px;&quot;&gt;&lt;tspan x=&quot;1075&quot; dy=&quot;0&quot;&gt;TaskActivity&lt;/tspan&gt;&lt;/text&gt;&lt;/g&gt;&lt;/svg&gt;&lt;/div&gt;
&lt;p&gt;So the terminate request is again sent as a message in the queue. The orchestrator gets the event and puts it in the session state.
Whenever the Hub receives an event, it checks its existing list of old events from the session state and builds up the current state.
So whenever the next set of TaskCompletion events, it will all result in a No-Op. The termination is asynchronous. There isn’t any facility to cancel ongoing TaskActivities, and only new ones will not be triggered.&lt;/p&gt;
&lt;h3&gt;Activity Middlewares&lt;/h3&gt;
&lt;p&gt;The DTF Framework supports middlewares for plugging into the Activity and Orchestration execution flow. They are pretty simple to solve it and works how you would expect any middlewares to work.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;csharp&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber NaN&quot; class=&quot;language-csharp line-numbers&quot;&gt;&lt;code class=&quot;language-csharp&quot;&gt;hubWorker&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;AddActivityDispatcherMiddleware&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;context&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; next&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;var&lt;/span&gt; activity &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; context&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token generic-method&quot;&gt;&lt;span class=&quot;token function&quot;&gt;GetProperty&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;TaskActivity&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;var&lt;/span&gt; instance &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; context&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token generic-method&quot;&gt;&lt;span class=&quot;token function&quot;&gt;GetProperty&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;OrchestrationInstance&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    Console&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;WriteLine&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;Activity Details - &quot;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; activity&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;GetType&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;ToString&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot; Id = &quot;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; instance&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;InstanceId&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;next&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;The delegate that you pass to &lt;code class=&quot;language-text&quot;&gt;AddActivityDispatcherMiddleware&lt;/code&gt; is invoked just before the TaskActivity gets invoked&lt;/p&gt;
&lt;div class=&quot;mermaid&quot; data-processed=&quot;true&quot;&gt;&lt;svg id=&quot;mermaid-1587845640346&quot; width=&quot;100%&quot; xmlns=&quot;http://www.w3.org/2000/svg&quot; height=&quot;100%&quot; style=&quot;max-width:650px;&quot; viewBox=&quot;-50 -10 650 344&quot;&gt;&lt;style&gt;#mermaid-1587845640346 .label{font-family:&apos;trebuchet ms&apos;, verdana, arial;font-family:var(--mermaid-font-family);color:#333}#mermaid-1587845640346 .label text{fill:#333}#mermaid-1587845640346 .node rect,#mermaid-1587845640346 .node circle,#mermaid-1587845640346 .node ellipse,#mermaid-1587845640346 .node polygon,#mermaid-1587845640346 .node path{fill:#ECECFF;stroke:#9370db;stroke-width:1px}#mermaid-1587845640346 .node .label{text-align:center}#mermaid-1587845640346 .node.clickable{cursor:pointer}#mermaid-1587845640346 .arrowheadPath{fill:#333}#mermaid-1587845640346 .edgePath .path{stroke:#333;stroke-width:1.5px}#mermaid-1587845640346 .edgeLabel{background-color:#e8e8e8;text-align:center}#mermaid-1587845640346 .cluster rect{fill:#ffffde;stroke:#aa3;stroke-width:1px}#mermaid-1587845640346 .cluster text{fill:#333}#mermaid-1587845640346 div.mermaidTooltip{position:absolute;text-align:center;max-width:200px;padding:2px;font-family:&apos;trebuchet ms&apos;, verdana, arial;font-family:var(--mermaid-font-family);font-size:12px;background:#ffffde;border:1px solid #aa3;border-radius:2px;pointer-events:none;z-index:100}#mermaid-1587845640346 .actor{stroke:#ccf;fill:#ECECFF}#mermaid-1587845640346 text.actor{fill:#000;stroke:none}#mermaid-1587845640346 .actor-line{stroke:grey}#mermaid-1587845640346 .messageLine0{stroke-width:1.5;stroke-dasharray:&apos;2 2&apos;;stroke:#333}#mermaid-1587845640346 .messageLine1{stroke-width:1.5;stroke-dasharray:&apos;2 2&apos;;stroke:#333}#mermaid-1587845640346 #arrowhead{fill:#333}#mermaid-1587845640346 .sequenceNumber{fill:#fff}#mermaid-1587845640346 #sequencenumber{fill:#333}#mermaid-1587845640346 #crosshead path{fill:#333 !important;stroke:#333 !important}#mermaid-1587845640346 .messageText{fill:#333;stroke:none}#mermaid-1587845640346 .labelBox{stroke:#ccf;fill:#ECECFF}#mermaid-1587845640346 .labelText{fill:#000;stroke:none}#mermaid-1587845640346 .loopText{fill:#000;stroke:none}#mermaid-1587845640346 .loopLine{stroke-width:2;stroke-dasharray:&apos;2 2&apos;;stroke:#ccf}#mermaid-1587845640346 .note{stroke:#aa3;fill:#fff5ad}#mermaid-1587845640346 .noteText{fill:black;stroke:none;font-family:&apos;trebuchet ms&apos;, verdana, arial;font-family:var(--mermaid-font-family);font-size:14px}#mermaid-1587845640346 .activation0{fill:#f4f4f4;stroke:#666}#mermaid-1587845640346 .activation1{fill:#f4f4f4;stroke:#666}#mermaid-1587845640346 .activation2{fill:#f4f4f4;stroke:#666}#mermaid-1587845640346 .mermaid-main-font{font-family:&quot;trebuchet ms&quot;, verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1587845640346 .section{stroke:none;opacity:0.2}#mermaid-1587845640346 .section0{fill:rgba(102,102,255,0.49)}#mermaid-1587845640346 .section2{fill:#fff400}#mermaid-1587845640346 .section1,#mermaid-1587845640346 .section3{fill:#fff;opacity:0.2}#mermaid-1587845640346 .sectionTitle0{fill:#333}#mermaid-1587845640346 .sectionTitle1{fill:#333}#mermaid-1587845640346 .sectionTitle2{fill:#333}#mermaid-1587845640346 .sectionTitle3{fill:#333}#mermaid-1587845640346 .sectionTitle{text-anchor:start;font-size:11px;text-height:14px;font-family:&apos;trebuchet ms&apos;, verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1587845640346 .grid .tick{stroke:#d3d3d3;opacity:0.8;shape-rendering:crispEdges}#mermaid-1587845640346 .grid .tick text{font-family:&apos;trebuchet ms&apos;, verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1587845640346 .grid path{stroke-width:0}#mermaid-1587845640346 .today{fill:none;stroke:red;stroke-width:2px}#mermaid-1587845640346 .task{stroke-width:2}#mermaid-1587845640346 .taskText{text-anchor:middle;font-family:&apos;trebuchet ms&apos;, verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1587845640346 .taskText:not([font-size]){font-size:11px}#mermaid-1587845640346 .taskTextOutsideRight{fill:#000;text-anchor:start;font-size:11px;font-family:&apos;trebuchet ms&apos;, verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1587845640346 .taskTextOutsideLeft{fill:#000;text-anchor:end;font-size:11px}#mermaid-1587845640346 .task.clickable{cursor:pointer}#mermaid-1587845640346 .taskText.clickable{cursor:pointer;fill:#003163 !important;font-weight:bold}#mermaid-1587845640346 .taskTextOutsideLeft.clickable{cursor:pointer;fill:#003163 !important;font-weight:bold}#mermaid-1587845640346 .taskTextOutsideRight.clickable{cursor:pointer;fill:#003163 !important;font-weight:bold}#mermaid-1587845640346 .taskText0,#mermaid-1587845640346 .taskText1,#mermaid-1587845640346 .taskText2,#mermaid-1587845640346 .taskText3{fill:#fff}#mermaid-1587845640346 .task0,#mermaid-1587845640346 .task1,#mermaid-1587845640346 .task2,#mermaid-1587845640346 .task3{fill:#8a90dd;stroke:#534fbc}#mermaid-1587845640346 .taskTextOutside0,#mermaid-1587845640346 .taskTextOutside2{fill:#000}#mermaid-1587845640346 .taskTextOutside1,#mermaid-1587845640346 .taskTextOutside3{fill:#000}#mermaid-1587845640346 .active0,#mermaid-1587845640346 .active1,#mermaid-1587845640346 .active2,#mermaid-1587845640346 .active3{fill:#bfc7ff;stroke:#534fbc}#mermaid-1587845640346 .activeText0,#mermaid-1587845640346 .activeText1,#mermaid-1587845640346 .activeText2,#mermaid-1587845640346 .activeText3{fill:#000 !important}#mermaid-1587845640346 .done0,#mermaid-1587845640346 .done1,#mermaid-1587845640346 .done2,#mermaid-1587845640346 .done3{stroke:grey;fill:#d3d3d3;stroke-width:2}#mermaid-1587845640346 .doneText0,#mermaid-1587845640346 .doneText1,#mermaid-1587845640346 .doneText2,#mermaid-1587845640346 .doneText3{fill:#000 !important}#mermaid-1587845640346 .crit0,#mermaid-1587845640346 .crit1,#mermaid-1587845640346 .crit2,#mermaid-1587845640346 .crit3{stroke:#f88;fill:red;stroke-width:2}#mermaid-1587845640346 .activeCrit0,#mermaid-1587845640346 .activeCrit1,#mermaid-1587845640346 .activeCrit2,#mermaid-1587845640346 .activeCrit3{stroke:#f88;fill:#bfc7ff;stroke-width:2}#mermaid-1587845640346 .doneCrit0,#mermaid-1587845640346 .doneCrit1,#mermaid-1587845640346 .doneCrit2,#mermaid-1587845640346 .doneCrit3{stroke:#f88;fill:#d3d3d3;stroke-width:2;cursor:pointer;shape-rendering:crispEdges}#mermaid-1587845640346 .milestone{transform:rotate(45deg) scale(0.8, 0.8)}#mermaid-1587845640346 .milestoneText{font-style:italic}#mermaid-1587845640346 .doneCritText0,#mermaid-1587845640346 .doneCritText1,#mermaid-1587845640346 .doneCritText2,#mermaid-1587845640346 .doneCritText3{fill:#000 !important}#mermaid-1587845640346 .activeCritText0,#mermaid-1587845640346 .activeCritText1,#mermaid-1587845640346 .activeCritText2,#mermaid-1587845640346 .activeCritText3{fill:#000 !important}#mermaid-1587845640346 .titleText{text-anchor:middle;font-size:18px;fill:#000;font-family:&apos;trebuchet ms&apos;, verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1587845640346 g.classGroup text{fill:#9370db;stroke:none;font-family:&apos;trebuchet ms&apos;, verdana, arial;font-family:var(--mermaid-font-family);font-size:10px}#mermaid-1587845640346 g.classGroup text .title{font-weight:bolder}#mermaid-1587845640346 g.clickable{cursor:pointer}#mermaid-1587845640346 g.classGroup rect{fill:#ECECFF;stroke:#9370db}#mermaid-1587845640346 g.classGroup line{stroke:#9370db;stroke-width:1}#mermaid-1587845640346 .classLabel .box{stroke:none;stroke-width:0;fill:#ECECFF;opacity:0.5}#mermaid-1587845640346 .classLabel .label{fill:#9370db;font-size:10px}#mermaid-1587845640346 .relation{stroke:#9370db;stroke-width:1;fill:none}#mermaid-1587845640346 .dashed-line{stroke-dasharray:3}#mermaid-1587845640346 #compositionStart{fill:#9370db;stroke:#9370db;stroke-width:1}#mermaid-1587845640346 #compositionEnd{fill:#9370db;stroke:#9370db;stroke-width:1}#mermaid-1587845640346 #aggregationStart{fill:#ECECFF;stroke:#9370db;stroke-width:1}#mermaid-1587845640346 #aggregationEnd{fill:#ECECFF;stroke:#9370db;stroke-width:1}#mermaid-1587845640346 #dependencyStart{fill:#9370db;stroke:#9370db;stroke-width:1}#mermaid-1587845640346 #dependencyEnd{fill:#9370db;stroke:#9370db;stroke-width:1}#mermaid-1587845640346 #extensionStart{fill:#9370db;stroke:#9370db;stroke-width:1}#mermaid-1587845640346 #extensionEnd{fill:#9370db;stroke:#9370db;stroke-width:1}#mermaid-1587845640346 .commit-id,#mermaid-1587845640346 .commit-msg,#mermaid-1587845640346 .branch-label{fill:lightgrey;color:lightgrey;font-family:&apos;trebuchet ms&apos;, verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1587845640346 .pieTitleText{text-anchor:middle;font-size:25px;fill:#000;font-family:&apos;trebuchet ms&apos;, verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1587845640346 .slice{font-family:&apos;trebuchet ms&apos;, verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1587845640346 g.stateGroup text{fill:#9370db;stroke:none;font-size:10px;font-family:&apos;trebuchet ms&apos;, verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1587845640346 g.stateGroup text{fill:#9370db;stroke:none;font-size:10px}#mermaid-1587845640346 g.stateGroup .state-title{font-weight:bolder;fill:#000}#mermaid-1587845640346 g.stateGroup rect{fill:#ECECFF;stroke:#9370db}#mermaid-1587845640346 g.stateGroup line{stroke:#9370db;stroke-width:1}#mermaid-1587845640346 .transition{stroke:#9370db;stroke-width:1;fill:none}#mermaid-1587845640346 .stateGroup .composit{fill:white;border-bottom:1px}#mermaid-1587845640346 .stateGroup .alt-composit{fill:#e0e0e0;border-bottom:1px}#mermaid-1587845640346 .state-note{stroke:#aa3;fill:#fff5ad}#mermaid-1587845640346 .state-note text{fill:black;stroke:none;font-size:10px}#mermaid-1587845640346 .stateLabel .box{stroke:none;stroke-width:0;fill:#ECECFF;opacity:0.5}#mermaid-1587845640346 .stateLabel text{fill:#000;font-size:10px;font-weight:bold;font-family:&apos;trebuchet ms&apos;, verdana, arial;font-family:var(--mermaid-font-family)}:root{--mermaid-font-family: &apos;&quot;trebuchet ms&quot;, verdana, arial&apos;;--mermaid-font-family: &quot;Comic Sans MS&quot;, &quot;Comic Sans&quot;, cursive}

:root { --mermaid-font-family: &quot;trebuchet ms&quot;, verdana, arial;}&lt;/style&gt;&lt;style&gt;#mermaid-1587845640346 {
    color: rgb(0, 0, 0);
    font: normal normal 400 normal 16px / normal &quot;trebuchet ms&quot;, verdana, arial;
  }&lt;/style&gt;&lt;g&gt;&lt;/g&gt;&lt;g&gt;&lt;line id=&quot;actor0&quot; x1=&quot;75&quot; y1=&quot;5&quot; x2=&quot;75&quot; y2=&quot;333&quot; class=&quot;actor-line&quot; stroke-width=&quot;0.5px&quot; stroke=&quot;#999&quot;&gt;&lt;/line&gt;&lt;rect x=&quot;0&quot; y=&quot;0&quot; fill=&quot;#eaeaea&quot; stroke=&quot;#666&quot; width=&quot;150&quot; height=&quot;65&quot; rx=&quot;3&quot; ry=&quot;3&quot; class=&quot;actor&quot;&gt;&lt;/rect&gt;&lt;text x=&quot;75&quot; y=&quot;32.5&quot; dominant-baseline=&quot;central&quot; alignment-baseline=&quot;central&quot; class=&quot;actor&quot; style=&quot;text-anchor: middle; font-size: 14px;&quot;&gt;&lt;tspan x=&quot;75&quot; dy=&quot;0&quot;&gt;Hub&lt;/tspan&gt;&lt;/text&gt;&lt;/g&gt;&lt;g&gt;&lt;line id=&quot;actor1&quot; x1=&quot;275&quot; y1=&quot;5&quot; x2=&quot;275&quot; y2=&quot;333&quot; class=&quot;actor-line&quot; stroke-width=&quot;0.5px&quot; stroke=&quot;#999&quot;&gt;&lt;/line&gt;&lt;rect x=&quot;200&quot; y=&quot;0&quot; fill=&quot;#eaeaea&quot; stroke=&quot;#666&quot; width=&quot;150&quot; height=&quot;65&quot; rx=&quot;3&quot; ry=&quot;3&quot; class=&quot;actor&quot;&gt;&lt;/rect&gt;&lt;text x=&quot;275&quot; y=&quot;32.5&quot; dominant-baseline=&quot;central&quot; alignment-baseline=&quot;central&quot; class=&quot;actor&quot; style=&quot;text-anchor: middle; font-size: 14px;&quot;&gt;&lt;tspan x=&quot;275&quot; dy=&quot;0&quot;&gt;Middleware&lt;/tspan&gt;&lt;/text&gt;&lt;/g&gt;&lt;g&gt;&lt;line id=&quot;actor2&quot; x1=&quot;475&quot; y1=&quot;5&quot; x2=&quot;475&quot; y2=&quot;333&quot; class=&quot;actor-line&quot; stroke-width=&quot;0.5px&quot; stroke=&quot;#999&quot;&gt;&lt;/line&gt;&lt;rect x=&quot;400&quot; y=&quot;0&quot; fill=&quot;#eaeaea&quot; stroke=&quot;#666&quot; width=&quot;150&quot; height=&quot;65&quot; rx=&quot;3&quot; ry=&quot;3&quot; class=&quot;actor&quot;&gt;&lt;/rect&gt;&lt;text x=&quot;475&quot; y=&quot;32.5&quot; dominant-baseline=&quot;central&quot; alignment-baseline=&quot;central&quot; class=&quot;actor&quot; style=&quot;text-anchor: middle; font-size: 14px;&quot;&gt;&lt;tspan x=&quot;475&quot; dy=&quot;0&quot;&gt;TaskActivity&lt;/tspan&gt;&lt;/text&gt;&lt;/g&gt;&lt;defs&gt;&lt;marker id=&quot;arrowhead&quot; refX=&quot;5&quot; refY=&quot;2&quot; markerWidth=&quot;6&quot; markerHeight=&quot;4&quot; orient=&quot;auto&quot;&gt;&lt;path d=&quot;M 0,0 V 4 L6,2 Z&quot;&gt;&lt;/path&gt;&lt;/marker&gt;&lt;/defs&gt;&lt;defs&gt;&lt;marker id=&quot;crosshead&quot; markerWidth=&quot;15&quot; markerHeight=&quot;8&quot; orient=&quot;auto&quot; refX=&quot;16&quot; refY=&quot;4&quot;&gt;&lt;path fill=&quot;black&quot; stroke=&quot;#000000&quot; stroke-width=&quot;1px&quot; d=&quot;M 9,2 V 6 L16,4 Z&quot; style=&quot;stroke-dasharray: 0, 0;&quot;&gt;&lt;/path&gt;&lt;path fill=&quot;none&quot; stroke=&quot;#000000&quot; stroke-width=&quot;1px&quot; d=&quot;M 0,1 L 6,7 M 6,1 L 0,7&quot; style=&quot;stroke-dasharray: 0, 0;&quot;&gt;&lt;/path&gt;&lt;/marker&gt;&lt;/defs&gt;&lt;defs&gt;&lt;marker id=&quot;sequencenumber&quot; refX=&quot;15&quot; refY=&quot;15&quot; markerWidth=&quot;60&quot; markerHeight=&quot;40&quot; orient=&quot;auto&quot;&gt;&lt;circle cx=&quot;15&quot; cy=&quot;15&quot; r=&quot;6&quot;&gt;&lt;/circle&gt;&lt;/marker&gt;&lt;/defs&gt;&lt;g&gt;&lt;rect x=&quot;0&quot; y=&quot;75&quot; fill=&quot;#EDF2AE&quot; stroke=&quot;#666&quot; width=&quot;150&quot; height=&quot;68&quot; rx=&quot;0&quot; ry=&quot;0&quot; class=&quot;note&quot;&gt;&lt;/rect&gt;&lt;text x=&quot;-4&quot; y=&quot;99&quot; class=&quot;noteText&quot;&gt;&lt;tspan x=&quot;16&quot;&gt;Hub receives &lt;/tspan&gt;&lt;/text&gt;&lt;text x=&quot;-4&quot; y=&quot;115&quot; class=&quot;noteText&quot;&gt;&lt;tspan x=&quot;16&quot;&gt; the TaskScheduled &lt;/tspan&gt;&lt;/text&gt;&lt;text x=&quot;-4&quot; y=&quot;131&quot; class=&quot;noteText&quot;&gt;&lt;tspan x=&quot;16&quot;&gt; event&lt;/tspan&gt;&lt;/text&gt;&lt;/g&gt;&lt;g&gt;&lt;text x=&quot;175&quot; y=&quot;171&quot; class=&quot;messageText&quot; style=&quot;text-anchor: middle;&quot;&gt;Middleware Invoked&lt;/text&gt;&lt;line x1=&quot;75&quot; y1=&quot;178&quot; x2=&quot;275&quot; y2=&quot;178&quot; class=&quot;messageLine0&quot; stroke-width=&quot;2&quot; stroke=&quot;black&quot; marker-end=&quot;url(#arrowhead)&quot; style=&quot;fill: none;&quot;&gt;&lt;/line&gt;&lt;/g&gt;&lt;g&gt;&lt;text x=&quot;175&quot; y=&quot;206&quot; class=&quot;messageText&quot; style=&quot;text-anchor: middle;&quot;&gt;Middleware Execution Complete&lt;/text&gt;&lt;line x1=&quot;275&quot; y1=&quot;213&quot; x2=&quot;75&quot; y2=&quot;213&quot; class=&quot;messageLine0&quot; stroke-width=&quot;2&quot; stroke=&quot;black&quot; marker-end=&quot;url(#arrowhead)&quot; style=&quot;fill: none;&quot;&gt;&lt;/line&gt;&lt;/g&gt;&lt;g&gt;&lt;text x=&quot;275&quot; y=&quot;241&quot; class=&quot;messageText&quot; style=&quot;text-anchor: middle;&quot;&gt;Task Invoked&lt;/text&gt;&lt;line x1=&quot;75&quot; y1=&quot;248&quot; x2=&quot;475&quot; y2=&quot;248&quot; class=&quot;messageLine0&quot; stroke-width=&quot;2&quot; stroke=&quot;black&quot; marker-end=&quot;url(#arrowhead)&quot; style=&quot;fill: none;&quot;&gt;&lt;/line&gt;&lt;/g&gt;&lt;g&gt;&lt;rect x=&quot;0&quot; y=&quot;268&quot; fill=&quot;#eaeaea&quot; stroke=&quot;#666&quot; width=&quot;150&quot; height=&quot;65&quot; rx=&quot;3&quot; ry=&quot;3&quot; class=&quot;actor&quot;&gt;&lt;/rect&gt;&lt;text x=&quot;75&quot; y=&quot;300.5&quot; dominant-baseline=&quot;central&quot; alignment-baseline=&quot;central&quot; class=&quot;actor&quot; style=&quot;text-anchor: middle; font-size: 14px;&quot;&gt;&lt;tspan x=&quot;75&quot; dy=&quot;0&quot;&gt;Hub&lt;/tspan&gt;&lt;/text&gt;&lt;/g&gt;&lt;g&gt;&lt;rect x=&quot;200&quot; y=&quot;268&quot; fill=&quot;#eaeaea&quot; stroke=&quot;#666&quot; width=&quot;150&quot; height=&quot;65&quot; rx=&quot;3&quot; ry=&quot;3&quot; class=&quot;actor&quot;&gt;&lt;/rect&gt;&lt;text x=&quot;275&quot; y=&quot;300.5&quot; dominant-baseline=&quot;central&quot; alignment-baseline=&quot;central&quot; class=&quot;actor&quot; style=&quot;text-anchor: middle; font-size: 14px;&quot;&gt;&lt;tspan x=&quot;275&quot; dy=&quot;0&quot;&gt;Middleware&lt;/tspan&gt;&lt;/text&gt;&lt;/g&gt;&lt;g&gt;&lt;rect x=&quot;400&quot; y=&quot;268&quot; fill=&quot;#eaeaea&quot; stroke=&quot;#666&quot; width=&quot;150&quot; height=&quot;65&quot; rx=&quot;3&quot; ry=&quot;3&quot; class=&quot;actor&quot;&gt;&lt;/rect&gt;&lt;text x=&quot;475&quot; y=&quot;300.5&quot; dominant-baseline=&quot;central&quot; alignment-baseline=&quot;central&quot; class=&quot;actor&quot; style=&quot;text-anchor: middle; font-size: 14px;&quot;&gt;&lt;tspan x=&quot;475&quot; dy=&quot;0&quot;&gt;TaskActivity&lt;/tspan&gt;&lt;/text&gt;&lt;/g&gt;&lt;/svg&gt;&lt;/div&gt;
&lt;p&gt;The middlewares get invoked in the same thread as Tasks, and they individually do not have any reliability. There is no state marker to show middleware was run successfully, but the Task failed. Middlewares get invoked for all tasks irrespective if the Task had failed in its previous run or not. It is agnostic to the Task triggering the middleware.&lt;/p&gt;
&lt;p&gt;Also, the middleware cannot be used to handle task failures. You cannot put a try-catch around the &lt;code class=&quot;language-text&quot;&gt;next()&lt;/code&gt; call. The Exceptions thrown by the Task are caught and swallowed by the framework in the &lt;em&gt;TaskDispatcher&lt;/em&gt; part of the code, and the middlewares do not receive it.&lt;/p&gt;
&lt;h4&gt;Potential Gotcha!&lt;/h4&gt;
&lt;p&gt;Middlewares, if they fail, will fail the Task as well. Interestingly , such failures &lt;strong&gt;do not trigger the &lt;code class=&quot;language-text&quot;&gt;TaskFailed&lt;/code&gt; event&lt;/strong&gt;. But since the TaskScheduled message is not removed from the queue, the Hub keeps retrying and gives up when the limit is reached. Since the TaskFailed event was not generated, Azure Table Storage would also not show that the Task had failed. &lt;/p&gt;
&lt;p&gt;Here is an example when one task completes, and others fail due to a failure in the middleware. &lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 590px;&quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/blog/static/91116b4a7188b097891bc8fc56884dd4/96658/TableStore.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 25%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAYAAABFA8wzAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAA+ElEQVQY002NTU4CQRCF57puDHHjDTyEpyCjiTsTVAwrB4IYEzNdXdXd8wcCbgRWz+p2MmHx8l79fZXdzn5x/XDC1f0Rl7nqrld+VueHvn8a5iPdvxgfcfN4QNOs0XRb1O03suKrwWzl8LxgPC0EL0unzpgUlPJkbjF990mxjv66Cpgufdoryg3mnxZvHwRT7ZE1dQUvDLEGjkmzhZBJipmpROUl5eh1cAiO4XS/1nrTtRBmkDH42SswhBrWMkqjH8gOuSzN0DPqLA7MonIpi/Np1nbr4Wa7i8CqgtUP8YgisM//MqlHRD1MIAqLAO9D8i4C+5udAv8ATixg3fcEHYUAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;Store&quot;
        title=&quot;Store&quot;
        src=&quot;/blog/static/91116b4a7188b097891bc8fc56884dd4/fcda8/TableStore.png&quot;
        srcset=&quot;/blog/static/91116b4a7188b097891bc8fc56884dd4/12f09/TableStore.png 148w,
/blog/static/91116b4a7188b097891bc8fc56884dd4/e4a3f/TableStore.png 295w,
/blog/static/91116b4a7188b097891bc8fc56884dd4/fcda8/TableStore.png 590w,
/blog/static/91116b4a7188b097891bc8fc56884dd4/96658/TableStore.png 881w&quot;
        sizes=&quot;(max-width: 590px) 100vw, 590px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt; &lt;/p&gt;
&lt;p&gt;The store has all the data about &lt;em&gt;Task1&lt;/em&gt; till it was scheduled. One would be excused for thinking that &lt;em&gt;Task1&lt;/em&gt; was never picked up, and there is something wrong with DTF.&lt;/p&gt;
&lt;p&gt;What happened was, our middleware threw an exception when it was run in the context of &lt;em&gt;Task1&lt;/em&gt;, but in other cases, it passed. Hence there is no data for &lt;em&gt;Task1&lt;/em&gt; failing. This behavior is something to keep in mind when debugging the failures.&lt;/p&gt;
&lt;h3&gt;Orchestration Middlewares&lt;/h3&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;csharp&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber NaN&quot; class=&quot;language-csharp line-numbers&quot;&gt;&lt;code class=&quot;language-csharp&quot;&gt; hubWorker&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;AddOrchestrationDispatcherMiddleware&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;context&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; next&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;var&lt;/span&gt; orchestration &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; context&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token generic-method&quot;&gt;&lt;span class=&quot;token function&quot;&gt;GetProperty&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;TaskOrchestration&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;var&lt;/span&gt; state &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; context&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token generic-method&quot;&gt;&lt;span class=&quot;token function&quot;&gt;GetProperty&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;OrchestrationRuntimeState&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;var&lt;/span&gt; instance &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; context&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token generic-method&quot;&gt;&lt;span class=&quot;token function&quot;&gt;GetProperty&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;OrchestrationInstance&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    Console&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;WriteLine&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;\n   orchestration Details - &quot;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; orchestration&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;GetType&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;ToString&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot; Id = &quot;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; instance&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;InstanceId &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;state = &quot;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; state&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Events&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Count &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;\n&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;next&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Orchestration Middlewares work and behave the same way as the TaskActivity middlewares. The middleware gets invoked &lt;em&gt;each time&lt;/em&gt; the orchestration gets invoked. Similar to activity middlewares a try-catch would not be able to catch exceptions from Orchestrations.&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Durable Task Framework Internals - Part 3 (Tracker Queue, Instance History, and JumpStart)]]></title><description><![CDATA[Durable Task Framework Series This post is part 3 of a series of posts on DTF. Durable Task Framework Internals - Part 1 (Dataflow and…]]></description><link>https://abhikmitra.github.io/blog/durable-task-3/</link><guid isPermaLink="false">https://abhikmitra.github.io/blog/durable-task-3/</guid><pubDate>Sat, 25 Apr 2020 18:00:00 GMT</pubDate><content:encoded>&lt;h3&gt;Durable Task Framework Series&lt;/h3&gt;
&lt;p&gt;This post is &lt;strong&gt;part 3&lt;/strong&gt; of a series of posts on DTF.&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;a href=&quot;https://abhikmitra.github.io/blog/durable-task/&quot;&gt;Durable Task Framework Internals - Part 1 (Dataflow and Reliability)&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://abhikmitra.github.io/blog/durable-task-2/&quot;&gt;Durable Task Framework Internals - Part 2 (The curious case of Orchestrations)&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://abhikmitra.github.io/blog/durable-task-3/&quot;&gt;Durable Task Framework Internals - Part 3 (Tracker Queue, Instance History, and JumpStart)&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://abhikmitra.github.io/blog/durable-task-4/&quot;&gt;Durable Task Framework Internals - Part 4 (Terminated Orchestrations &amp;#x26; Middlewares)&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;Do you think there is more that I should cover or something I should fix ? Please raise an &lt;a href=&quot;https://github.com/abhikmitra/blog/issues&quot;&gt;issue&lt;/a&gt; and let me know&lt;/p&gt;
&lt;hr&gt;
&lt;h3&gt;The Tracker Queue&lt;/h3&gt;
&lt;p&gt;in Part 1, I had discussed that DTF creates three queues in Service Bus (&lt;code class=&quot;language-text&quot;&gt;Orchestrator&lt;/code&gt;, &lt;code class=&quot;language-text&quot;&gt;Worker&lt;/code&gt; &amp;#x26;&lt;code class=&quot;language-text&quot;&gt;Tracking&lt;/code&gt;). In the last two sections, we discussed in-depth about how these Orchestrator and Worker help run tasks durably.&lt;/p&gt;
&lt;p&gt;The &lt;code class=&quot;language-text&quot;&gt;tracking&lt;/code&gt; queue is used for tracking events. In essence, you can disable the tracking queue, and the functionality would still work. Here is the sequence diagram of how various tracking messages are sent.&lt;/p&gt;
&lt;div class=&quot;mermaid&quot; data-processed=&quot;true&quot;&gt;&lt;svg id=&quot;mermaid-1587845642139&quot; width=&quot;100%&quot; xmlns=&quot;http://www.w3.org/2000/svg&quot; height=&quot;100%&quot; style=&quot;max-width:1450px;&quot; viewBox=&quot;-50 -10 1450 1176&quot;&gt;&lt;style&gt;#mermaid-1587845642139 .label{font-family:&apos;trebuchet ms&apos;, verdana, arial;font-family:var(--mermaid-font-family);color:#333}#mermaid-1587845642139 .label text{fill:#333}#mermaid-1587845642139 .node rect,#mermaid-1587845642139 .node circle,#mermaid-1587845642139 .node ellipse,#mermaid-1587845642139 .node polygon,#mermaid-1587845642139 .node path{fill:#ECECFF;stroke:#9370db;stroke-width:1px}#mermaid-1587845642139 .node .label{text-align:center}#mermaid-1587845642139 .node.clickable{cursor:pointer}#mermaid-1587845642139 .arrowheadPath{fill:#333}#mermaid-1587845642139 .edgePath .path{stroke:#333;stroke-width:1.5px}#mermaid-1587845642139 .edgeLabel{background-color:#e8e8e8;text-align:center}#mermaid-1587845642139 .cluster rect{fill:#ffffde;stroke:#aa3;stroke-width:1px}#mermaid-1587845642139 .cluster text{fill:#333}#mermaid-1587845642139 div.mermaidTooltip{position:absolute;text-align:center;max-width:200px;padding:2px;font-family:&apos;trebuchet ms&apos;, verdana, arial;font-family:var(--mermaid-font-family);font-size:12px;background:#ffffde;border:1px solid #aa3;border-radius:2px;pointer-events:none;z-index:100}#mermaid-1587845642139 .actor{stroke:#ccf;fill:#ECECFF}#mermaid-1587845642139 text.actor{fill:#000;stroke:none}#mermaid-1587845642139 .actor-line{stroke:grey}#mermaid-1587845642139 .messageLine0{stroke-width:1.5;stroke-dasharray:&apos;2 2&apos;;stroke:#333}#mermaid-1587845642139 .messageLine1{stroke-width:1.5;stroke-dasharray:&apos;2 2&apos;;stroke:#333}#mermaid-1587845642139 #arrowhead{fill:#333}#mermaid-1587845642139 .sequenceNumber{fill:#fff}#mermaid-1587845642139 #sequencenumber{fill:#333}#mermaid-1587845642139 #crosshead path{fill:#333 !important;stroke:#333 !important}#mermaid-1587845642139 .messageText{fill:#333;stroke:none}#mermaid-1587845642139 .labelBox{stroke:#ccf;fill:#ECECFF}#mermaid-1587845642139 .labelText{fill:#000;stroke:none}#mermaid-1587845642139 .loopText{fill:#000;stroke:none}#mermaid-1587845642139 .loopLine{stroke-width:2;stroke-dasharray:&apos;2 2&apos;;stroke:#ccf}#mermaid-1587845642139 .note{stroke:#aa3;fill:#fff5ad}#mermaid-1587845642139 .noteText{fill:black;stroke:none;font-family:&apos;trebuchet ms&apos;, verdana, arial;font-family:var(--mermaid-font-family);font-size:14px}#mermaid-1587845642139 .activation0{fill:#f4f4f4;stroke:#666}#mermaid-1587845642139 .activation1{fill:#f4f4f4;stroke:#666}#mermaid-1587845642139 .activation2{fill:#f4f4f4;stroke:#666}#mermaid-1587845642139 .mermaid-main-font{font-family:&quot;trebuchet ms&quot;, verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1587845642139 .section{stroke:none;opacity:0.2}#mermaid-1587845642139 .section0{fill:rgba(102,102,255,0.49)}#mermaid-1587845642139 .section2{fill:#fff400}#mermaid-1587845642139 .section1,#mermaid-1587845642139 .section3{fill:#fff;opacity:0.2}#mermaid-1587845642139 .sectionTitle0{fill:#333}#mermaid-1587845642139 .sectionTitle1{fill:#333}#mermaid-1587845642139 .sectionTitle2{fill:#333}#mermaid-1587845642139 .sectionTitle3{fill:#333}#mermaid-1587845642139 .sectionTitle{text-anchor:start;font-size:11px;text-height:14px;font-family:&apos;trebuchet ms&apos;, verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1587845642139 .grid .tick{stroke:#d3d3d3;opacity:0.8;shape-rendering:crispEdges}#mermaid-1587845642139 .grid .tick text{font-family:&apos;trebuchet ms&apos;, verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1587845642139 .grid path{stroke-width:0}#mermaid-1587845642139 .today{fill:none;stroke:red;stroke-width:2px}#mermaid-1587845642139 .task{stroke-width:2}#mermaid-1587845642139 .taskText{text-anchor:middle;font-family:&apos;trebuchet ms&apos;, verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1587845642139 .taskText:not([font-size]){font-size:11px}#mermaid-1587845642139 .taskTextOutsideRight{fill:#000;text-anchor:start;font-size:11px;font-family:&apos;trebuchet ms&apos;, verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1587845642139 .taskTextOutsideLeft{fill:#000;text-anchor:end;font-size:11px}#mermaid-1587845642139 .task.clickable{cursor:pointer}#mermaid-1587845642139 .taskText.clickable{cursor:pointer;fill:#003163 !important;font-weight:bold}#mermaid-1587845642139 .taskTextOutsideLeft.clickable{cursor:pointer;fill:#003163 !important;font-weight:bold}#mermaid-1587845642139 .taskTextOutsideRight.clickable{cursor:pointer;fill:#003163 !important;font-weight:bold}#mermaid-1587845642139 .taskText0,#mermaid-1587845642139 .taskText1,#mermaid-1587845642139 .taskText2,#mermaid-1587845642139 .taskText3{fill:#fff}#mermaid-1587845642139 .task0,#mermaid-1587845642139 .task1,#mermaid-1587845642139 .task2,#mermaid-1587845642139 .task3{fill:#8a90dd;stroke:#534fbc}#mermaid-1587845642139 .taskTextOutside0,#mermaid-1587845642139 .taskTextOutside2{fill:#000}#mermaid-1587845642139 .taskTextOutside1,#mermaid-1587845642139 .taskTextOutside3{fill:#000}#mermaid-1587845642139 .active0,#mermaid-1587845642139 .active1,#mermaid-1587845642139 .active2,#mermaid-1587845642139 .active3{fill:#bfc7ff;stroke:#534fbc}#mermaid-1587845642139 .activeText0,#mermaid-1587845642139 .activeText1,#mermaid-1587845642139 .activeText2,#mermaid-1587845642139 .activeText3{fill:#000 !important}#mermaid-1587845642139 .done0,#mermaid-1587845642139 .done1,#mermaid-1587845642139 .done2,#mermaid-1587845642139 .done3{stroke:grey;fill:#d3d3d3;stroke-width:2}#mermaid-1587845642139 .doneText0,#mermaid-1587845642139 .doneText1,#mermaid-1587845642139 .doneText2,#mermaid-1587845642139 .doneText3{fill:#000 !important}#mermaid-1587845642139 .crit0,#mermaid-1587845642139 .crit1,#mermaid-1587845642139 .crit2,#mermaid-1587845642139 .crit3{stroke:#f88;fill:red;stroke-width:2}#mermaid-1587845642139 .activeCrit0,#mermaid-1587845642139 .activeCrit1,#mermaid-1587845642139 .activeCrit2,#mermaid-1587845642139 .activeCrit3{stroke:#f88;fill:#bfc7ff;stroke-width:2}#mermaid-1587845642139 .doneCrit0,#mermaid-1587845642139 .doneCrit1,#mermaid-1587845642139 .doneCrit2,#mermaid-1587845642139 .doneCrit3{stroke:#f88;fill:#d3d3d3;stroke-width:2;cursor:pointer;shape-rendering:crispEdges}#mermaid-1587845642139 .milestone{transform:rotate(45deg) scale(0.8, 0.8)}#mermaid-1587845642139 .milestoneText{font-style:italic}#mermaid-1587845642139 .doneCritText0,#mermaid-1587845642139 .doneCritText1,#mermaid-1587845642139 .doneCritText2,#mermaid-1587845642139 .doneCritText3{fill:#000 !important}#mermaid-1587845642139 .activeCritText0,#mermaid-1587845642139 .activeCritText1,#mermaid-1587845642139 .activeCritText2,#mermaid-1587845642139 .activeCritText3{fill:#000 !important}#mermaid-1587845642139 .titleText{text-anchor:middle;font-size:18px;fill:#000;font-family:&apos;trebuchet ms&apos;, verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1587845642139 g.classGroup text{fill:#9370db;stroke:none;font-family:&apos;trebuchet ms&apos;, verdana, arial;font-family:var(--mermaid-font-family);font-size:10px}#mermaid-1587845642139 g.classGroup text .title{font-weight:bolder}#mermaid-1587845642139 g.clickable{cursor:pointer}#mermaid-1587845642139 g.classGroup rect{fill:#ECECFF;stroke:#9370db}#mermaid-1587845642139 g.classGroup line{stroke:#9370db;stroke-width:1}#mermaid-1587845642139 .classLabel .box{stroke:none;stroke-width:0;fill:#ECECFF;opacity:0.5}#mermaid-1587845642139 .classLabel .label{fill:#9370db;font-size:10px}#mermaid-1587845642139 .relation{stroke:#9370db;stroke-width:1;fill:none}#mermaid-1587845642139 .dashed-line{stroke-dasharray:3}#mermaid-1587845642139 #compositionStart{fill:#9370db;stroke:#9370db;stroke-width:1}#mermaid-1587845642139 #compositionEnd{fill:#9370db;stroke:#9370db;stroke-width:1}#mermaid-1587845642139 #aggregationStart{fill:#ECECFF;stroke:#9370db;stroke-width:1}#mermaid-1587845642139 #aggregationEnd{fill:#ECECFF;stroke:#9370db;stroke-width:1}#mermaid-1587845642139 #dependencyStart{fill:#9370db;stroke:#9370db;stroke-width:1}#mermaid-1587845642139 #dependencyEnd{fill:#9370db;stroke:#9370db;stroke-width:1}#mermaid-1587845642139 #extensionStart{fill:#9370db;stroke:#9370db;stroke-width:1}#mermaid-1587845642139 #extensionEnd{fill:#9370db;stroke:#9370db;stroke-width:1}#mermaid-1587845642139 .commit-id,#mermaid-1587845642139 .commit-msg,#mermaid-1587845642139 .branch-label{fill:lightgrey;color:lightgrey;font-family:&apos;trebuchet ms&apos;, verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1587845642139 .pieTitleText{text-anchor:middle;font-size:25px;fill:#000;font-family:&apos;trebuchet ms&apos;, verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1587845642139 .slice{font-family:&apos;trebuchet ms&apos;, verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1587845642139 g.stateGroup text{fill:#9370db;stroke:none;font-size:10px;font-family:&apos;trebuchet ms&apos;, verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1587845642139 g.stateGroup text{fill:#9370db;stroke:none;font-size:10px}#mermaid-1587845642139 g.stateGroup .state-title{font-weight:bolder;fill:#000}#mermaid-1587845642139 g.stateGroup rect{fill:#ECECFF;stroke:#9370db}#mermaid-1587845642139 g.stateGroup line{stroke:#9370db;stroke-width:1}#mermaid-1587845642139 .transition{stroke:#9370db;stroke-width:1;fill:none}#mermaid-1587845642139 .stateGroup .composit{fill:white;border-bottom:1px}#mermaid-1587845642139 .stateGroup .alt-composit{fill:#e0e0e0;border-bottom:1px}#mermaid-1587845642139 .state-note{stroke:#aa3;fill:#fff5ad}#mermaid-1587845642139 .state-note text{fill:black;stroke:none;font-size:10px}#mermaid-1587845642139 .stateLabel .box{stroke:none;stroke-width:0;fill:#ECECFF;opacity:0.5}#mermaid-1587845642139 .stateLabel text{fill:#000;font-size:10px;font-weight:bold;font-family:&apos;trebuchet ms&apos;, verdana, arial;font-family:var(--mermaid-font-family)}:root{--mermaid-font-family: &apos;&quot;trebuchet ms&quot;, verdana, arial&apos;;--mermaid-font-family: &quot;Comic Sans MS&quot;, &quot;Comic Sans&quot;, cursive}

:root { --mermaid-font-family: &quot;trebuchet ms&quot;, verdana, arial;}&lt;/style&gt;&lt;style&gt;#mermaid-1587845642139 {
    color: rgb(0, 0, 0);
    font: normal normal 400 normal 16px / normal &quot;trebuchet ms&quot;, verdana, arial;
  }&lt;/style&gt;&lt;g&gt;&lt;/g&gt;&lt;g&gt;&lt;line id=&quot;actor0&quot; x1=&quot;75&quot; y1=&quot;5&quot; x2=&quot;75&quot; y2=&quot;1165&quot; class=&quot;actor-line&quot; stroke-width=&quot;0.5px&quot; stroke=&quot;#999&quot;&gt;&lt;/line&gt;&lt;rect x=&quot;0&quot; y=&quot;0&quot; fill=&quot;#eaeaea&quot; stroke=&quot;#666&quot; width=&quot;150&quot; height=&quot;65&quot; rx=&quot;3&quot; ry=&quot;3&quot; class=&quot;actor&quot;&gt;&lt;/rect&gt;&lt;text x=&quot;75&quot; y=&quot;32.5&quot; dominant-baseline=&quot;central&quot; alignment-baseline=&quot;central&quot; class=&quot;actor&quot; style=&quot;text-anchor: middle; font-size: 14px;&quot;&gt;&lt;tspan x=&quot;75&quot; dy=&quot;0&quot;&gt;Client&lt;/tspan&gt;&lt;/text&gt;&lt;/g&gt;&lt;g&gt;&lt;line id=&quot;actor1&quot; x1=&quot;275&quot; y1=&quot;5&quot; x2=&quot;275&quot; y2=&quot;1165&quot; class=&quot;actor-line&quot; stroke-width=&quot;0.5px&quot; stroke=&quot;#999&quot;&gt;&lt;/line&gt;&lt;rect x=&quot;200&quot; y=&quot;0&quot; fill=&quot;#eaeaea&quot; stroke=&quot;#666&quot; width=&quot;150&quot; height=&quot;65&quot; rx=&quot;3&quot; ry=&quot;3&quot; class=&quot;actor&quot;&gt;&lt;/rect&gt;&lt;text x=&quot;275&quot; y=&quot;32.5&quot; dominant-baseline=&quot;central&quot; alignment-baseline=&quot;central&quot; class=&quot;actor&quot; style=&quot;text-anchor: middle; font-size: 14px;&quot;&gt;&lt;tspan x=&quot;275&quot; dy=&quot;0&quot;&gt;Orchestrator&lt;/tspan&gt;&lt;/text&gt;&lt;/g&gt;&lt;g&gt;&lt;line id=&quot;actor2&quot; x1=&quot;475&quot; y1=&quot;5&quot; x2=&quot;475&quot; y2=&quot;1165&quot; class=&quot;actor-line&quot; stroke-width=&quot;0.5px&quot; stroke=&quot;#999&quot;&gt;&lt;/line&gt;&lt;rect x=&quot;400&quot; y=&quot;0&quot; fill=&quot;#eaeaea&quot; stroke=&quot;#666&quot; width=&quot;150&quot; height=&quot;65&quot; rx=&quot;3&quot; ry=&quot;3&quot; class=&quot;actor&quot;&gt;&lt;/rect&gt;&lt;text x=&quot;475&quot; y=&quot;32.5&quot; dominant-baseline=&quot;central&quot; alignment-baseline=&quot;central&quot; class=&quot;actor&quot; style=&quot;text-anchor: middle; font-size: 14px;&quot;&gt;&lt;tspan x=&quot;475&quot; dy=&quot;0&quot;&gt;Hub&lt;/tspan&gt;&lt;/text&gt;&lt;/g&gt;&lt;g&gt;&lt;line id=&quot;actor3&quot; x1=&quot;675&quot; y1=&quot;5&quot; x2=&quot;675&quot; y2=&quot;1165&quot; class=&quot;actor-line&quot; stroke-width=&quot;0.5px&quot; stroke=&quot;#999&quot;&gt;&lt;/line&gt;&lt;rect x=&quot;600&quot; y=&quot;0&quot; fill=&quot;#eaeaea&quot; stroke=&quot;#666&quot; width=&quot;150&quot; height=&quot;65&quot; rx=&quot;3&quot; ry=&quot;3&quot; class=&quot;actor&quot;&gt;&lt;/rect&gt;&lt;text x=&quot;675&quot; y=&quot;32.5&quot; dominant-baseline=&quot;central&quot; alignment-baseline=&quot;central&quot; class=&quot;actor&quot; style=&quot;text-anchor: middle; font-size: 14px;&quot;&gt;&lt;tspan x=&quot;675&quot; dy=&quot;0&quot;&gt;TestOrchestration&lt;/tspan&gt;&lt;/text&gt;&lt;/g&gt;&lt;g&gt;&lt;line id=&quot;actor4&quot; x1=&quot;875&quot; y1=&quot;5&quot; x2=&quot;875&quot; y2=&quot;1165&quot; class=&quot;actor-line&quot; stroke-width=&quot;0.5px&quot; stroke=&quot;#999&quot;&gt;&lt;/line&gt;&lt;rect x=&quot;800&quot; y=&quot;0&quot; fill=&quot;#eaeaea&quot; stroke=&quot;#666&quot; width=&quot;150&quot; height=&quot;65&quot; rx=&quot;3&quot; ry=&quot;3&quot; class=&quot;actor&quot;&gt;&lt;/rect&gt;&lt;text x=&quot;875&quot; y=&quot;32.5&quot; dominant-baseline=&quot;central&quot; alignment-baseline=&quot;central&quot; class=&quot;actor&quot; style=&quot;text-anchor: middle; font-size: 14px;&quot;&gt;&lt;tspan x=&quot;875&quot; dy=&quot;0&quot;&gt;Worker&lt;/tspan&gt;&lt;/text&gt;&lt;/g&gt;&lt;g&gt;&lt;line id=&quot;actor5&quot; x1=&quot;1075&quot; y1=&quot;5&quot; x2=&quot;1075&quot; y2=&quot;1165&quot; class=&quot;actor-line&quot; stroke-width=&quot;0.5px&quot; stroke=&quot;#999&quot;&gt;&lt;/line&gt;&lt;rect x=&quot;1000&quot; y=&quot;0&quot; fill=&quot;#eaeaea&quot; stroke=&quot;#666&quot; width=&quot;150&quot; height=&quot;65&quot; rx=&quot;3&quot; ry=&quot;3&quot; class=&quot;actor&quot;&gt;&lt;/rect&gt;&lt;text x=&quot;1075&quot; y=&quot;32.5&quot; dominant-baseline=&quot;central&quot; alignment-baseline=&quot;central&quot; class=&quot;actor&quot; style=&quot;text-anchor: middle; font-size: 14px;&quot;&gt;&lt;tspan x=&quot;1075&quot; dy=&quot;0&quot;&gt;Tracker&lt;/tspan&gt;&lt;/text&gt;&lt;/g&gt;&lt;g&gt;&lt;line id=&quot;actor6&quot; x1=&quot;1275&quot; y1=&quot;5&quot; x2=&quot;1275&quot; y2=&quot;1165&quot; class=&quot;actor-line&quot; stroke-width=&quot;0.5px&quot; stroke=&quot;#999&quot;&gt;&lt;/line&gt;&lt;rect x=&quot;1200&quot; y=&quot;0&quot; fill=&quot;#eaeaea&quot; stroke=&quot;#666&quot; width=&quot;150&quot; height=&quot;65&quot; rx=&quot;3&quot; ry=&quot;3&quot; class=&quot;actor&quot;&gt;&lt;/rect&gt;&lt;text x=&quot;1275&quot; y=&quot;32.5&quot; dominant-baseline=&quot;central&quot; alignment-baseline=&quot;central&quot; class=&quot;actor&quot; style=&quot;text-anchor: middle; font-size: 14px;&quot;&gt;&lt;tspan x=&quot;1275&quot; dy=&quot;0&quot;&gt;TaskActivity&lt;/tspan&gt;&lt;/text&gt;&lt;/g&gt;&lt;defs&gt;&lt;marker id=&quot;arrowhead&quot; refX=&quot;5&quot; refY=&quot;2&quot; markerWidth=&quot;6&quot; markerHeight=&quot;4&quot; orient=&quot;auto&quot;&gt;&lt;path d=&quot;M 0,0 V 4 L6,2 Z&quot;&gt;&lt;/path&gt;&lt;/marker&gt;&lt;/defs&gt;&lt;defs&gt;&lt;marker id=&quot;crosshead&quot; markerWidth=&quot;15&quot; markerHeight=&quot;8&quot; orient=&quot;auto&quot; refX=&quot;16&quot; refY=&quot;4&quot;&gt;&lt;path fill=&quot;black&quot; stroke=&quot;#000000&quot; stroke-width=&quot;1px&quot; d=&quot;M 9,2 V 6 L16,4 Z&quot; style=&quot;stroke-dasharray: 0, 0;&quot;&gt;&lt;/path&gt;&lt;path fill=&quot;none&quot; stroke=&quot;#000000&quot; stroke-width=&quot;1px&quot; d=&quot;M 0,1 L 6,7 M 6,1 L 0,7&quot; style=&quot;stroke-dasharray: 0, 0;&quot;&gt;&lt;/path&gt;&lt;/marker&gt;&lt;/defs&gt;&lt;defs&gt;&lt;marker id=&quot;sequencenumber&quot; refX=&quot;15&quot; refY=&quot;15&quot; markerWidth=&quot;60&quot; markerHeight=&quot;40&quot; orient=&quot;auto&quot;&gt;&lt;circle cx=&quot;15&quot; cy=&quot;15&quot; r=&quot;6&quot;&gt;&lt;/circle&gt;&lt;/marker&gt;&lt;/defs&gt;&lt;g&gt;&lt;text x=&quot;175&quot; y=&quot;93&quot; class=&quot;messageText&quot; style=&quot;text-anchor: middle;&quot;&gt;ExecutionStarted&lt;/text&gt;&lt;line x1=&quot;75&quot; y1=&quot;100&quot; x2=&quot;275&quot; y2=&quot;100&quot; class=&quot;messageLine0&quot; stroke-width=&quot;2&quot; stroke=&quot;black&quot; marker-end=&quot;url(#arrowhead)&quot; style=&quot;fill: none;&quot;&gt;&lt;/line&gt;&lt;/g&gt;&lt;g&gt;&lt;text x=&quot;375&quot; y=&quot;128&quot; class=&quot;messageText&quot; style=&quot;text-anchor: middle;&quot;&gt;ExecutionStarted&lt;/text&gt;&lt;line x1=&quot;275&quot; y1=&quot;135&quot; x2=&quot;475&quot; y2=&quot;135&quot; class=&quot;messageLine1&quot; stroke-width=&quot;2&quot; stroke=&quot;black&quot; marker-end=&quot;url(#arrowhead)&quot; style=&quot;stroke-dasharray: 3, 3; fill: none;&quot;&gt;&lt;/line&gt;&lt;/g&gt;&lt;g&gt;&lt;text x=&quot;575&quot; y=&quot;163&quot; class=&quot;messageText&quot; style=&quot;text-anchor: middle;&quot;&gt;Orchestration Invoked&lt;/text&gt;&lt;line x1=&quot;475&quot; y1=&quot;170&quot; x2=&quot;675&quot; y2=&quot;170&quot; class=&quot;messageLine0&quot; stroke-width=&quot;2&quot; stroke=&quot;black&quot; marker-end=&quot;url(#arrowhead)&quot; style=&quot;fill: none;&quot;&gt;&lt;/line&gt;&lt;/g&gt;&lt;g&gt;&lt;text x=&quot;675&quot; y=&quot;198&quot; class=&quot;messageText&quot; style=&quot;text-anchor: middle;&quot;&gt;Task Scheduled&lt;/text&gt;&lt;line x1=&quot;475&quot; y1=&quot;205&quot; x2=&quot;875&quot; y2=&quot;205&quot; class=&quot;messageLine1&quot; stroke-width=&quot;2&quot; stroke=&quot;black&quot; marker-end=&quot;url(#arrowhead)&quot; style=&quot;stroke-dasharray: 3, 3; fill: none;&quot;&gt;&lt;/line&gt;&lt;/g&gt;&lt;g&gt;&lt;text x=&quot;775&quot; y=&quot;233&quot; class=&quot;messageText&quot; style=&quot;text-anchor: middle;&quot;&gt;OrchestratorStarted&lt;/text&gt;&lt;line x1=&quot;475&quot; y1=&quot;240&quot; x2=&quot;1075&quot; y2=&quot;240&quot; class=&quot;messageLine1&quot; stroke-width=&quot;2&quot; stroke=&quot;black&quot; marker-end=&quot;url(#arrowhead)&quot; style=&quot;stroke-dasharray: 3, 3; fill: none;&quot;&gt;&lt;/line&gt;&lt;/g&gt;&lt;g&gt;&lt;text x=&quot;775&quot; y=&quot;268&quot; class=&quot;messageText&quot; style=&quot;text-anchor: middle;&quot;&gt;ExecutionStarted&lt;/text&gt;&lt;line x1=&quot;475&quot; y1=&quot;275&quot; x2=&quot;1075&quot; y2=&quot;275&quot; class=&quot;messageLine1&quot; stroke-width=&quot;2&quot; stroke=&quot;black&quot; marker-end=&quot;url(#arrowhead)&quot; style=&quot;stroke-dasharray: 3, 3; fill: none;&quot;&gt;&lt;/line&gt;&lt;/g&gt;&lt;g&gt;&lt;text x=&quot;775&quot; y=&quot;303&quot; class=&quot;messageText&quot; style=&quot;text-anchor: middle;&quot;&gt;TaskScheduled&lt;/text&gt;&lt;line x1=&quot;475&quot; y1=&quot;310&quot; x2=&quot;1075&quot; y2=&quot;310&quot; class=&quot;messageLine1&quot; stroke-width=&quot;2&quot; stroke=&quot;black&quot; marker-end=&quot;url(#arrowhead)&quot; style=&quot;stroke-dasharray: 3, 3; fill: none;&quot;&gt;&lt;/line&gt;&lt;/g&gt;&lt;g&gt;&lt;text x=&quot;775&quot; y=&quot;338&quot; class=&quot;messageText&quot; style=&quot;text-anchor: middle;&quot;&gt;OrchestratorCompleted&lt;/text&gt;&lt;line x1=&quot;475&quot; y1=&quot;345&quot; x2=&quot;1075&quot; y2=&quot;345&quot; class=&quot;messageLine1&quot; stroke-width=&quot;2&quot; stroke=&quot;black&quot; marker-end=&quot;url(#arrowhead)&quot; style=&quot;stroke-dasharray: 3, 3; fill: none;&quot;&gt;&lt;/line&gt;&lt;/g&gt;&lt;g&gt;&lt;text x=&quot;775&quot; y=&quot;373&quot; class=&quot;messageText&quot; style=&quot;text-anchor: middle;&quot;&gt;HistoryState&lt;/text&gt;&lt;line x1=&quot;475&quot; y1=&quot;380&quot; x2=&quot;1075&quot; y2=&quot;380&quot; class=&quot;messageLine1&quot; stroke-width=&quot;2&quot; stroke=&quot;black&quot; marker-end=&quot;url(#arrowhead)&quot; style=&quot;stroke-dasharray: 3, 3; fill: none;&quot;&gt;&lt;/line&gt;&lt;/g&gt;&lt;g&gt;&lt;text x=&quot;675&quot; y=&quot;408&quot; class=&quot;messageText&quot; style=&quot;text-anchor: middle;&quot;&gt;Task Scheduled&lt;/text&gt;&lt;line x1=&quot;875&quot; y1=&quot;415&quot; x2=&quot;475&quot; y2=&quot;415&quot; class=&quot;messageLine1&quot; stroke-width=&quot;2&quot; stroke=&quot;black&quot; marker-end=&quot;url(#arrowhead)&quot; style=&quot;stroke-dasharray: 3, 3; fill: none;&quot;&gt;&lt;/line&gt;&lt;/g&gt;&lt;g&gt;&lt;text x=&quot;875&quot; y=&quot;443&quot; class=&quot;messageText&quot; style=&quot;text-anchor: middle;&quot;&gt;Task Invoked&lt;/text&gt;&lt;line x1=&quot;475&quot; y1=&quot;450&quot; x2=&quot;1275&quot; y2=&quot;450&quot; class=&quot;messageLine0&quot; stroke-width=&quot;2&quot; stroke=&quot;black&quot; marker-end=&quot;url(#arrowhead)&quot; style=&quot;fill: none;&quot;&gt;&lt;/line&gt;&lt;/g&gt;&lt;g&gt;&lt;text x=&quot;375&quot; y=&quot;478&quot; class=&quot;messageText&quot; style=&quot;text-anchor: middle;&quot;&gt;TaskCompleted&lt;/text&gt;&lt;line x1=&quot;475&quot; y1=&quot;485&quot; x2=&quot;275&quot; y2=&quot;485&quot; class=&quot;messageLine0&quot; stroke-width=&quot;2&quot; stroke=&quot;black&quot; marker-end=&quot;url(#arrowhead)&quot; style=&quot;fill: none;&quot;&gt;&lt;/line&gt;&lt;/g&gt;&lt;g&gt;&lt;text x=&quot;775&quot; y=&quot;513&quot; class=&quot;messageText&quot; style=&quot;text-anchor: middle;&quot;&gt;OrchestratorStarted&lt;/text&gt;&lt;line x1=&quot;1075&quot; y1=&quot;520&quot; x2=&quot;475&quot; y2=&quot;520&quot; class=&quot;messageLine1&quot; stroke-width=&quot;2&quot; stroke=&quot;black&quot; marker-end=&quot;url(#arrowhead)&quot; style=&quot;stroke-dasharray: 3, 3; fill: none;&quot;&gt;&lt;/line&gt;&lt;/g&gt;&lt;g&gt;&lt;text x=&quot;775&quot; y=&quot;548&quot; class=&quot;messageText&quot; style=&quot;text-anchor: middle;&quot;&gt;ExecutionStarted&lt;/text&gt;&lt;line x1=&quot;1075&quot; y1=&quot;555&quot; x2=&quot;475&quot; y2=&quot;555&quot; class=&quot;messageLine1&quot; stroke-width=&quot;2&quot; stroke=&quot;black&quot; marker-end=&quot;url(#arrowhead)&quot; style=&quot;stroke-dasharray: 3, 3; fill: none;&quot;&gt;&lt;/line&gt;&lt;/g&gt;&lt;g&gt;&lt;text x=&quot;775&quot; y=&quot;583&quot; class=&quot;messageText&quot; style=&quot;text-anchor: middle;&quot;&gt;TaskScheduled&lt;/text&gt;&lt;line x1=&quot;1075&quot; y1=&quot;590&quot; x2=&quot;475&quot; y2=&quot;590&quot; class=&quot;messageLine1&quot; stroke-width=&quot;2&quot; stroke=&quot;black&quot; marker-end=&quot;url(#arrowhead)&quot; style=&quot;stroke-dasharray: 3, 3; fill: none;&quot;&gt;&lt;/line&gt;&lt;/g&gt;&lt;g&gt;&lt;text x=&quot;775&quot; y=&quot;618&quot; class=&quot;messageText&quot; style=&quot;text-anchor: middle;&quot;&gt;OrchestratorCompleted&lt;/text&gt;&lt;line x1=&quot;1075&quot; y1=&quot;625&quot; x2=&quot;475&quot; y2=&quot;625&quot; class=&quot;messageLine1&quot; stroke-width=&quot;2&quot; stroke=&quot;black&quot; marker-end=&quot;url(#arrowhead)&quot; style=&quot;stroke-dasharray: 3, 3; fill: none;&quot;&gt;&lt;/line&gt;&lt;/g&gt;&lt;g&gt;&lt;text x=&quot;775&quot; y=&quot;653&quot; class=&quot;messageText&quot; style=&quot;text-anchor: middle;&quot;&gt;HistoryState&lt;/text&gt;&lt;line x1=&quot;1075&quot; y1=&quot;660&quot; x2=&quot;475&quot; y2=&quot;660&quot; class=&quot;messageLine1&quot; stroke-width=&quot;2&quot; stroke=&quot;black&quot; marker-end=&quot;url(#arrowhead)&quot; style=&quot;stroke-dasharray: 3, 3; fill: none;&quot;&gt;&lt;/line&gt;&lt;/g&gt;&lt;g&gt;&lt;text x=&quot;375&quot; y=&quot;688&quot; class=&quot;messageText&quot; style=&quot;text-anchor: middle;&quot;&gt;TaskCompleted&lt;/text&gt;&lt;line x1=&quot;275&quot; y1=&quot;695&quot; x2=&quot;475&quot; y2=&quot;695&quot; class=&quot;messageLine1&quot; stroke-width=&quot;2&quot; stroke=&quot;black&quot; marker-end=&quot;url(#arrowhead)&quot; style=&quot;stroke-dasharray: 3, 3; fill: none;&quot;&gt;&lt;/line&gt;&lt;/g&gt;&lt;g&gt;&lt;text x=&quot;575&quot; y=&quot;723&quot; class=&quot;messageText&quot; style=&quot;text-anchor: middle;&quot;&gt;Orchestration Invoked &amp;amp; Completed&lt;/text&gt;&lt;line x1=&quot;475&quot; y1=&quot;730&quot; x2=&quot;675&quot; y2=&quot;730&quot; class=&quot;messageLine0&quot; stroke-width=&quot;2&quot; stroke=&quot;black&quot; marker-end=&quot;url(#arrowhead)&quot; style=&quot;fill: none;&quot;&gt;&lt;/line&gt;&lt;/g&gt;&lt;g&gt;&lt;text x=&quot;775&quot; y=&quot;758&quot; class=&quot;messageText&quot; style=&quot;text-anchor: middle;&quot;&gt;OrchestratorStarted&lt;/text&gt;&lt;line x1=&quot;475&quot; y1=&quot;765&quot; x2=&quot;1075&quot; y2=&quot;765&quot; class=&quot;messageLine1&quot; stroke-width=&quot;2&quot; stroke=&quot;black&quot; marker-end=&quot;url(#arrowhead)&quot; style=&quot;stroke-dasharray: 3, 3; fill: none;&quot;&gt;&lt;/line&gt;&lt;/g&gt;&lt;g&gt;&lt;text x=&quot;775&quot; y=&quot;793&quot; class=&quot;messageText&quot; style=&quot;text-anchor: middle;&quot;&gt;TaskCompleted&lt;/text&gt;&lt;line x1=&quot;475&quot; y1=&quot;800&quot; x2=&quot;1075&quot; y2=&quot;800&quot; class=&quot;messageLine1&quot; stroke-width=&quot;2&quot; stroke=&quot;black&quot; marker-end=&quot;url(#arrowhead)&quot; style=&quot;stroke-dasharray: 3, 3; fill: none;&quot;&gt;&lt;/line&gt;&lt;/g&gt;&lt;g&gt;&lt;text x=&quot;775&quot; y=&quot;828&quot; class=&quot;messageText&quot; style=&quot;text-anchor: middle;&quot;&gt;ExecutionCompleted&lt;/text&gt;&lt;line x1=&quot;475&quot; y1=&quot;835&quot; x2=&quot;1075&quot; y2=&quot;835&quot; class=&quot;messageLine1&quot; stroke-width=&quot;2&quot; stroke=&quot;black&quot; marker-end=&quot;url(#arrowhead)&quot; style=&quot;stroke-dasharray: 3, 3; fill: none;&quot;&gt;&lt;/line&gt;&lt;/g&gt;&lt;g&gt;&lt;text x=&quot;775&quot; y=&quot;863&quot; class=&quot;messageText&quot; style=&quot;text-anchor: middle;&quot;&gt;OrchestratorCompleted&lt;/text&gt;&lt;line x1=&quot;475&quot; y1=&quot;870&quot; x2=&quot;1075&quot; y2=&quot;870&quot; class=&quot;messageLine1&quot; stroke-width=&quot;2&quot; stroke=&quot;black&quot; marker-end=&quot;url(#arrowhead)&quot; style=&quot;stroke-dasharray: 3, 3; fill: none;&quot;&gt;&lt;/line&gt;&lt;/g&gt;&lt;g&gt;&lt;text x=&quot;775&quot; y=&quot;898&quot; class=&quot;messageText&quot; style=&quot;text-anchor: middle;&quot;&gt;HistoryState&lt;/text&gt;&lt;line x1=&quot;475&quot; y1=&quot;905&quot; x2=&quot;1075&quot; y2=&quot;905&quot; class=&quot;messageLine1&quot; stroke-width=&quot;2&quot; stroke=&quot;black&quot; marker-end=&quot;url(#arrowhead)&quot; style=&quot;stroke-dasharray: 3, 3; fill: none;&quot;&gt;&lt;/line&gt;&lt;/g&gt;&lt;g&gt;&lt;text x=&quot;775&quot; y=&quot;933&quot; class=&quot;messageText&quot; style=&quot;text-anchor: middle;&quot;&gt;OrchestratorStarted&lt;/text&gt;&lt;line x1=&quot;1075&quot; y1=&quot;940&quot; x2=&quot;475&quot; y2=&quot;940&quot; class=&quot;messageLine1&quot; stroke-width=&quot;2&quot; stroke=&quot;black&quot; marker-end=&quot;url(#arrowhead)&quot; style=&quot;stroke-dasharray: 3, 3; fill: none;&quot;&gt;&lt;/line&gt;&lt;/g&gt;&lt;g&gt;&lt;text x=&quot;775&quot; y=&quot;968&quot; class=&quot;messageText&quot; style=&quot;text-anchor: middle;&quot;&gt;TaskCompleted&lt;/text&gt;&lt;line x1=&quot;1075&quot; y1=&quot;975&quot; x2=&quot;475&quot; y2=&quot;975&quot; class=&quot;messageLine1&quot; stroke-width=&quot;2&quot; stroke=&quot;black&quot; marker-end=&quot;url(#arrowhead)&quot; style=&quot;stroke-dasharray: 3, 3; fill: none;&quot;&gt;&lt;/line&gt;&lt;/g&gt;&lt;g&gt;&lt;text x=&quot;775&quot; y=&quot;1003&quot; class=&quot;messageText&quot; style=&quot;text-anchor: middle;&quot;&gt;ExecutionCompleted&lt;/text&gt;&lt;line x1=&quot;1075&quot; y1=&quot;1010&quot; x2=&quot;475&quot; y2=&quot;1010&quot; class=&quot;messageLine1&quot; stroke-width=&quot;2&quot; stroke=&quot;black&quot; marker-end=&quot;url(#arrowhead)&quot; style=&quot;stroke-dasharray: 3, 3; fill: none;&quot;&gt;&lt;/line&gt;&lt;/g&gt;&lt;g&gt;&lt;text x=&quot;775&quot; y=&quot;1038&quot; class=&quot;messageText&quot; style=&quot;text-anchor: middle;&quot;&gt;OrchestratorCompleted&lt;/text&gt;&lt;line x1=&quot;1075&quot; y1=&quot;1045&quot; x2=&quot;475&quot; y2=&quot;1045&quot; class=&quot;messageLine1&quot; stroke-width=&quot;2&quot; stroke=&quot;black&quot; marker-end=&quot;url(#arrowhead)&quot; style=&quot;stroke-dasharray: 3, 3; fill: none;&quot;&gt;&lt;/line&gt;&lt;/g&gt;&lt;g&gt;&lt;text x=&quot;775&quot; y=&quot;1073&quot; class=&quot;messageText&quot; style=&quot;text-anchor: middle;&quot;&gt;HistoryState&lt;/text&gt;&lt;line x1=&quot;1075&quot; y1=&quot;1080&quot; x2=&quot;475&quot; y2=&quot;1080&quot; class=&quot;messageLine1&quot; stroke-width=&quot;2&quot; stroke=&quot;black&quot; marker-end=&quot;url(#arrowhead)&quot; style=&quot;stroke-dasharray: 3, 3; fill: none;&quot;&gt;&lt;/line&gt;&lt;/g&gt;&lt;g&gt;&lt;rect x=&quot;0&quot; y=&quot;1100&quot; fill=&quot;#eaeaea&quot; stroke=&quot;#666&quot; width=&quot;150&quot; height=&quot;65&quot; rx=&quot;3&quot; ry=&quot;3&quot; class=&quot;actor&quot;&gt;&lt;/rect&gt;&lt;text x=&quot;75&quot; y=&quot;1132.5&quot; dominant-baseline=&quot;central&quot; alignment-baseline=&quot;central&quot; class=&quot;actor&quot; style=&quot;text-anchor: middle; font-size: 14px;&quot;&gt;&lt;tspan x=&quot;75&quot; dy=&quot;0&quot;&gt;Client&lt;/tspan&gt;&lt;/text&gt;&lt;/g&gt;&lt;g&gt;&lt;rect x=&quot;200&quot; y=&quot;1100&quot; fill=&quot;#eaeaea&quot; stroke=&quot;#666&quot; width=&quot;150&quot; height=&quot;65&quot; rx=&quot;3&quot; ry=&quot;3&quot; class=&quot;actor&quot;&gt;&lt;/rect&gt;&lt;text x=&quot;275&quot; y=&quot;1132.5&quot; dominant-baseline=&quot;central&quot; alignment-baseline=&quot;central&quot; class=&quot;actor&quot; style=&quot;text-anchor: middle; font-size: 14px;&quot;&gt;&lt;tspan x=&quot;275&quot; dy=&quot;0&quot;&gt;Orchestrator&lt;/tspan&gt;&lt;/text&gt;&lt;/g&gt;&lt;g&gt;&lt;rect x=&quot;400&quot; y=&quot;1100&quot; fill=&quot;#eaeaea&quot; stroke=&quot;#666&quot; width=&quot;150&quot; height=&quot;65&quot; rx=&quot;3&quot; ry=&quot;3&quot; class=&quot;actor&quot;&gt;&lt;/rect&gt;&lt;text x=&quot;475&quot; y=&quot;1132.5&quot; dominant-baseline=&quot;central&quot; alignment-baseline=&quot;central&quot; class=&quot;actor&quot; style=&quot;text-anchor: middle; font-size: 14px;&quot;&gt;&lt;tspan x=&quot;475&quot; dy=&quot;0&quot;&gt;Hub&lt;/tspan&gt;&lt;/text&gt;&lt;/g&gt;&lt;g&gt;&lt;rect x=&quot;600&quot; y=&quot;1100&quot; fill=&quot;#eaeaea&quot; stroke=&quot;#666&quot; width=&quot;150&quot; height=&quot;65&quot; rx=&quot;3&quot; ry=&quot;3&quot; class=&quot;actor&quot;&gt;&lt;/rect&gt;&lt;text x=&quot;675&quot; y=&quot;1132.5&quot; dominant-baseline=&quot;central&quot; alignment-baseline=&quot;central&quot; class=&quot;actor&quot; style=&quot;text-anchor: middle; font-size: 14px;&quot;&gt;&lt;tspan x=&quot;675&quot; dy=&quot;0&quot;&gt;TestOrchestration&lt;/tspan&gt;&lt;/text&gt;&lt;/g&gt;&lt;g&gt;&lt;rect x=&quot;800&quot; y=&quot;1100&quot; fill=&quot;#eaeaea&quot; stroke=&quot;#666&quot; width=&quot;150&quot; height=&quot;65&quot; rx=&quot;3&quot; ry=&quot;3&quot; class=&quot;actor&quot;&gt;&lt;/rect&gt;&lt;text x=&quot;875&quot; y=&quot;1132.5&quot; dominant-baseline=&quot;central&quot; alignment-baseline=&quot;central&quot; class=&quot;actor&quot; style=&quot;text-anchor: middle; font-size: 14px;&quot;&gt;&lt;tspan x=&quot;875&quot; dy=&quot;0&quot;&gt;Worker&lt;/tspan&gt;&lt;/text&gt;&lt;/g&gt;&lt;g&gt;&lt;rect x=&quot;1000&quot; y=&quot;1100&quot; fill=&quot;#eaeaea&quot; stroke=&quot;#666&quot; width=&quot;150&quot; height=&quot;65&quot; rx=&quot;3&quot; ry=&quot;3&quot; class=&quot;actor&quot;&gt;&lt;/rect&gt;&lt;text x=&quot;1075&quot; y=&quot;1132.5&quot; dominant-baseline=&quot;central&quot; alignment-baseline=&quot;central&quot; class=&quot;actor&quot; style=&quot;text-anchor: middle; font-size: 14px;&quot;&gt;&lt;tspan x=&quot;1075&quot; dy=&quot;0&quot;&gt;Tracker&lt;/tspan&gt;&lt;/text&gt;&lt;/g&gt;&lt;g&gt;&lt;rect x=&quot;1200&quot; y=&quot;1100&quot; fill=&quot;#eaeaea&quot; stroke=&quot;#666&quot; width=&quot;150&quot; height=&quot;65&quot; rx=&quot;3&quot; ry=&quot;3&quot; class=&quot;actor&quot;&gt;&lt;/rect&gt;&lt;text x=&quot;1275&quot; y=&quot;1132.5&quot; dominant-baseline=&quot;central&quot; alignment-baseline=&quot;central&quot; class=&quot;actor&quot; style=&quot;text-anchor: middle; font-size: 14px;&quot;&gt;&lt;tspan x=&quot;1275&quot; dy=&quot;0&quot;&gt;TaskActivity&lt;/tspan&gt;&lt;/text&gt;&lt;/g&gt;&lt;/svg&gt;&lt;/div&gt;
&lt;p&gt;When the Hub receives the event, it puts the state into Azure Storage for tracking what all the states that the orchestration passed through. You can objectively see how many times the orchestration was triggered and the time taken for each task to complete. Anyone using DTF in a non-trivial way would need Azure Tables for the telemetry it provides.&lt;/p&gt;
&lt;h3&gt;Azure Storage&lt;/h3&gt;
&lt;p&gt;Azure table store is entirely optional for DTF. If you do not pass the Azure Storage string, DTF will still work. In that case, DTF optimizes by not using the worker queue anymore, as the events put into the tracker queue are going to result in a No-Op.&lt;/p&gt;
&lt;p&gt;So when the framework boots up, there are 2 Tables created in Azure Table Store.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;InstanceHistory00&amp;#x3C;HubName&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;This stores the history of all the states that your TaskActivities and Orchestration passed through.&lt;/li&gt;
&lt;li&gt;These are the same events that get queued in the tracker.&lt;/li&gt;
&lt;li&gt;There are timestamps and sequence numbers to reconstruct the chronology of the various state transitions.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;JumpStart00&amp;#x3C;HubName&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;The Table is used for added reliability since there is a chance of Dual writes. We will go into the details of this one.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;The JumpStart Table&lt;/h3&gt;
&lt;p&gt;The table &lt;code class=&quot;language-text&quot;&gt;JumpStart00\&amp;lt;HubName\&amp;gt;&lt;/code&gt; is used for Jump starting orchestrations.&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;When the Hub boots up, even before Client is started&lt;/li&gt;
&lt;/ol&gt;
&lt;div class=&quot;mermaid&quot; data-processed=&quot;true&quot;&gt;&lt;svg id=&quot;mermaid-1587845641330&quot; width=&quot;100%&quot; xmlns=&quot;http://www.w3.org/2000/svg&quot; height=&quot;100%&quot; style=&quot;max-width:450px;&quot; viewBox=&quot;-50 -10 450 231&quot;&gt;&lt;style&gt;#mermaid-1587845641330 .label{font-family:&apos;trebuchet ms&apos;, verdana, arial;font-family:var(--mermaid-font-family);color:#333}#mermaid-1587845641330 .label text{fill:#333}#mermaid-1587845641330 .node rect,#mermaid-1587845641330 .node circle,#mermaid-1587845641330 .node ellipse,#mermaid-1587845641330 .node polygon,#mermaid-1587845641330 .node path{fill:#ECECFF;stroke:#9370db;stroke-width:1px}#mermaid-1587845641330 .node .label{text-align:center}#mermaid-1587845641330 .node.clickable{cursor:pointer}#mermaid-1587845641330 .arrowheadPath{fill:#333}#mermaid-1587845641330 .edgePath .path{stroke:#333;stroke-width:1.5px}#mermaid-1587845641330 .edgeLabel{background-color:#e8e8e8;text-align:center}#mermaid-1587845641330 .cluster rect{fill:#ffffde;stroke:#aa3;stroke-width:1px}#mermaid-1587845641330 .cluster text{fill:#333}#mermaid-1587845641330 div.mermaidTooltip{position:absolute;text-align:center;max-width:200px;padding:2px;font-family:&apos;trebuchet ms&apos;, verdana, arial;font-family:var(--mermaid-font-family);font-size:12px;background:#ffffde;border:1px solid #aa3;border-radius:2px;pointer-events:none;z-index:100}#mermaid-1587845641330 .actor{stroke:#ccf;fill:#ECECFF}#mermaid-1587845641330 text.actor{fill:#000;stroke:none}#mermaid-1587845641330 .actor-line{stroke:grey}#mermaid-1587845641330 .messageLine0{stroke-width:1.5;stroke-dasharray:&apos;2 2&apos;;stroke:#333}#mermaid-1587845641330 .messageLine1{stroke-width:1.5;stroke-dasharray:&apos;2 2&apos;;stroke:#333}#mermaid-1587845641330 #arrowhead{fill:#333}#mermaid-1587845641330 .sequenceNumber{fill:#fff}#mermaid-1587845641330 #sequencenumber{fill:#333}#mermaid-1587845641330 #crosshead path{fill:#333 !important;stroke:#333 !important}#mermaid-1587845641330 .messageText{fill:#333;stroke:none}#mermaid-1587845641330 .labelBox{stroke:#ccf;fill:#ECECFF}#mermaid-1587845641330 .labelText{fill:#000;stroke:none}#mermaid-1587845641330 .loopText{fill:#000;stroke:none}#mermaid-1587845641330 .loopLine{stroke-width:2;stroke-dasharray:&apos;2 2&apos;;stroke:#ccf}#mermaid-1587845641330 .note{stroke:#aa3;fill:#fff5ad}#mermaid-1587845641330 .noteText{fill:black;stroke:none;font-family:&apos;trebuchet ms&apos;, verdana, arial;font-family:var(--mermaid-font-family);font-size:14px}#mermaid-1587845641330 .activation0{fill:#f4f4f4;stroke:#666}#mermaid-1587845641330 .activation1{fill:#f4f4f4;stroke:#666}#mermaid-1587845641330 .activation2{fill:#f4f4f4;stroke:#666}#mermaid-1587845641330 .mermaid-main-font{font-family:&quot;trebuchet ms&quot;, verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1587845641330 .section{stroke:none;opacity:0.2}#mermaid-1587845641330 .section0{fill:rgba(102,102,255,0.49)}#mermaid-1587845641330 .section2{fill:#fff400}#mermaid-1587845641330 .section1,#mermaid-1587845641330 .section3{fill:#fff;opacity:0.2}#mermaid-1587845641330 .sectionTitle0{fill:#333}#mermaid-1587845641330 .sectionTitle1{fill:#333}#mermaid-1587845641330 .sectionTitle2{fill:#333}#mermaid-1587845641330 .sectionTitle3{fill:#333}#mermaid-1587845641330 .sectionTitle{text-anchor:start;font-size:11px;text-height:14px;font-family:&apos;trebuchet ms&apos;, verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1587845641330 .grid .tick{stroke:#d3d3d3;opacity:0.8;shape-rendering:crispEdges}#mermaid-1587845641330 .grid .tick text{font-family:&apos;trebuchet ms&apos;, verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1587845641330 .grid path{stroke-width:0}#mermaid-1587845641330 .today{fill:none;stroke:red;stroke-width:2px}#mermaid-1587845641330 .task{stroke-width:2}#mermaid-1587845641330 .taskText{text-anchor:middle;font-family:&apos;trebuchet ms&apos;, verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1587845641330 .taskText:not([font-size]){font-size:11px}#mermaid-1587845641330 .taskTextOutsideRight{fill:#000;text-anchor:start;font-size:11px;font-family:&apos;trebuchet ms&apos;, verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1587845641330 .taskTextOutsideLeft{fill:#000;text-anchor:end;font-size:11px}#mermaid-1587845641330 .task.clickable{cursor:pointer}#mermaid-1587845641330 .taskText.clickable{cursor:pointer;fill:#003163 !important;font-weight:bold}#mermaid-1587845641330 .taskTextOutsideLeft.clickable{cursor:pointer;fill:#003163 !important;font-weight:bold}#mermaid-1587845641330 .taskTextOutsideRight.clickable{cursor:pointer;fill:#003163 !important;font-weight:bold}#mermaid-1587845641330 .taskText0,#mermaid-1587845641330 .taskText1,#mermaid-1587845641330 .taskText2,#mermaid-1587845641330 .taskText3{fill:#fff}#mermaid-1587845641330 .task0,#mermaid-1587845641330 .task1,#mermaid-1587845641330 .task2,#mermaid-1587845641330 .task3{fill:#8a90dd;stroke:#534fbc}#mermaid-1587845641330 .taskTextOutside0,#mermaid-1587845641330 .taskTextOutside2{fill:#000}#mermaid-1587845641330 .taskTextOutside1,#mermaid-1587845641330 .taskTextOutside3{fill:#000}#mermaid-1587845641330 .active0,#mermaid-1587845641330 .active1,#mermaid-1587845641330 .active2,#mermaid-1587845641330 .active3{fill:#bfc7ff;stroke:#534fbc}#mermaid-1587845641330 .activeText0,#mermaid-1587845641330 .activeText1,#mermaid-1587845641330 .activeText2,#mermaid-1587845641330 .activeText3{fill:#000 !important}#mermaid-1587845641330 .done0,#mermaid-1587845641330 .done1,#mermaid-1587845641330 .done2,#mermaid-1587845641330 .done3{stroke:grey;fill:#d3d3d3;stroke-width:2}#mermaid-1587845641330 .doneText0,#mermaid-1587845641330 .doneText1,#mermaid-1587845641330 .doneText2,#mermaid-1587845641330 .doneText3{fill:#000 !important}#mermaid-1587845641330 .crit0,#mermaid-1587845641330 .crit1,#mermaid-1587845641330 .crit2,#mermaid-1587845641330 .crit3{stroke:#f88;fill:red;stroke-width:2}#mermaid-1587845641330 .activeCrit0,#mermaid-1587845641330 .activeCrit1,#mermaid-1587845641330 .activeCrit2,#mermaid-1587845641330 .activeCrit3{stroke:#f88;fill:#bfc7ff;stroke-width:2}#mermaid-1587845641330 .doneCrit0,#mermaid-1587845641330 .doneCrit1,#mermaid-1587845641330 .doneCrit2,#mermaid-1587845641330 .doneCrit3{stroke:#f88;fill:#d3d3d3;stroke-width:2;cursor:pointer;shape-rendering:crispEdges}#mermaid-1587845641330 .milestone{transform:rotate(45deg) scale(0.8, 0.8)}#mermaid-1587845641330 .milestoneText{font-style:italic}#mermaid-1587845641330 .doneCritText0,#mermaid-1587845641330 .doneCritText1,#mermaid-1587845641330 .doneCritText2,#mermaid-1587845641330 .doneCritText3{fill:#000 !important}#mermaid-1587845641330 .activeCritText0,#mermaid-1587845641330 .activeCritText1,#mermaid-1587845641330 .activeCritText2,#mermaid-1587845641330 .activeCritText3{fill:#000 !important}#mermaid-1587845641330 .titleText{text-anchor:middle;font-size:18px;fill:#000;font-family:&apos;trebuchet ms&apos;, verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1587845641330 g.classGroup text{fill:#9370db;stroke:none;font-family:&apos;trebuchet ms&apos;, verdana, arial;font-family:var(--mermaid-font-family);font-size:10px}#mermaid-1587845641330 g.classGroup text .title{font-weight:bolder}#mermaid-1587845641330 g.clickable{cursor:pointer}#mermaid-1587845641330 g.classGroup rect{fill:#ECECFF;stroke:#9370db}#mermaid-1587845641330 g.classGroup line{stroke:#9370db;stroke-width:1}#mermaid-1587845641330 .classLabel .box{stroke:none;stroke-width:0;fill:#ECECFF;opacity:0.5}#mermaid-1587845641330 .classLabel .label{fill:#9370db;font-size:10px}#mermaid-1587845641330 .relation{stroke:#9370db;stroke-width:1;fill:none}#mermaid-1587845641330 .dashed-line{stroke-dasharray:3}#mermaid-1587845641330 #compositionStart{fill:#9370db;stroke:#9370db;stroke-width:1}#mermaid-1587845641330 #compositionEnd{fill:#9370db;stroke:#9370db;stroke-width:1}#mermaid-1587845641330 #aggregationStart{fill:#ECECFF;stroke:#9370db;stroke-width:1}#mermaid-1587845641330 #aggregationEnd{fill:#ECECFF;stroke:#9370db;stroke-width:1}#mermaid-1587845641330 #dependencyStart{fill:#9370db;stroke:#9370db;stroke-width:1}#mermaid-1587845641330 #dependencyEnd{fill:#9370db;stroke:#9370db;stroke-width:1}#mermaid-1587845641330 #extensionStart{fill:#9370db;stroke:#9370db;stroke-width:1}#mermaid-1587845641330 #extensionEnd{fill:#9370db;stroke:#9370db;stroke-width:1}#mermaid-1587845641330 .commit-id,#mermaid-1587845641330 .commit-msg,#mermaid-1587845641330 .branch-label{fill:lightgrey;color:lightgrey;font-family:&apos;trebuchet ms&apos;, verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1587845641330 .pieTitleText{text-anchor:middle;font-size:25px;fill:#000;font-family:&apos;trebuchet ms&apos;, verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1587845641330 .slice{font-family:&apos;trebuchet ms&apos;, verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1587845641330 g.stateGroup text{fill:#9370db;stroke:none;font-size:10px;font-family:&apos;trebuchet ms&apos;, verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1587845641330 g.stateGroup text{fill:#9370db;stroke:none;font-size:10px}#mermaid-1587845641330 g.stateGroup .state-title{font-weight:bolder;fill:#000}#mermaid-1587845641330 g.stateGroup rect{fill:#ECECFF;stroke:#9370db}#mermaid-1587845641330 g.stateGroup line{stroke:#9370db;stroke-width:1}#mermaid-1587845641330 .transition{stroke:#9370db;stroke-width:1;fill:none}#mermaid-1587845641330 .stateGroup .composit{fill:white;border-bottom:1px}#mermaid-1587845641330 .stateGroup .alt-composit{fill:#e0e0e0;border-bottom:1px}#mermaid-1587845641330 .state-note{stroke:#aa3;fill:#fff5ad}#mermaid-1587845641330 .state-note text{fill:black;stroke:none;font-size:10px}#mermaid-1587845641330 .stateLabel .box{stroke:none;stroke-width:0;fill:#ECECFF;opacity:0.5}#mermaid-1587845641330 .stateLabel text{fill:#000;font-size:10px;font-weight:bold;font-family:&apos;trebuchet ms&apos;, verdana, arial;font-family:var(--mermaid-font-family)}:root{--mermaid-font-family: &apos;&quot;trebuchet ms&quot;, verdana, arial&apos;;--mermaid-font-family: &quot;Comic Sans MS&quot;, &quot;Comic Sans&quot;, cursive}

:root { --mermaid-font-family: &quot;trebuchet ms&quot;, verdana, arial;}&lt;/style&gt;&lt;style&gt;#mermaid-1587845641330 {
    color: rgb(0, 0, 0);
    font: normal normal 400 normal 16px / normal &quot;trebuchet ms&quot;, verdana, arial;
  }&lt;/style&gt;&lt;g&gt;&lt;/g&gt;&lt;g&gt;&lt;line id=&quot;actor0&quot; x1=&quot;75&quot; y1=&quot;5&quot; x2=&quot;75&quot; y2=&quot;220&quot; class=&quot;actor-line&quot; stroke-width=&quot;0.5px&quot; stroke=&quot;#999&quot;&gt;&lt;/line&gt;&lt;rect x=&quot;0&quot; y=&quot;0&quot; fill=&quot;#eaeaea&quot; stroke=&quot;#666&quot; width=&quot;150&quot; height=&quot;65&quot; rx=&quot;3&quot; ry=&quot;3&quot; class=&quot;actor&quot;&gt;&lt;/rect&gt;&lt;text x=&quot;75&quot; y=&quot;32.5&quot; dominant-baseline=&quot;central&quot; alignment-baseline=&quot;central&quot; class=&quot;actor&quot; style=&quot;text-anchor: middle; font-size: 14px;&quot;&gt;&lt;tspan x=&quot;75&quot; dy=&quot;0&quot;&gt;Hub&lt;/tspan&gt;&lt;/text&gt;&lt;/g&gt;&lt;g&gt;&lt;line id=&quot;actor1&quot; x1=&quot;275&quot; y1=&quot;5&quot; x2=&quot;275&quot; y2=&quot;220&quot; class=&quot;actor-line&quot; stroke-width=&quot;0.5px&quot; stroke=&quot;#999&quot;&gt;&lt;/line&gt;&lt;rect x=&quot;200&quot; y=&quot;0&quot; fill=&quot;#eaeaea&quot; stroke=&quot;#666&quot; width=&quot;150&quot; height=&quot;65&quot; rx=&quot;3&quot; ry=&quot;3&quot; class=&quot;actor&quot;&gt;&lt;/rect&gt;&lt;text x=&quot;275&quot; y=&quot;32.5&quot; dominant-baseline=&quot;central&quot; alignment-baseline=&quot;central&quot; class=&quot;actor&quot; style=&quot;text-anchor: middle; font-size: 14px;&quot;&gt;&lt;tspan x=&quot;275&quot; dy=&quot;0&quot;&gt;JumpStart Table&lt;/tspan&gt;&lt;/text&gt;&lt;/g&gt;&lt;defs&gt;&lt;marker id=&quot;arrowhead&quot; refX=&quot;5&quot; refY=&quot;2&quot; markerWidth=&quot;6&quot; markerHeight=&quot;4&quot; orient=&quot;auto&quot;&gt;&lt;path d=&quot;M 0,0 V 4 L6,2 Z&quot;&gt;&lt;/path&gt;&lt;/marker&gt;&lt;/defs&gt;&lt;defs&gt;&lt;marker id=&quot;crosshead&quot; markerWidth=&quot;15&quot; markerHeight=&quot;8&quot; orient=&quot;auto&quot; refX=&quot;16&quot; refY=&quot;4&quot;&gt;&lt;path fill=&quot;black&quot; stroke=&quot;#000000&quot; stroke-width=&quot;1px&quot; d=&quot;M 9,2 V 6 L16,4 Z&quot; style=&quot;stroke-dasharray: 0, 0;&quot;&gt;&lt;/path&gt;&lt;path fill=&quot;none&quot; stroke=&quot;#000000&quot; stroke-width=&quot;1px&quot; d=&quot;M 0,1 L 6,7 M 6,1 L 0,7&quot; style=&quot;stroke-dasharray: 0, 0;&quot;&gt;&lt;/path&gt;&lt;/marker&gt;&lt;/defs&gt;&lt;defs&gt;&lt;marker id=&quot;sequencenumber&quot; refX=&quot;15&quot; refY=&quot;15&quot; markerWidth=&quot;60&quot; markerHeight=&quot;40&quot; orient=&quot;auto&quot;&gt;&lt;circle cx=&quot;15&quot; cy=&quot;15&quot; r=&quot;6&quot;&gt;&lt;/circle&gt;&lt;/marker&gt;&lt;/defs&gt;&lt;g&gt;&lt;text x=&quot;175&quot; y=&quot;118&quot; class=&quot;messageText&quot; style=&quot;text-anchor: middle;&quot;&gt;poll for entry in Table.&lt;/text&gt;&lt;line x1=&quot;75&quot; y1=&quot;125&quot; x2=&quot;275&quot; y2=&quot;125&quot; class=&quot;messageLine1&quot; stroke-width=&quot;2&quot; stroke=&quot;black&quot; style=&quot;stroke-dasharray: 3, 3; fill: none;&quot;&gt;&lt;/line&gt;&lt;/g&gt;&lt;g&gt;&lt;line x1=&quot;65&quot; y1=&quot;75&quot; x2=&quot;285&quot; y2=&quot;75&quot; class=&quot;loopLine&quot;&gt;&lt;/line&gt;&lt;line x1=&quot;285&quot; y1=&quot;75&quot; x2=&quot;285&quot; y2=&quot;135&quot; class=&quot;loopLine&quot;&gt;&lt;/line&gt;&lt;line x1=&quot;65&quot; y1=&quot;135&quot; x2=&quot;285&quot; y2=&quot;135&quot; class=&quot;loopLine&quot;&gt;&lt;/line&gt;&lt;line x1=&quot;65&quot; y1=&quot;75&quot; x2=&quot;65&quot; y2=&quot;135&quot; class=&quot;loopLine&quot;&gt;&lt;/line&gt;&lt;polygon points=&quot;65,75 115,75 115,88 106.6,95 65,95&quot; class=&quot;labelBox&quot;&gt;&lt;/polygon&gt;&lt;text x=&quot;72.5&quot; y=&quot;90&quot; class=&quot;labelText&quot;&gt;&lt;tspan x=&quot;72.5&quot;&gt;loop&lt;/tspan&gt;&lt;/text&gt;&lt;text x=&quot;175&quot; y=&quot;90&quot; class=&quot;loopText&quot; style=&quot;text-anchor: middle;&quot;&gt;&lt;tspan x=&quot;175&quot;&gt;[ Every 5 Seconds ]&lt;/tspan&gt;&lt;/text&gt;&lt;/g&gt;&lt;g&gt;&lt;rect x=&quot;0&quot; y=&quot;155&quot; fill=&quot;#eaeaea&quot; stroke=&quot;#666&quot; width=&quot;150&quot; height=&quot;65&quot; rx=&quot;3&quot; ry=&quot;3&quot; class=&quot;actor&quot;&gt;&lt;/rect&gt;&lt;text x=&quot;75&quot; y=&quot;187.5&quot; dominant-baseline=&quot;central&quot; alignment-baseline=&quot;central&quot; class=&quot;actor&quot; style=&quot;text-anchor: middle; font-size: 14px;&quot;&gt;&lt;tspan x=&quot;75&quot; dy=&quot;0&quot;&gt;Hub&lt;/tspan&gt;&lt;/text&gt;&lt;/g&gt;&lt;g&gt;&lt;rect x=&quot;200&quot; y=&quot;155&quot; fill=&quot;#eaeaea&quot; stroke=&quot;#666&quot; width=&quot;150&quot; height=&quot;65&quot; rx=&quot;3&quot; ry=&quot;3&quot; class=&quot;actor&quot;&gt;&lt;/rect&gt;&lt;text x=&quot;275&quot; y=&quot;187.5&quot; dominant-baseline=&quot;central&quot; alignment-baseline=&quot;central&quot; class=&quot;actor&quot; style=&quot;text-anchor: middle; font-size: 14px;&quot;&gt;&lt;tspan x=&quot;275&quot; dy=&quot;0&quot;&gt;JumpStart Table&lt;/tspan&gt;&lt;/text&gt;&lt;/g&gt;&lt;/svg&gt;&lt;/div&gt;
&lt;ol start=&quot;2&quot;&gt;
&lt;li&gt;When the &lt;strong&gt;Client&lt;/strong&gt; encounters &lt;code class=&quot;language-text&quot;&gt;CreateOrchestrationInstanceAsync&lt;/code&gt; and Azure Storage connection strings provided, here is the flow that takes place&lt;/li&gt;
&lt;/ol&gt;
&lt;div class=&quot;mermaid&quot; data-processed=&quot;true&quot;&gt;&lt;svg id=&quot;mermaid-1587845641325&quot; width=&quot;100%&quot; xmlns=&quot;http://www.w3.org/2000/svg&quot; height=&quot;100%&quot; style=&quot;max-width:650px;&quot; viewBox=&quot;-50 -10 650 231&quot;&gt;&lt;style&gt;#mermaid-1587845641325 .label{font-family:&apos;trebuchet ms&apos;, verdana, arial;font-family:var(--mermaid-font-family);color:#333}#mermaid-1587845641325 .label text{fill:#333}#mermaid-1587845641325 .node rect,#mermaid-1587845641325 .node circle,#mermaid-1587845641325 .node ellipse,#mermaid-1587845641325 .node polygon,#mermaid-1587845641325 .node path{fill:#ECECFF;stroke:#9370db;stroke-width:1px}#mermaid-1587845641325 .node .label{text-align:center}#mermaid-1587845641325 .node.clickable{cursor:pointer}#mermaid-1587845641325 .arrowheadPath{fill:#333}#mermaid-1587845641325 .edgePath .path{stroke:#333;stroke-width:1.5px}#mermaid-1587845641325 .edgeLabel{background-color:#e8e8e8;text-align:center}#mermaid-1587845641325 .cluster rect{fill:#ffffde;stroke:#aa3;stroke-width:1px}#mermaid-1587845641325 .cluster text{fill:#333}#mermaid-1587845641325 div.mermaidTooltip{position:absolute;text-align:center;max-width:200px;padding:2px;font-family:&apos;trebuchet ms&apos;, verdana, arial;font-family:var(--mermaid-font-family);font-size:12px;background:#ffffde;border:1px solid #aa3;border-radius:2px;pointer-events:none;z-index:100}#mermaid-1587845641325 .actor{stroke:#ccf;fill:#ECECFF}#mermaid-1587845641325 text.actor{fill:#000;stroke:none}#mermaid-1587845641325 .actor-line{stroke:grey}#mermaid-1587845641325 .messageLine0{stroke-width:1.5;stroke-dasharray:&apos;2 2&apos;;stroke:#333}#mermaid-1587845641325 .messageLine1{stroke-width:1.5;stroke-dasharray:&apos;2 2&apos;;stroke:#333}#mermaid-1587845641325 #arrowhead{fill:#333}#mermaid-1587845641325 .sequenceNumber{fill:#fff}#mermaid-1587845641325 #sequencenumber{fill:#333}#mermaid-1587845641325 #crosshead path{fill:#333 !important;stroke:#333 !important}#mermaid-1587845641325 .messageText{fill:#333;stroke:none}#mermaid-1587845641325 .labelBox{stroke:#ccf;fill:#ECECFF}#mermaid-1587845641325 .labelText{fill:#000;stroke:none}#mermaid-1587845641325 .loopText{fill:#000;stroke:none}#mermaid-1587845641325 .loopLine{stroke-width:2;stroke-dasharray:&apos;2 2&apos;;stroke:#ccf}#mermaid-1587845641325 .note{stroke:#aa3;fill:#fff5ad}#mermaid-1587845641325 .noteText{fill:black;stroke:none;font-family:&apos;trebuchet ms&apos;, verdana, arial;font-family:var(--mermaid-font-family);font-size:14px}#mermaid-1587845641325 .activation0{fill:#f4f4f4;stroke:#666}#mermaid-1587845641325 .activation1{fill:#f4f4f4;stroke:#666}#mermaid-1587845641325 .activation2{fill:#f4f4f4;stroke:#666}#mermaid-1587845641325 .mermaid-main-font{font-family:&quot;trebuchet ms&quot;, verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1587845641325 .section{stroke:none;opacity:0.2}#mermaid-1587845641325 .section0{fill:rgba(102,102,255,0.49)}#mermaid-1587845641325 .section2{fill:#fff400}#mermaid-1587845641325 .section1,#mermaid-1587845641325 .section3{fill:#fff;opacity:0.2}#mermaid-1587845641325 .sectionTitle0{fill:#333}#mermaid-1587845641325 .sectionTitle1{fill:#333}#mermaid-1587845641325 .sectionTitle2{fill:#333}#mermaid-1587845641325 .sectionTitle3{fill:#333}#mermaid-1587845641325 .sectionTitle{text-anchor:start;font-size:11px;text-height:14px;font-family:&apos;trebuchet ms&apos;, verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1587845641325 .grid .tick{stroke:#d3d3d3;opacity:0.8;shape-rendering:crispEdges}#mermaid-1587845641325 .grid .tick text{font-family:&apos;trebuchet ms&apos;, verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1587845641325 .grid path{stroke-width:0}#mermaid-1587845641325 .today{fill:none;stroke:red;stroke-width:2px}#mermaid-1587845641325 .task{stroke-width:2}#mermaid-1587845641325 .taskText{text-anchor:middle;font-family:&apos;trebuchet ms&apos;, verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1587845641325 .taskText:not([font-size]){font-size:11px}#mermaid-1587845641325 .taskTextOutsideRight{fill:#000;text-anchor:start;font-size:11px;font-family:&apos;trebuchet ms&apos;, verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1587845641325 .taskTextOutsideLeft{fill:#000;text-anchor:end;font-size:11px}#mermaid-1587845641325 .task.clickable{cursor:pointer}#mermaid-1587845641325 .taskText.clickable{cursor:pointer;fill:#003163 !important;font-weight:bold}#mermaid-1587845641325 .taskTextOutsideLeft.clickable{cursor:pointer;fill:#003163 !important;font-weight:bold}#mermaid-1587845641325 .taskTextOutsideRight.clickable{cursor:pointer;fill:#003163 !important;font-weight:bold}#mermaid-1587845641325 .taskText0,#mermaid-1587845641325 .taskText1,#mermaid-1587845641325 .taskText2,#mermaid-1587845641325 .taskText3{fill:#fff}#mermaid-1587845641325 .task0,#mermaid-1587845641325 .task1,#mermaid-1587845641325 .task2,#mermaid-1587845641325 .task3{fill:#8a90dd;stroke:#534fbc}#mermaid-1587845641325 .taskTextOutside0,#mermaid-1587845641325 .taskTextOutside2{fill:#000}#mermaid-1587845641325 .taskTextOutside1,#mermaid-1587845641325 .taskTextOutside3{fill:#000}#mermaid-1587845641325 .active0,#mermaid-1587845641325 .active1,#mermaid-1587845641325 .active2,#mermaid-1587845641325 .active3{fill:#bfc7ff;stroke:#534fbc}#mermaid-1587845641325 .activeText0,#mermaid-1587845641325 .activeText1,#mermaid-1587845641325 .activeText2,#mermaid-1587845641325 .activeText3{fill:#000 !important}#mermaid-1587845641325 .done0,#mermaid-1587845641325 .done1,#mermaid-1587845641325 .done2,#mermaid-1587845641325 .done3{stroke:grey;fill:#d3d3d3;stroke-width:2}#mermaid-1587845641325 .doneText0,#mermaid-1587845641325 .doneText1,#mermaid-1587845641325 .doneText2,#mermaid-1587845641325 .doneText3{fill:#000 !important}#mermaid-1587845641325 .crit0,#mermaid-1587845641325 .crit1,#mermaid-1587845641325 .crit2,#mermaid-1587845641325 .crit3{stroke:#f88;fill:red;stroke-width:2}#mermaid-1587845641325 .activeCrit0,#mermaid-1587845641325 .activeCrit1,#mermaid-1587845641325 .activeCrit2,#mermaid-1587845641325 .activeCrit3{stroke:#f88;fill:#bfc7ff;stroke-width:2}#mermaid-1587845641325 .doneCrit0,#mermaid-1587845641325 .doneCrit1,#mermaid-1587845641325 .doneCrit2,#mermaid-1587845641325 .doneCrit3{stroke:#f88;fill:#d3d3d3;stroke-width:2;cursor:pointer;shape-rendering:crispEdges}#mermaid-1587845641325 .milestone{transform:rotate(45deg) scale(0.8, 0.8)}#mermaid-1587845641325 .milestoneText{font-style:italic}#mermaid-1587845641325 .doneCritText0,#mermaid-1587845641325 .doneCritText1,#mermaid-1587845641325 .doneCritText2,#mermaid-1587845641325 .doneCritText3{fill:#000 !important}#mermaid-1587845641325 .activeCritText0,#mermaid-1587845641325 .activeCritText1,#mermaid-1587845641325 .activeCritText2,#mermaid-1587845641325 .activeCritText3{fill:#000 !important}#mermaid-1587845641325 .titleText{text-anchor:middle;font-size:18px;fill:#000;font-family:&apos;trebuchet ms&apos;, verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1587845641325 g.classGroup text{fill:#9370db;stroke:none;font-family:&apos;trebuchet ms&apos;, verdana, arial;font-family:var(--mermaid-font-family);font-size:10px}#mermaid-1587845641325 g.classGroup text .title{font-weight:bolder}#mermaid-1587845641325 g.clickable{cursor:pointer}#mermaid-1587845641325 g.classGroup rect{fill:#ECECFF;stroke:#9370db}#mermaid-1587845641325 g.classGroup line{stroke:#9370db;stroke-width:1}#mermaid-1587845641325 .classLabel .box{stroke:none;stroke-width:0;fill:#ECECFF;opacity:0.5}#mermaid-1587845641325 .classLabel .label{fill:#9370db;font-size:10px}#mermaid-1587845641325 .relation{stroke:#9370db;stroke-width:1;fill:none}#mermaid-1587845641325 .dashed-line{stroke-dasharray:3}#mermaid-1587845641325 #compositionStart{fill:#9370db;stroke:#9370db;stroke-width:1}#mermaid-1587845641325 #compositionEnd{fill:#9370db;stroke:#9370db;stroke-width:1}#mermaid-1587845641325 #aggregationStart{fill:#ECECFF;stroke:#9370db;stroke-width:1}#mermaid-1587845641325 #aggregationEnd{fill:#ECECFF;stroke:#9370db;stroke-width:1}#mermaid-1587845641325 #dependencyStart{fill:#9370db;stroke:#9370db;stroke-width:1}#mermaid-1587845641325 #dependencyEnd{fill:#9370db;stroke:#9370db;stroke-width:1}#mermaid-1587845641325 #extensionStart{fill:#9370db;stroke:#9370db;stroke-width:1}#mermaid-1587845641325 #extensionEnd{fill:#9370db;stroke:#9370db;stroke-width:1}#mermaid-1587845641325 .commit-id,#mermaid-1587845641325 .commit-msg,#mermaid-1587845641325 .branch-label{fill:lightgrey;color:lightgrey;font-family:&apos;trebuchet ms&apos;, verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1587845641325 .pieTitleText{text-anchor:middle;font-size:25px;fill:#000;font-family:&apos;trebuchet ms&apos;, verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1587845641325 .slice{font-family:&apos;trebuchet ms&apos;, verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1587845641325 g.stateGroup text{fill:#9370db;stroke:none;font-size:10px;font-family:&apos;trebuchet ms&apos;, verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1587845641325 g.stateGroup text{fill:#9370db;stroke:none;font-size:10px}#mermaid-1587845641325 g.stateGroup .state-title{font-weight:bolder;fill:#000}#mermaid-1587845641325 g.stateGroup rect{fill:#ECECFF;stroke:#9370db}#mermaid-1587845641325 g.stateGroup line{stroke:#9370db;stroke-width:1}#mermaid-1587845641325 .transition{stroke:#9370db;stroke-width:1;fill:none}#mermaid-1587845641325 .stateGroup .composit{fill:white;border-bottom:1px}#mermaid-1587845641325 .stateGroup .alt-composit{fill:#e0e0e0;border-bottom:1px}#mermaid-1587845641325 .state-note{stroke:#aa3;fill:#fff5ad}#mermaid-1587845641325 .state-note text{fill:black;stroke:none;font-size:10px}#mermaid-1587845641325 .stateLabel .box{stroke:none;stroke-width:0;fill:#ECECFF;opacity:0.5}#mermaid-1587845641325 .stateLabel text{fill:#000;font-size:10px;font-weight:bold;font-family:&apos;trebuchet ms&apos;, verdana, arial;font-family:var(--mermaid-font-family)}:root{--mermaid-font-family: &apos;&quot;trebuchet ms&quot;, verdana, arial&apos;;--mermaid-font-family: &quot;Comic Sans MS&quot;, &quot;Comic Sans&quot;, cursive}

:root { --mermaid-font-family: &quot;trebuchet ms&quot;, verdana, arial;}&lt;/style&gt;&lt;style&gt;#mermaid-1587845641325 {
    color: rgb(0, 0, 0);
    font: normal normal 400 normal 16px / normal &quot;trebuchet ms&quot;, verdana, arial;
  }&lt;/style&gt;&lt;g&gt;&lt;/g&gt;&lt;g&gt;&lt;line id=&quot;actor0&quot; x1=&quot;75&quot; y1=&quot;5&quot; x2=&quot;75&quot; y2=&quot;220&quot; class=&quot;actor-line&quot; stroke-width=&quot;0.5px&quot; stroke=&quot;#999&quot;&gt;&lt;/line&gt;&lt;rect x=&quot;0&quot; y=&quot;0&quot; fill=&quot;#eaeaea&quot; stroke=&quot;#666&quot; width=&quot;150&quot; height=&quot;65&quot; rx=&quot;3&quot; ry=&quot;3&quot; class=&quot;actor&quot;&gt;&lt;/rect&gt;&lt;text x=&quot;75&quot; y=&quot;32.5&quot; dominant-baseline=&quot;central&quot; alignment-baseline=&quot;central&quot; class=&quot;actor&quot; style=&quot;text-anchor: middle; font-size: 14px;&quot;&gt;&lt;tspan x=&quot;75&quot; dy=&quot;0&quot;&gt;Client&lt;/tspan&gt;&lt;/text&gt;&lt;/g&gt;&lt;g&gt;&lt;line id=&quot;actor1&quot; x1=&quot;275&quot; y1=&quot;5&quot; x2=&quot;275&quot; y2=&quot;220&quot; class=&quot;actor-line&quot; stroke-width=&quot;0.5px&quot; stroke=&quot;#999&quot;&gt;&lt;/line&gt;&lt;rect x=&quot;200&quot; y=&quot;0&quot; fill=&quot;#eaeaea&quot; stroke=&quot;#666&quot; width=&quot;150&quot; height=&quot;65&quot; rx=&quot;3&quot; ry=&quot;3&quot; class=&quot;actor&quot;&gt;&lt;/rect&gt;&lt;text x=&quot;275&quot; y=&quot;32.5&quot; dominant-baseline=&quot;central&quot; alignment-baseline=&quot;central&quot; class=&quot;actor&quot; style=&quot;text-anchor: middle; font-size: 14px;&quot;&gt;&lt;tspan x=&quot;275&quot; dy=&quot;0&quot;&gt;JumpStart Table&lt;/tspan&gt;&lt;/text&gt;&lt;/g&gt;&lt;g&gt;&lt;line id=&quot;actor2&quot; x1=&quot;475&quot; y1=&quot;5&quot; x2=&quot;475&quot; y2=&quot;220&quot; class=&quot;actor-line&quot; stroke-width=&quot;0.5px&quot; stroke=&quot;#999&quot;&gt;&lt;/line&gt;&lt;rect x=&quot;400&quot; y=&quot;0&quot; fill=&quot;#eaeaea&quot; stroke=&quot;#666&quot; width=&quot;150&quot; height=&quot;65&quot; rx=&quot;3&quot; ry=&quot;3&quot; class=&quot;actor&quot;&gt;&lt;/rect&gt;&lt;text x=&quot;475&quot; y=&quot;32.5&quot; dominant-baseline=&quot;central&quot; alignment-baseline=&quot;central&quot; class=&quot;actor&quot; style=&quot;text-anchor: middle; font-size: 14px;&quot;&gt;&lt;tspan x=&quot;475&quot; dy=&quot;0&quot;&gt;Orchestrator&lt;/tspan&gt;&lt;/text&gt;&lt;/g&gt;&lt;defs&gt;&lt;marker id=&quot;arrowhead&quot; refX=&quot;5&quot; refY=&quot;2&quot; markerWidth=&quot;6&quot; markerHeight=&quot;4&quot; orient=&quot;auto&quot;&gt;&lt;path d=&quot;M 0,0 V 4 L6,2 Z&quot;&gt;&lt;/path&gt;&lt;/marker&gt;&lt;/defs&gt;&lt;defs&gt;&lt;marker id=&quot;crosshead&quot; markerWidth=&quot;15&quot; markerHeight=&quot;8&quot; orient=&quot;auto&quot; refX=&quot;16&quot; refY=&quot;4&quot;&gt;&lt;path fill=&quot;black&quot; stroke=&quot;#000000&quot; stroke-width=&quot;1px&quot; d=&quot;M 9,2 V 6 L16,4 Z&quot; style=&quot;stroke-dasharray: 0, 0;&quot;&gt;&lt;/path&gt;&lt;path fill=&quot;none&quot; stroke=&quot;#000000&quot; stroke-width=&quot;1px&quot; d=&quot;M 0,1 L 6,7 M 6,1 L 0,7&quot; style=&quot;stroke-dasharray: 0, 0;&quot;&gt;&lt;/path&gt;&lt;/marker&gt;&lt;/defs&gt;&lt;defs&gt;&lt;marker id=&quot;sequencenumber&quot; refX=&quot;15&quot; refY=&quot;15&quot; markerWidth=&quot;60&quot; markerHeight=&quot;40&quot; orient=&quot;auto&quot;&gt;&lt;circle cx=&quot;15&quot; cy=&quot;15&quot; r=&quot;6&quot;&gt;&lt;/circle&gt;&lt;/marker&gt;&lt;/defs&gt;&lt;g&gt;&lt;text x=&quot;175&quot; y=&quot;93&quot; class=&quot;messageText&quot; style=&quot;text-anchor: middle;&quot;&gt;Orchestration Details&lt;/text&gt;&lt;line x1=&quot;75&quot; y1=&quot;100&quot; x2=&quot;275&quot; y2=&quot;100&quot; class=&quot;messageLine0&quot; stroke-width=&quot;2&quot; stroke=&quot;black&quot; marker-end=&quot;url(#arrowhead)&quot; style=&quot;fill: none;&quot;&gt;&lt;/line&gt;&lt;/g&gt;&lt;g&gt;&lt;text x=&quot;275&quot; y=&quot;128&quot; class=&quot;messageText&quot; style=&quot;text-anchor: middle;&quot;&gt;ExecutionStarted&lt;/text&gt;&lt;line x1=&quot;75&quot; y1=&quot;135&quot; x2=&quot;475&quot; y2=&quot;135&quot; class=&quot;messageLine1&quot; stroke-width=&quot;2&quot; stroke=&quot;black&quot; marker-end=&quot;url(#arrowhead)&quot; style=&quot;stroke-dasharray: 3, 3; fill: none;&quot;&gt;&lt;/line&gt;&lt;/g&gt;&lt;g&gt;&lt;rect x=&quot;0&quot; y=&quot;155&quot; fill=&quot;#eaeaea&quot; stroke=&quot;#666&quot; width=&quot;150&quot; height=&quot;65&quot; rx=&quot;3&quot; ry=&quot;3&quot; class=&quot;actor&quot;&gt;&lt;/rect&gt;&lt;text x=&quot;75&quot; y=&quot;187.5&quot; dominant-baseline=&quot;central&quot; alignment-baseline=&quot;central&quot; class=&quot;actor&quot; style=&quot;text-anchor: middle; font-size: 14px;&quot;&gt;&lt;tspan x=&quot;75&quot; dy=&quot;0&quot;&gt;Client&lt;/tspan&gt;&lt;/text&gt;&lt;/g&gt;&lt;g&gt;&lt;rect x=&quot;200&quot; y=&quot;155&quot; fill=&quot;#eaeaea&quot; stroke=&quot;#666&quot; width=&quot;150&quot; height=&quot;65&quot; rx=&quot;3&quot; ry=&quot;3&quot; class=&quot;actor&quot;&gt;&lt;/rect&gt;&lt;text x=&quot;275&quot; y=&quot;187.5&quot; dominant-baseline=&quot;central&quot; alignment-baseline=&quot;central&quot; class=&quot;actor&quot; style=&quot;text-anchor: middle; font-size: 14px;&quot;&gt;&lt;tspan x=&quot;275&quot; dy=&quot;0&quot;&gt;JumpStart Table&lt;/tspan&gt;&lt;/text&gt;&lt;/g&gt;&lt;g&gt;&lt;rect x=&quot;400&quot; y=&quot;155&quot; fill=&quot;#eaeaea&quot; stroke=&quot;#666&quot; width=&quot;150&quot; height=&quot;65&quot; rx=&quot;3&quot; ry=&quot;3&quot; class=&quot;actor&quot;&gt;&lt;/rect&gt;&lt;text x=&quot;475&quot; y=&quot;187.5&quot; dominant-baseline=&quot;central&quot; alignment-baseline=&quot;central&quot; class=&quot;actor&quot; style=&quot;text-anchor: middle; font-size: 14px;&quot;&gt;&lt;tspan x=&quot;475&quot; dy=&quot;0&quot;&gt;Orchestrator&lt;/tspan&gt;&lt;/text&gt;&lt;/g&gt;&lt;/svg&gt;&lt;/div&gt;
&lt;ol start=&quot;3&quot;&gt;
&lt;li&gt;
&lt;p&gt;Now either of things can happen &lt;strong&gt;Hub&lt;/strong&gt; encounters &lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;em&gt;Hub first gets the event from service bus, before it gets through polling&lt;/em&gt; -  When it gets an entity from Jumpstart during polling, it checks whether the Orchestration corresponding to that specific row in Jumpstart table has already been kicked off. The status of orchestration can be figured out by looking at the instanceHistory table. If it can find an entry in the instanceHistory table, then there is no use of Jumpstart, and hence the entity is deleted.&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&quot;mermaid&quot; data-processed=&quot;true&quot;&gt;&lt;svg id=&quot;mermaid-1587845641339&quot; width=&quot;100%&quot; xmlns=&quot;http://www.w3.org/2000/svg&quot; height=&quot;100%&quot; style=&quot;max-width:850px;&quot; viewBox=&quot;-50 -10 850 398&quot;&gt;&lt;style&gt;#mermaid-1587845641339 .label{font-family:&apos;trebuchet ms&apos;, verdana, arial;font-family:var(--mermaid-font-family);color:#333}#mermaid-1587845641339 .label text{fill:#333}#mermaid-1587845641339 .node rect,#mermaid-1587845641339 .node circle,#mermaid-1587845641339 .node ellipse,#mermaid-1587845641339 .node polygon,#mermaid-1587845641339 .node path{fill:#ECECFF;stroke:#9370db;stroke-width:1px}#mermaid-1587845641339 .node .label{text-align:center}#mermaid-1587845641339 .node.clickable{cursor:pointer}#mermaid-1587845641339 .arrowheadPath{fill:#333}#mermaid-1587845641339 .edgePath .path{stroke:#333;stroke-width:1.5px}#mermaid-1587845641339 .edgeLabel{background-color:#e8e8e8;text-align:center}#mermaid-1587845641339 .cluster rect{fill:#ffffde;stroke:#aa3;stroke-width:1px}#mermaid-1587845641339 .cluster text{fill:#333}#mermaid-1587845641339 div.mermaidTooltip{position:absolute;text-align:center;max-width:200px;padding:2px;font-family:&apos;trebuchet ms&apos;, verdana, arial;font-family:var(--mermaid-font-family);font-size:12px;background:#ffffde;border:1px solid #aa3;border-radius:2px;pointer-events:none;z-index:100}#mermaid-1587845641339 .actor{stroke:#ccf;fill:#ECECFF}#mermaid-1587845641339 text.actor{fill:#000;stroke:none}#mermaid-1587845641339 .actor-line{stroke:grey}#mermaid-1587845641339 .messageLine0{stroke-width:1.5;stroke-dasharray:&apos;2 2&apos;;stroke:#333}#mermaid-1587845641339 .messageLine1{stroke-width:1.5;stroke-dasharray:&apos;2 2&apos;;stroke:#333}#mermaid-1587845641339 #arrowhead{fill:#333}#mermaid-1587845641339 .sequenceNumber{fill:#fff}#mermaid-1587845641339 #sequencenumber{fill:#333}#mermaid-1587845641339 #crosshead path{fill:#333 !important;stroke:#333 !important}#mermaid-1587845641339 .messageText{fill:#333;stroke:none}#mermaid-1587845641339 .labelBox{stroke:#ccf;fill:#ECECFF}#mermaid-1587845641339 .labelText{fill:#000;stroke:none}#mermaid-1587845641339 .loopText{fill:#000;stroke:none}#mermaid-1587845641339 .loopLine{stroke-width:2;stroke-dasharray:&apos;2 2&apos;;stroke:#ccf}#mermaid-1587845641339 .note{stroke:#aa3;fill:#fff5ad}#mermaid-1587845641339 .noteText{fill:black;stroke:none;font-family:&apos;trebuchet ms&apos;, verdana, arial;font-family:var(--mermaid-font-family);font-size:14px}#mermaid-1587845641339 .activation0{fill:#f4f4f4;stroke:#666}#mermaid-1587845641339 .activation1{fill:#f4f4f4;stroke:#666}#mermaid-1587845641339 .activation2{fill:#f4f4f4;stroke:#666}#mermaid-1587845641339 .mermaid-main-font{font-family:&quot;trebuchet ms&quot;, verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1587845641339 .section{stroke:none;opacity:0.2}#mermaid-1587845641339 .section0{fill:rgba(102,102,255,0.49)}#mermaid-1587845641339 .section2{fill:#fff400}#mermaid-1587845641339 .section1,#mermaid-1587845641339 .section3{fill:#fff;opacity:0.2}#mermaid-1587845641339 .sectionTitle0{fill:#333}#mermaid-1587845641339 .sectionTitle1{fill:#333}#mermaid-1587845641339 .sectionTitle2{fill:#333}#mermaid-1587845641339 .sectionTitle3{fill:#333}#mermaid-1587845641339 .sectionTitle{text-anchor:start;font-size:11px;text-height:14px;font-family:&apos;trebuchet ms&apos;, verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1587845641339 .grid .tick{stroke:#d3d3d3;opacity:0.8;shape-rendering:crispEdges}#mermaid-1587845641339 .grid .tick text{font-family:&apos;trebuchet ms&apos;, verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1587845641339 .grid path{stroke-width:0}#mermaid-1587845641339 .today{fill:none;stroke:red;stroke-width:2px}#mermaid-1587845641339 .task{stroke-width:2}#mermaid-1587845641339 .taskText{text-anchor:middle;font-family:&apos;trebuchet ms&apos;, verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1587845641339 .taskText:not([font-size]){font-size:11px}#mermaid-1587845641339 .taskTextOutsideRight{fill:#000;text-anchor:start;font-size:11px;font-family:&apos;trebuchet ms&apos;, verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1587845641339 .taskTextOutsideLeft{fill:#000;text-anchor:end;font-size:11px}#mermaid-1587845641339 .task.clickable{cursor:pointer}#mermaid-1587845641339 .taskText.clickable{cursor:pointer;fill:#003163 !important;font-weight:bold}#mermaid-1587845641339 .taskTextOutsideLeft.clickable{cursor:pointer;fill:#003163 !important;font-weight:bold}#mermaid-1587845641339 .taskTextOutsideRight.clickable{cursor:pointer;fill:#003163 !important;font-weight:bold}#mermaid-1587845641339 .taskText0,#mermaid-1587845641339 .taskText1,#mermaid-1587845641339 .taskText2,#mermaid-1587845641339 .taskText3{fill:#fff}#mermaid-1587845641339 .task0,#mermaid-1587845641339 .task1,#mermaid-1587845641339 .task2,#mermaid-1587845641339 .task3{fill:#8a90dd;stroke:#534fbc}#mermaid-1587845641339 .taskTextOutside0,#mermaid-1587845641339 .taskTextOutside2{fill:#000}#mermaid-1587845641339 .taskTextOutside1,#mermaid-1587845641339 .taskTextOutside3{fill:#000}#mermaid-1587845641339 .active0,#mermaid-1587845641339 .active1,#mermaid-1587845641339 .active2,#mermaid-1587845641339 .active3{fill:#bfc7ff;stroke:#534fbc}#mermaid-1587845641339 .activeText0,#mermaid-1587845641339 .activeText1,#mermaid-1587845641339 .activeText2,#mermaid-1587845641339 .activeText3{fill:#000 !important}#mermaid-1587845641339 .done0,#mermaid-1587845641339 .done1,#mermaid-1587845641339 .done2,#mermaid-1587845641339 .done3{stroke:grey;fill:#d3d3d3;stroke-width:2}#mermaid-1587845641339 .doneText0,#mermaid-1587845641339 .doneText1,#mermaid-1587845641339 .doneText2,#mermaid-1587845641339 .doneText3{fill:#000 !important}#mermaid-1587845641339 .crit0,#mermaid-1587845641339 .crit1,#mermaid-1587845641339 .crit2,#mermaid-1587845641339 .crit3{stroke:#f88;fill:red;stroke-width:2}#mermaid-1587845641339 .activeCrit0,#mermaid-1587845641339 .activeCrit1,#mermaid-1587845641339 .activeCrit2,#mermaid-1587845641339 .activeCrit3{stroke:#f88;fill:#bfc7ff;stroke-width:2}#mermaid-1587845641339 .doneCrit0,#mermaid-1587845641339 .doneCrit1,#mermaid-1587845641339 .doneCrit2,#mermaid-1587845641339 .doneCrit3{stroke:#f88;fill:#d3d3d3;stroke-width:2;cursor:pointer;shape-rendering:crispEdges}#mermaid-1587845641339 .milestone{transform:rotate(45deg) scale(0.8, 0.8)}#mermaid-1587845641339 .milestoneText{font-style:italic}#mermaid-1587845641339 .doneCritText0,#mermaid-1587845641339 .doneCritText1,#mermaid-1587845641339 .doneCritText2,#mermaid-1587845641339 .doneCritText3{fill:#000 !important}#mermaid-1587845641339 .activeCritText0,#mermaid-1587845641339 .activeCritText1,#mermaid-1587845641339 .activeCritText2,#mermaid-1587845641339 .activeCritText3{fill:#000 !important}#mermaid-1587845641339 .titleText{text-anchor:middle;font-size:18px;fill:#000;font-family:&apos;trebuchet ms&apos;, verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1587845641339 g.classGroup text{fill:#9370db;stroke:none;font-family:&apos;trebuchet ms&apos;, verdana, arial;font-family:var(--mermaid-font-family);font-size:10px}#mermaid-1587845641339 g.classGroup text .title{font-weight:bolder}#mermaid-1587845641339 g.clickable{cursor:pointer}#mermaid-1587845641339 g.classGroup rect{fill:#ECECFF;stroke:#9370db}#mermaid-1587845641339 g.classGroup line{stroke:#9370db;stroke-width:1}#mermaid-1587845641339 .classLabel .box{stroke:none;stroke-width:0;fill:#ECECFF;opacity:0.5}#mermaid-1587845641339 .classLabel .label{fill:#9370db;font-size:10px}#mermaid-1587845641339 .relation{stroke:#9370db;stroke-width:1;fill:none}#mermaid-1587845641339 .dashed-line{stroke-dasharray:3}#mermaid-1587845641339 #compositionStart{fill:#9370db;stroke:#9370db;stroke-width:1}#mermaid-1587845641339 #compositionEnd{fill:#9370db;stroke:#9370db;stroke-width:1}#mermaid-1587845641339 #aggregationStart{fill:#ECECFF;stroke:#9370db;stroke-width:1}#mermaid-1587845641339 #aggregationEnd{fill:#ECECFF;stroke:#9370db;stroke-width:1}#mermaid-1587845641339 #dependencyStart{fill:#9370db;stroke:#9370db;stroke-width:1}#mermaid-1587845641339 #dependencyEnd{fill:#9370db;stroke:#9370db;stroke-width:1}#mermaid-1587845641339 #extensionStart{fill:#9370db;stroke:#9370db;stroke-width:1}#mermaid-1587845641339 #extensionEnd{fill:#9370db;stroke:#9370db;stroke-width:1}#mermaid-1587845641339 .commit-id,#mermaid-1587845641339 .commit-msg,#mermaid-1587845641339 .branch-label{fill:lightgrey;color:lightgrey;font-family:&apos;trebuchet ms&apos;, verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1587845641339 .pieTitleText{text-anchor:middle;font-size:25px;fill:#000;font-family:&apos;trebuchet ms&apos;, verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1587845641339 .slice{font-family:&apos;trebuchet ms&apos;, verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1587845641339 g.stateGroup text{fill:#9370db;stroke:none;font-size:10px;font-family:&apos;trebuchet ms&apos;, verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1587845641339 g.stateGroup text{fill:#9370db;stroke:none;font-size:10px}#mermaid-1587845641339 g.stateGroup .state-title{font-weight:bolder;fill:#000}#mermaid-1587845641339 g.stateGroup rect{fill:#ECECFF;stroke:#9370db}#mermaid-1587845641339 g.stateGroup line{stroke:#9370db;stroke-width:1}#mermaid-1587845641339 .transition{stroke:#9370db;stroke-width:1;fill:none}#mermaid-1587845641339 .stateGroup .composit{fill:white;border-bottom:1px}#mermaid-1587845641339 .stateGroup .alt-composit{fill:#e0e0e0;border-bottom:1px}#mermaid-1587845641339 .state-note{stroke:#aa3;fill:#fff5ad}#mermaid-1587845641339 .state-note text{fill:black;stroke:none;font-size:10px}#mermaid-1587845641339 .stateLabel .box{stroke:none;stroke-width:0;fill:#ECECFF;opacity:0.5}#mermaid-1587845641339 .stateLabel text{fill:#000;font-size:10px;font-weight:bold;font-family:&apos;trebuchet ms&apos;, verdana, arial;font-family:var(--mermaid-font-family)}:root{--mermaid-font-family: &apos;&quot;trebuchet ms&quot;, verdana, arial&apos;;--mermaid-font-family: &quot;Comic Sans MS&quot;, &quot;Comic Sans&quot;, cursive}

:root { --mermaid-font-family: &quot;trebuchet ms&quot;, verdana, arial;}&lt;/style&gt;&lt;style&gt;#mermaid-1587845641339 {
    color: rgb(0, 0, 0);
    font: normal normal 400 normal 16px / normal &quot;trebuchet ms&quot;, verdana, arial;
  }&lt;/style&gt;&lt;g&gt;&lt;/g&gt;&lt;g&gt;&lt;line id=&quot;actor0&quot; x1=&quot;75&quot; y1=&quot;5&quot; x2=&quot;75&quot; y2=&quot;387&quot; class=&quot;actor-line&quot; stroke-width=&quot;0.5px&quot; stroke=&quot;#999&quot;&gt;&lt;/line&gt;&lt;rect x=&quot;0&quot; y=&quot;0&quot; fill=&quot;#eaeaea&quot; stroke=&quot;#666&quot; width=&quot;150&quot; height=&quot;65&quot; rx=&quot;3&quot; ry=&quot;3&quot; class=&quot;actor&quot;&gt;&lt;/rect&gt;&lt;text x=&quot;75&quot; y=&quot;32.5&quot; dominant-baseline=&quot;central&quot; alignment-baseline=&quot;central&quot; class=&quot;actor&quot; style=&quot;text-anchor: middle; font-size: 14px;&quot;&gt;&lt;tspan x=&quot;75&quot; dy=&quot;0&quot;&gt;Orchestrator Queue&lt;/tspan&gt;&lt;/text&gt;&lt;/g&gt;&lt;g&gt;&lt;line id=&quot;actor1&quot; x1=&quot;275&quot; y1=&quot;5&quot; x2=&quot;275&quot; y2=&quot;387&quot; class=&quot;actor-line&quot; stroke-width=&quot;0.5px&quot; stroke=&quot;#999&quot;&gt;&lt;/line&gt;&lt;rect x=&quot;200&quot; y=&quot;0&quot; fill=&quot;#eaeaea&quot; stroke=&quot;#666&quot; width=&quot;150&quot; height=&quot;65&quot; rx=&quot;3&quot; ry=&quot;3&quot; class=&quot;actor&quot;&gt;&lt;/rect&gt;&lt;text x=&quot;275&quot; y=&quot;32.5&quot; dominant-baseline=&quot;central&quot; alignment-baseline=&quot;central&quot; class=&quot;actor&quot; style=&quot;text-anchor: middle; font-size: 14px;&quot;&gt;&lt;tspan x=&quot;275&quot; dy=&quot;0&quot;&gt;Hub&lt;/tspan&gt;&lt;/text&gt;&lt;/g&gt;&lt;g&gt;&lt;line id=&quot;actor2&quot; x1=&quot;475&quot; y1=&quot;5&quot; x2=&quot;475&quot; y2=&quot;387&quot; class=&quot;actor-line&quot; stroke-width=&quot;0.5px&quot; stroke=&quot;#999&quot;&gt;&lt;/line&gt;&lt;rect x=&quot;400&quot; y=&quot;0&quot; fill=&quot;#eaeaea&quot; stroke=&quot;#666&quot; width=&quot;150&quot; height=&quot;65&quot; rx=&quot;3&quot; ry=&quot;3&quot; class=&quot;actor&quot;&gt;&lt;/rect&gt;&lt;text x=&quot;475&quot; y=&quot;32.5&quot; dominant-baseline=&quot;central&quot; alignment-baseline=&quot;central&quot; class=&quot;actor&quot; style=&quot;text-anchor: middle; font-size: 14px;&quot;&gt;&lt;tspan x=&quot;475&quot; dy=&quot;0&quot;&gt;JumpStart Table&lt;/tspan&gt;&lt;/text&gt;&lt;/g&gt;&lt;g&gt;&lt;line id=&quot;actor3&quot; x1=&quot;675&quot; y1=&quot;5&quot; x2=&quot;675&quot; y2=&quot;387&quot; class=&quot;actor-line&quot; stroke-width=&quot;0.5px&quot; stroke=&quot;#999&quot;&gt;&lt;/line&gt;&lt;rect x=&quot;600&quot; y=&quot;0&quot; fill=&quot;#eaeaea&quot; stroke=&quot;#666&quot; width=&quot;150&quot; height=&quot;65&quot; rx=&quot;3&quot; ry=&quot;3&quot; class=&quot;actor&quot;&gt;&lt;/rect&gt;&lt;text x=&quot;675&quot; y=&quot;32.5&quot; dominant-baseline=&quot;central&quot; alignment-baseline=&quot;central&quot; class=&quot;actor&quot; style=&quot;text-anchor: middle; font-size: 14px;&quot;&gt;&lt;tspan x=&quot;675&quot; dy=&quot;0&quot;&gt;InstanceHistory Table&lt;/tspan&gt;&lt;/text&gt;&lt;/g&gt;&lt;defs&gt;&lt;marker id=&quot;arrowhead&quot; refX=&quot;5&quot; refY=&quot;2&quot; markerWidth=&quot;6&quot; markerHeight=&quot;4&quot; orient=&quot;auto&quot;&gt;&lt;path d=&quot;M 0,0 V 4 L6,2 Z&quot;&gt;&lt;/path&gt;&lt;/marker&gt;&lt;/defs&gt;&lt;defs&gt;&lt;marker id=&quot;crosshead&quot; markerWidth=&quot;15&quot; markerHeight=&quot;8&quot; orient=&quot;auto&quot; refX=&quot;16&quot; refY=&quot;4&quot;&gt;&lt;path fill=&quot;black&quot; stroke=&quot;#000000&quot; stroke-width=&quot;1px&quot; d=&quot;M 9,2 V 6 L16,4 Z&quot; style=&quot;stroke-dasharray: 0, 0;&quot;&gt;&lt;/path&gt;&lt;path fill=&quot;none&quot; stroke=&quot;#000000&quot; stroke-width=&quot;1px&quot; d=&quot;M 0,1 L 6,7 M 6,1 L 0,7&quot; style=&quot;stroke-dasharray: 0, 0;&quot;&gt;&lt;/path&gt;&lt;/marker&gt;&lt;/defs&gt;&lt;defs&gt;&lt;marker id=&quot;sequencenumber&quot; refX=&quot;15&quot; refY=&quot;15&quot; markerWidth=&quot;60&quot; markerHeight=&quot;40&quot; orient=&quot;auto&quot;&gt;&lt;circle cx=&quot;15&quot; cy=&quot;15&quot; r=&quot;6&quot;&gt;&lt;/circle&gt;&lt;/marker&gt;&lt;/defs&gt;&lt;g&gt;&lt;text x=&quot;175&quot; y=&quot;93&quot; class=&quot;messageText&quot; style=&quot;text-anchor: middle;&quot;&gt;ExecutionStarted&lt;/text&gt;&lt;line x1=&quot;75&quot; y1=&quot;100&quot; x2=&quot;275&quot; y2=&quot;100&quot; class=&quot;messageLine1&quot; stroke-width=&quot;2&quot; stroke=&quot;black&quot; marker-end=&quot;url(#arrowhead)&quot; style=&quot;stroke-dasharray: 3, 3; fill: none;&quot;&gt;&lt;/line&gt;&lt;/g&gt;&lt;g&gt;&lt;rect x=&quot;50&quot; y=&quot;110&quot; fill=&quot;#EDF2AE&quot; stroke=&quot;#666&quot; width=&quot;250&quot; height=&quot;52&quot; rx=&quot;0&quot; ry=&quot;0&quot; class=&quot;note&quot;&gt;&lt;/rect&gt;&lt;text x=&quot;46&quot; y=&quot;134&quot; class=&quot;noteText&quot;&gt;&lt;tspan x=&quot;66&quot;&gt;The normal Orchestration &lt;/tspan&gt;&lt;/text&gt;&lt;text x=&quot;46&quot; y=&quot;150&quot; class=&quot;noteText&quot;&gt;&lt;tspan x=&quot;66&quot;&gt; process kicks off&lt;/tspan&gt;&lt;/text&gt;&lt;/g&gt;&lt;g&gt;&lt;text x=&quot;375&quot; y=&quot;215&quot; class=&quot;messageText&quot; style=&quot;text-anchor: middle;&quot;&gt;Finds an entry&lt;/text&gt;&lt;line x1=&quot;275&quot; y1=&quot;222&quot; x2=&quot;475&quot; y2=&quot;222&quot; class=&quot;messageLine1&quot; stroke-width=&quot;2&quot; stroke=&quot;black&quot; style=&quot;stroke-dasharray: 3, 3; fill: none;&quot;&gt;&lt;/line&gt;&lt;/g&gt;&lt;g&gt;&lt;line x1=&quot;265&quot; y1=&quot;172&quot; x2=&quot;485&quot; y2=&quot;172&quot; class=&quot;loopLine&quot;&gt;&lt;/line&gt;&lt;line x1=&quot;485&quot; y1=&quot;172&quot; x2=&quot;485&quot; y2=&quot;232&quot; class=&quot;loopLine&quot;&gt;&lt;/line&gt;&lt;line x1=&quot;265&quot; y1=&quot;232&quot; x2=&quot;485&quot; y2=&quot;232&quot; class=&quot;loopLine&quot;&gt;&lt;/line&gt;&lt;line x1=&quot;265&quot; y1=&quot;172&quot; x2=&quot;265&quot; y2=&quot;232&quot; class=&quot;loopLine&quot;&gt;&lt;/line&gt;&lt;polygon points=&quot;265,172 315,172 315,185 306.6,192 265,192&quot; class=&quot;labelBox&quot;&gt;&lt;/polygon&gt;&lt;text x=&quot;272.5&quot; y=&quot;187&quot; class=&quot;labelText&quot;&gt;&lt;tspan x=&quot;272.5&quot;&gt;loop&lt;/tspan&gt;&lt;/text&gt;&lt;text x=&quot;375&quot; y=&quot;187&quot; class=&quot;loopText&quot; style=&quot;text-anchor: middle;&quot;&gt;&lt;tspan x=&quot;375&quot;&gt;[ Every 5 Seconds ]&lt;/tspan&gt;&lt;/text&gt;&lt;/g&gt;&lt;g&gt;&lt;text x=&quot;475&quot; y=&quot;260&quot; class=&quot;messageText&quot; style=&quot;text-anchor: middle;&quot;&gt;Checks if the Orchestration corresponding to the entry is present&lt;/text&gt;&lt;line x1=&quot;275&quot; y1=&quot;267&quot; x2=&quot;675&quot; y2=&quot;267&quot; class=&quot;messageLine0&quot; stroke-width=&quot;2&quot; stroke=&quot;black&quot; marker-end=&quot;url(#arrowhead)&quot; style=&quot;fill: none;&quot;&gt;&lt;/line&gt;&lt;/g&gt;&lt;g&gt;&lt;text x=&quot;375&quot; y=&quot;295&quot; class=&quot;messageText&quot; style=&quot;text-anchor: middle;&quot;&gt;Deletes the entry&lt;/text&gt;&lt;line x1=&quot;275&quot; y1=&quot;302&quot; x2=&quot;475&quot; y2=&quot;302&quot; class=&quot;messageLine0&quot; stroke-width=&quot;2&quot; stroke=&quot;black&quot; marker-end=&quot;url(#arrowhead)&quot; style=&quot;fill: none;&quot;&gt;&lt;/line&gt;&lt;/g&gt;&lt;g&gt;&lt;rect x=&quot;0&quot; y=&quot;322&quot; fill=&quot;#eaeaea&quot; stroke=&quot;#666&quot; width=&quot;150&quot; height=&quot;65&quot; rx=&quot;3&quot; ry=&quot;3&quot; class=&quot;actor&quot;&gt;&lt;/rect&gt;&lt;text x=&quot;75&quot; y=&quot;354.5&quot; dominant-baseline=&quot;central&quot; alignment-baseline=&quot;central&quot; class=&quot;actor&quot; style=&quot;text-anchor: middle; font-size: 14px;&quot;&gt;&lt;tspan x=&quot;75&quot; dy=&quot;0&quot;&gt;Orchestrator Queue&lt;/tspan&gt;&lt;/text&gt;&lt;/g&gt;&lt;g&gt;&lt;rect x=&quot;200&quot; y=&quot;322&quot; fill=&quot;#eaeaea&quot; stroke=&quot;#666&quot; width=&quot;150&quot; height=&quot;65&quot; rx=&quot;3&quot; ry=&quot;3&quot; class=&quot;actor&quot;&gt;&lt;/rect&gt;&lt;text x=&quot;275&quot; y=&quot;354.5&quot; dominant-baseline=&quot;central&quot; alignment-baseline=&quot;central&quot; class=&quot;actor&quot; style=&quot;text-anchor: middle; font-size: 14px;&quot;&gt;&lt;tspan x=&quot;275&quot; dy=&quot;0&quot;&gt;Hub&lt;/tspan&gt;&lt;/text&gt;&lt;/g&gt;&lt;g&gt;&lt;rect x=&quot;400&quot; y=&quot;322&quot; fill=&quot;#eaeaea&quot; stroke=&quot;#666&quot; width=&quot;150&quot; height=&quot;65&quot; rx=&quot;3&quot; ry=&quot;3&quot; class=&quot;actor&quot;&gt;&lt;/rect&gt;&lt;text x=&quot;475&quot; y=&quot;354.5&quot; dominant-baseline=&quot;central&quot; alignment-baseline=&quot;central&quot; class=&quot;actor&quot; style=&quot;text-anchor: middle; font-size: 14px;&quot;&gt;&lt;tspan x=&quot;475&quot; dy=&quot;0&quot;&gt;JumpStart Table&lt;/tspan&gt;&lt;/text&gt;&lt;/g&gt;&lt;g&gt;&lt;rect x=&quot;600&quot; y=&quot;322&quot; fill=&quot;#eaeaea&quot; stroke=&quot;#666&quot; width=&quot;150&quot; height=&quot;65&quot; rx=&quot;3&quot; ry=&quot;3&quot; class=&quot;actor&quot;&gt;&lt;/rect&gt;&lt;text x=&quot;675&quot; y=&quot;354.5&quot; dominant-baseline=&quot;central&quot; alignment-baseline=&quot;central&quot; class=&quot;actor&quot; style=&quot;text-anchor: middle; font-size: 14px;&quot;&gt;&lt;tspan x=&quot;675&quot; dy=&quot;0&quot;&gt;InstanceHistory Table&lt;/tspan&gt;&lt;/text&gt;&lt;/g&gt;&lt;/svg&gt;&lt;/div&gt;
&lt;ul&gt;
&lt;li&gt;&lt;em&gt;Hub first gets the event from polling, before it gets through Service Bus&lt;/em&gt; - When it gets an entity from the Table, it first checks if there is a corresponding entry in instanceHistory table, which would mean that Hub has received the orchestration signal from Service Bus. But in this case, it would not be able to find it, so it checks the time in which the Client triggered the orchestration. If 10 minutes have not passed, it will ignore the entity, but &lt;strong&gt;will not delete it&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&quot;mermaid&quot; data-processed=&quot;true&quot;&gt;&lt;svg id=&quot;mermaid-1587845641326&quot; width=&quot;100%&quot; xmlns=&quot;http://www.w3.org/2000/svg&quot; height=&quot;100%&quot; style=&quot;max-width:850px;&quot; viewBox=&quot;-50 -10 850 511&quot;&gt;&lt;style&gt;#mermaid-1587845641326 .label{font-family:&apos;trebuchet ms&apos;, verdana, arial;font-family:var(--mermaid-font-family);color:#333}#mermaid-1587845641326 .label text{fill:#333}#mermaid-1587845641326 .node rect,#mermaid-1587845641326 .node circle,#mermaid-1587845641326 .node ellipse,#mermaid-1587845641326 .node polygon,#mermaid-1587845641326 .node path{fill:#ECECFF;stroke:#9370db;stroke-width:1px}#mermaid-1587845641326 .node .label{text-align:center}#mermaid-1587845641326 .node.clickable{cursor:pointer}#mermaid-1587845641326 .arrowheadPath{fill:#333}#mermaid-1587845641326 .edgePath .path{stroke:#333;stroke-width:1.5px}#mermaid-1587845641326 .edgeLabel{background-color:#e8e8e8;text-align:center}#mermaid-1587845641326 .cluster rect{fill:#ffffde;stroke:#aa3;stroke-width:1px}#mermaid-1587845641326 .cluster text{fill:#333}#mermaid-1587845641326 div.mermaidTooltip{position:absolute;text-align:center;max-width:200px;padding:2px;font-family:&apos;trebuchet ms&apos;, verdana, arial;font-family:var(--mermaid-font-family);font-size:12px;background:#ffffde;border:1px solid #aa3;border-radius:2px;pointer-events:none;z-index:100}#mermaid-1587845641326 .actor{stroke:#ccf;fill:#ECECFF}#mermaid-1587845641326 text.actor{fill:#000;stroke:none}#mermaid-1587845641326 .actor-line{stroke:grey}#mermaid-1587845641326 .messageLine0{stroke-width:1.5;stroke-dasharray:&apos;2 2&apos;;stroke:#333}#mermaid-1587845641326 .messageLine1{stroke-width:1.5;stroke-dasharray:&apos;2 2&apos;;stroke:#333}#mermaid-1587845641326 #arrowhead{fill:#333}#mermaid-1587845641326 .sequenceNumber{fill:#fff}#mermaid-1587845641326 #sequencenumber{fill:#333}#mermaid-1587845641326 #crosshead path{fill:#333 !important;stroke:#333 !important}#mermaid-1587845641326 .messageText{fill:#333;stroke:none}#mermaid-1587845641326 .labelBox{stroke:#ccf;fill:#ECECFF}#mermaid-1587845641326 .labelText{fill:#000;stroke:none}#mermaid-1587845641326 .loopText{fill:#000;stroke:none}#mermaid-1587845641326 .loopLine{stroke-width:2;stroke-dasharray:&apos;2 2&apos;;stroke:#ccf}#mermaid-1587845641326 .note{stroke:#aa3;fill:#fff5ad}#mermaid-1587845641326 .noteText{fill:black;stroke:none;font-family:&apos;trebuchet ms&apos;, verdana, arial;font-family:var(--mermaid-font-family);font-size:14px}#mermaid-1587845641326 .activation0{fill:#f4f4f4;stroke:#666}#mermaid-1587845641326 .activation1{fill:#f4f4f4;stroke:#666}#mermaid-1587845641326 .activation2{fill:#f4f4f4;stroke:#666}#mermaid-1587845641326 .mermaid-main-font{font-family:&quot;trebuchet ms&quot;, verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1587845641326 .section{stroke:none;opacity:0.2}#mermaid-1587845641326 .section0{fill:rgba(102,102,255,0.49)}#mermaid-1587845641326 .section2{fill:#fff400}#mermaid-1587845641326 .section1,#mermaid-1587845641326 .section3{fill:#fff;opacity:0.2}#mermaid-1587845641326 .sectionTitle0{fill:#333}#mermaid-1587845641326 .sectionTitle1{fill:#333}#mermaid-1587845641326 .sectionTitle2{fill:#333}#mermaid-1587845641326 .sectionTitle3{fill:#333}#mermaid-1587845641326 .sectionTitle{text-anchor:start;font-size:11px;text-height:14px;font-family:&apos;trebuchet ms&apos;, verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1587845641326 .grid .tick{stroke:#d3d3d3;opacity:0.8;shape-rendering:crispEdges}#mermaid-1587845641326 .grid .tick text{font-family:&apos;trebuchet ms&apos;, verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1587845641326 .grid path{stroke-width:0}#mermaid-1587845641326 .today{fill:none;stroke:red;stroke-width:2px}#mermaid-1587845641326 .task{stroke-width:2}#mermaid-1587845641326 .taskText{text-anchor:middle;font-family:&apos;trebuchet ms&apos;, verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1587845641326 .taskText:not([font-size]){font-size:11px}#mermaid-1587845641326 .taskTextOutsideRight{fill:#000;text-anchor:start;font-size:11px;font-family:&apos;trebuchet ms&apos;, verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1587845641326 .taskTextOutsideLeft{fill:#000;text-anchor:end;font-size:11px}#mermaid-1587845641326 .task.clickable{cursor:pointer}#mermaid-1587845641326 .taskText.clickable{cursor:pointer;fill:#003163 !important;font-weight:bold}#mermaid-1587845641326 .taskTextOutsideLeft.clickable{cursor:pointer;fill:#003163 !important;font-weight:bold}#mermaid-1587845641326 .taskTextOutsideRight.clickable{cursor:pointer;fill:#003163 !important;font-weight:bold}#mermaid-1587845641326 .taskText0,#mermaid-1587845641326 .taskText1,#mermaid-1587845641326 .taskText2,#mermaid-1587845641326 .taskText3{fill:#fff}#mermaid-1587845641326 .task0,#mermaid-1587845641326 .task1,#mermaid-1587845641326 .task2,#mermaid-1587845641326 .task3{fill:#8a90dd;stroke:#534fbc}#mermaid-1587845641326 .taskTextOutside0,#mermaid-1587845641326 .taskTextOutside2{fill:#000}#mermaid-1587845641326 .taskTextOutside1,#mermaid-1587845641326 .taskTextOutside3{fill:#000}#mermaid-1587845641326 .active0,#mermaid-1587845641326 .active1,#mermaid-1587845641326 .active2,#mermaid-1587845641326 .active3{fill:#bfc7ff;stroke:#534fbc}#mermaid-1587845641326 .activeText0,#mermaid-1587845641326 .activeText1,#mermaid-1587845641326 .activeText2,#mermaid-1587845641326 .activeText3{fill:#000 !important}#mermaid-1587845641326 .done0,#mermaid-1587845641326 .done1,#mermaid-1587845641326 .done2,#mermaid-1587845641326 .done3{stroke:grey;fill:#d3d3d3;stroke-width:2}#mermaid-1587845641326 .doneText0,#mermaid-1587845641326 .doneText1,#mermaid-1587845641326 .doneText2,#mermaid-1587845641326 .doneText3{fill:#000 !important}#mermaid-1587845641326 .crit0,#mermaid-1587845641326 .crit1,#mermaid-1587845641326 .crit2,#mermaid-1587845641326 .crit3{stroke:#f88;fill:red;stroke-width:2}#mermaid-1587845641326 .activeCrit0,#mermaid-1587845641326 .activeCrit1,#mermaid-1587845641326 .activeCrit2,#mermaid-1587845641326 .activeCrit3{stroke:#f88;fill:#bfc7ff;stroke-width:2}#mermaid-1587845641326 .doneCrit0,#mermaid-1587845641326 .doneCrit1,#mermaid-1587845641326 .doneCrit2,#mermaid-1587845641326 .doneCrit3{stroke:#f88;fill:#d3d3d3;stroke-width:2;cursor:pointer;shape-rendering:crispEdges}#mermaid-1587845641326 .milestone{transform:rotate(45deg) scale(0.8, 0.8)}#mermaid-1587845641326 .milestoneText{font-style:italic}#mermaid-1587845641326 .doneCritText0,#mermaid-1587845641326 .doneCritText1,#mermaid-1587845641326 .doneCritText2,#mermaid-1587845641326 .doneCritText3{fill:#000 !important}#mermaid-1587845641326 .activeCritText0,#mermaid-1587845641326 .activeCritText1,#mermaid-1587845641326 .activeCritText2,#mermaid-1587845641326 .activeCritText3{fill:#000 !important}#mermaid-1587845641326 .titleText{text-anchor:middle;font-size:18px;fill:#000;font-family:&apos;trebuchet ms&apos;, verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1587845641326 g.classGroup text{fill:#9370db;stroke:none;font-family:&apos;trebuchet ms&apos;, verdana, arial;font-family:var(--mermaid-font-family);font-size:10px}#mermaid-1587845641326 g.classGroup text .title{font-weight:bolder}#mermaid-1587845641326 g.clickable{cursor:pointer}#mermaid-1587845641326 g.classGroup rect{fill:#ECECFF;stroke:#9370db}#mermaid-1587845641326 g.classGroup line{stroke:#9370db;stroke-width:1}#mermaid-1587845641326 .classLabel .box{stroke:none;stroke-width:0;fill:#ECECFF;opacity:0.5}#mermaid-1587845641326 .classLabel .label{fill:#9370db;font-size:10px}#mermaid-1587845641326 .relation{stroke:#9370db;stroke-width:1;fill:none}#mermaid-1587845641326 .dashed-line{stroke-dasharray:3}#mermaid-1587845641326 #compositionStart{fill:#9370db;stroke:#9370db;stroke-width:1}#mermaid-1587845641326 #compositionEnd{fill:#9370db;stroke:#9370db;stroke-width:1}#mermaid-1587845641326 #aggregationStart{fill:#ECECFF;stroke:#9370db;stroke-width:1}#mermaid-1587845641326 #aggregationEnd{fill:#ECECFF;stroke:#9370db;stroke-width:1}#mermaid-1587845641326 #dependencyStart{fill:#9370db;stroke:#9370db;stroke-width:1}#mermaid-1587845641326 #dependencyEnd{fill:#9370db;stroke:#9370db;stroke-width:1}#mermaid-1587845641326 #extensionStart{fill:#9370db;stroke:#9370db;stroke-width:1}#mermaid-1587845641326 #extensionEnd{fill:#9370db;stroke:#9370db;stroke-width:1}#mermaid-1587845641326 .commit-id,#mermaid-1587845641326 .commit-msg,#mermaid-1587845641326 .branch-label{fill:lightgrey;color:lightgrey;font-family:&apos;trebuchet ms&apos;, verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1587845641326 .pieTitleText{text-anchor:middle;font-size:25px;fill:#000;font-family:&apos;trebuchet ms&apos;, verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1587845641326 .slice{font-family:&apos;trebuchet ms&apos;, verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1587845641326 g.stateGroup text{fill:#9370db;stroke:none;font-size:10px;font-family:&apos;trebuchet ms&apos;, verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1587845641326 g.stateGroup text{fill:#9370db;stroke:none;font-size:10px}#mermaid-1587845641326 g.stateGroup .state-title{font-weight:bolder;fill:#000}#mermaid-1587845641326 g.stateGroup rect{fill:#ECECFF;stroke:#9370db}#mermaid-1587845641326 g.stateGroup line{stroke:#9370db;stroke-width:1}#mermaid-1587845641326 .transition{stroke:#9370db;stroke-width:1;fill:none}#mermaid-1587845641326 .stateGroup .composit{fill:white;border-bottom:1px}#mermaid-1587845641326 .stateGroup .alt-composit{fill:#e0e0e0;border-bottom:1px}#mermaid-1587845641326 .state-note{stroke:#aa3;fill:#fff5ad}#mermaid-1587845641326 .state-note text{fill:black;stroke:none;font-size:10px}#mermaid-1587845641326 .stateLabel .box{stroke:none;stroke-width:0;fill:#ECECFF;opacity:0.5}#mermaid-1587845641326 .stateLabel text{fill:#000;font-size:10px;font-weight:bold;font-family:&apos;trebuchet ms&apos;, verdana, arial;font-family:var(--mermaid-font-family)}:root{--mermaid-font-family: &apos;&quot;trebuchet ms&quot;, verdana, arial&apos;;--mermaid-font-family: &quot;Comic Sans MS&quot;, &quot;Comic Sans&quot;, cursive}

:root { --mermaid-font-family: &quot;trebuchet ms&quot;, verdana, arial;}&lt;/style&gt;&lt;style&gt;#mermaid-1587845641326 {
    color: rgb(0, 0, 0);
    font: normal normal 400 normal 16px / normal &quot;trebuchet ms&quot;, verdana, arial;
  }&lt;/style&gt;&lt;g&gt;&lt;/g&gt;&lt;g&gt;&lt;line id=&quot;actor0&quot; x1=&quot;75&quot; y1=&quot;5&quot; x2=&quot;75&quot; y2=&quot;500&quot; class=&quot;actor-line&quot; stroke-width=&quot;0.5px&quot; stroke=&quot;#999&quot;&gt;&lt;/line&gt;&lt;rect x=&quot;0&quot; y=&quot;0&quot; fill=&quot;#eaeaea&quot; stroke=&quot;#666&quot; width=&quot;150&quot; height=&quot;65&quot; rx=&quot;3&quot; ry=&quot;3&quot; class=&quot;actor&quot;&gt;&lt;/rect&gt;&lt;text x=&quot;75&quot; y=&quot;32.5&quot; dominant-baseline=&quot;central&quot; alignment-baseline=&quot;central&quot; class=&quot;actor&quot; style=&quot;text-anchor: middle; font-size: 14px;&quot;&gt;&lt;tspan x=&quot;75&quot; dy=&quot;0&quot;&gt;Hub&lt;/tspan&gt;&lt;/text&gt;&lt;/g&gt;&lt;g&gt;&lt;line id=&quot;actor1&quot; x1=&quot;275&quot; y1=&quot;5&quot; x2=&quot;275&quot; y2=&quot;500&quot; class=&quot;actor-line&quot; stroke-width=&quot;0.5px&quot; stroke=&quot;#999&quot;&gt;&lt;/line&gt;&lt;rect x=&quot;200&quot; y=&quot;0&quot; fill=&quot;#eaeaea&quot; stroke=&quot;#666&quot; width=&quot;150&quot; height=&quot;65&quot; rx=&quot;3&quot; ry=&quot;3&quot; class=&quot;actor&quot;&gt;&lt;/rect&gt;&lt;text x=&quot;275&quot; y=&quot;32.5&quot; dominant-baseline=&quot;central&quot; alignment-baseline=&quot;central&quot; class=&quot;actor&quot; style=&quot;text-anchor: middle; font-size: 14px;&quot;&gt;&lt;tspan x=&quot;275&quot; dy=&quot;0&quot;&gt;JumpStart Table&lt;/tspan&gt;&lt;/text&gt;&lt;/g&gt;&lt;g&gt;&lt;line id=&quot;actor2&quot; x1=&quot;475&quot; y1=&quot;5&quot; x2=&quot;475&quot; y2=&quot;500&quot; class=&quot;actor-line&quot; stroke-width=&quot;0.5px&quot; stroke=&quot;#999&quot;&gt;&lt;/line&gt;&lt;rect x=&quot;400&quot; y=&quot;0&quot; fill=&quot;#eaeaea&quot; stroke=&quot;#666&quot; width=&quot;150&quot; height=&quot;65&quot; rx=&quot;3&quot; ry=&quot;3&quot; class=&quot;actor&quot;&gt;&lt;/rect&gt;&lt;text x=&quot;475&quot; y=&quot;32.5&quot; dominant-baseline=&quot;central&quot; alignment-baseline=&quot;central&quot; class=&quot;actor&quot; style=&quot;text-anchor: middle; font-size: 14px;&quot;&gt;&lt;tspan x=&quot;475&quot; dy=&quot;0&quot;&gt;InstanceHistory Table&lt;/tspan&gt;&lt;/text&gt;&lt;/g&gt;&lt;g&gt;&lt;line id=&quot;actor3&quot; x1=&quot;675&quot; y1=&quot;5&quot; x2=&quot;675&quot; y2=&quot;500&quot; class=&quot;actor-line&quot; stroke-width=&quot;0.5px&quot; stroke=&quot;#999&quot;&gt;&lt;/line&gt;&lt;rect x=&quot;600&quot; y=&quot;0&quot; fill=&quot;#eaeaea&quot; stroke=&quot;#666&quot; width=&quot;150&quot; height=&quot;65&quot; rx=&quot;3&quot; ry=&quot;3&quot; class=&quot;actor&quot;&gt;&lt;/rect&gt;&lt;text x=&quot;675&quot; y=&quot;32.5&quot; dominant-baseline=&quot;central&quot; alignment-baseline=&quot;central&quot; class=&quot;actor&quot; style=&quot;text-anchor: middle; font-size: 14px;&quot;&gt;&lt;tspan x=&quot;675&quot; dy=&quot;0&quot;&gt;Orchestrator Queue&lt;/tspan&gt;&lt;/text&gt;&lt;/g&gt;&lt;defs&gt;&lt;marker id=&quot;arrowhead&quot; refX=&quot;5&quot; refY=&quot;2&quot; markerWidth=&quot;6&quot; markerHeight=&quot;4&quot; orient=&quot;auto&quot;&gt;&lt;path d=&quot;M 0,0 V 4 L6,2 Z&quot;&gt;&lt;/path&gt;&lt;/marker&gt;&lt;/defs&gt;&lt;defs&gt;&lt;marker id=&quot;crosshead&quot; markerWidth=&quot;15&quot; markerHeight=&quot;8&quot; orient=&quot;auto&quot; refX=&quot;16&quot; refY=&quot;4&quot;&gt;&lt;path fill=&quot;black&quot; stroke=&quot;#000000&quot; stroke-width=&quot;1px&quot; d=&quot;M 9,2 V 6 L16,4 Z&quot; style=&quot;stroke-dasharray: 0, 0;&quot;&gt;&lt;/path&gt;&lt;path fill=&quot;none&quot; stroke=&quot;#000000&quot; stroke-width=&quot;1px&quot; d=&quot;M 0,1 L 6,7 M 6,1 L 0,7&quot; style=&quot;stroke-dasharray: 0, 0;&quot;&gt;&lt;/path&gt;&lt;/marker&gt;&lt;/defs&gt;&lt;defs&gt;&lt;marker id=&quot;sequencenumber&quot; refX=&quot;15&quot; refY=&quot;15&quot; markerWidth=&quot;60&quot; markerHeight=&quot;40&quot; orient=&quot;auto&quot;&gt;&lt;circle cx=&quot;15&quot; cy=&quot;15&quot; r=&quot;6&quot;&gt;&lt;/circle&gt;&lt;/marker&gt;&lt;/defs&gt;&lt;g&gt;&lt;text x=&quot;175&quot; y=&quot;118&quot; class=&quot;messageText&quot; style=&quot;text-anchor: middle;&quot;&gt;Finds an entry&lt;/text&gt;&lt;line x1=&quot;75&quot; y1=&quot;125&quot; x2=&quot;275&quot; y2=&quot;125&quot; class=&quot;messageLine1&quot; stroke-width=&quot;2&quot; stroke=&quot;black&quot; style=&quot;stroke-dasharray: 3, 3; fill: none;&quot;&gt;&lt;/line&gt;&lt;/g&gt;&lt;g&gt;&lt;text x=&quot;275&quot; y=&quot;153&quot; class=&quot;messageText&quot; style=&quot;text-anchor: middle;&quot;&gt;Checks if the Orchestration corresponding to the entry is present&lt;/text&gt;&lt;line x1=&quot;75&quot; y1=&quot;160&quot; x2=&quot;475&quot; y2=&quot;160&quot; class=&quot;messageLine0&quot; stroke-width=&quot;2&quot; stroke=&quot;black&quot; marker-end=&quot;url(#arrowhead)&quot; style=&quot;fill: none;&quot;&gt;&lt;/line&gt;&lt;/g&gt;&lt;g&gt;&lt;text x=&quot;175&quot; y=&quot;188&quot; class=&quot;messageText&quot; style=&quot;text-anchor: middle;&quot;&gt;If currentTime - startTime &amp;lt; 10 minutes , no op.&lt;/text&gt;&lt;line x1=&quot;75&quot; y1=&quot;195&quot; x2=&quot;275&quot; y2=&quot;195&quot; class=&quot;messageLine0&quot; stroke-width=&quot;2&quot; stroke=&quot;black&quot; marker-end=&quot;url(#arrowhead)&quot; style=&quot;fill: none;&quot;&gt;&lt;/line&gt;&lt;/g&gt;&lt;g&gt;&lt;line x1=&quot;65&quot; y1=&quot;75&quot; x2=&quot;485&quot; y2=&quot;75&quot; class=&quot;loopLine&quot;&gt;&lt;/line&gt;&lt;line x1=&quot;485&quot; y1=&quot;75&quot; x2=&quot;485&quot; y2=&quot;205&quot; class=&quot;loopLine&quot;&gt;&lt;/line&gt;&lt;line x1=&quot;65&quot; y1=&quot;205&quot; x2=&quot;485&quot; y2=&quot;205&quot; class=&quot;loopLine&quot;&gt;&lt;/line&gt;&lt;line x1=&quot;65&quot; y1=&quot;75&quot; x2=&quot;65&quot; y2=&quot;205&quot; class=&quot;loopLine&quot;&gt;&lt;/line&gt;&lt;polygon points=&quot;65,75 115,75 115,88 106.6,95 65,95&quot; class=&quot;labelBox&quot;&gt;&lt;/polygon&gt;&lt;text x=&quot;72.5&quot; y=&quot;90&quot; class=&quot;labelText&quot;&gt;&lt;tspan x=&quot;72.5&quot;&gt;loop&lt;/tspan&gt;&lt;/text&gt;&lt;text x=&quot;275&quot; y=&quot;90&quot; class=&quot;loopText&quot; style=&quot;text-anchor: middle;&quot;&gt;&lt;tspan x=&quot;275&quot;&gt;[ Every 5 Seconds ]&lt;/tspan&gt;&lt;/text&gt;&lt;/g&gt;&lt;g&gt;&lt;rect x=&quot;50&quot; y=&quot;215&quot; fill=&quot;#EDF2AE&quot; stroke=&quot;#666&quot; width=&quot;250&quot; height=&quot;68&quot; rx=&quot;0&quot; ry=&quot;0&quot; class=&quot;note&quot;&gt;&lt;/rect&gt;&lt;text x=&quot;46&quot; y=&quot;239&quot; class=&quot;noteText&quot;&gt;&lt;tspan x=&quot;66&quot;&gt;Within 10 minutes , we will &lt;/tspan&gt;&lt;/text&gt;&lt;text x=&quot;46&quot; y=&quot;255&quot; class=&quot;noteText&quot;&gt;&lt;tspan x=&quot;66&quot;&gt; definitely receive the message from &lt;/tspan&gt;&lt;/text&gt;&lt;text x=&quot;46&quot; y=&quot;271&quot; class=&quot;noteText&quot;&gt;&lt;tspan x=&quot;66&quot;&gt; the queue&lt;/tspan&gt;&lt;/text&gt;&lt;/g&gt;&lt;g&gt;&lt;text x=&quot;375&quot; y=&quot;311&quot; class=&quot;messageText&quot; style=&quot;text-anchor: middle;&quot;&gt;ExecutionStarted&lt;/text&gt;&lt;line x1=&quot;675&quot; y1=&quot;318&quot; x2=&quot;75&quot; y2=&quot;318&quot; class=&quot;messageLine1&quot; stroke-width=&quot;2&quot; stroke=&quot;black&quot; marker-end=&quot;url(#arrowhead)&quot; style=&quot;stroke-dasharray: 3, 3; fill: none;&quot;&gt;&lt;/line&gt;&lt;/g&gt;&lt;g&gt;&lt;rect x=&quot;50&quot; y=&quot;328&quot; fill=&quot;#EDF2AE&quot; stroke=&quot;#666&quot; width=&quot;650&quot; height=&quot;52&quot; rx=&quot;0&quot; ry=&quot;0&quot; class=&quot;note&quot;&gt;&lt;/rect&gt;&lt;text x=&quot;46&quot; y=&quot;352&quot; class=&quot;noteText&quot;&gt;&lt;tspan x=&quot;66&quot;&gt;The normal Orchestration &lt;/tspan&gt;&lt;/text&gt;&lt;text x=&quot;46&quot; y=&quot;368&quot; class=&quot;noteText&quot;&gt;&lt;tspan x=&quot;66&quot;&gt; process kicks off&lt;/tspan&gt;&lt;/text&gt;&lt;/g&gt;&lt;g&gt;&lt;text x=&quot;175&quot; y=&quot;408&quot; class=&quot;messageText&quot; style=&quot;text-anchor: middle;&quot;&gt;Deletes the entry&lt;/text&gt;&lt;line x1=&quot;75&quot; y1=&quot;415&quot; x2=&quot;275&quot; y2=&quot;415&quot; class=&quot;messageLine0&quot; stroke-width=&quot;2&quot; stroke=&quot;black&quot; marker-end=&quot;url(#arrowhead)&quot; style=&quot;fill: none;&quot;&gt;&lt;/line&gt;&lt;/g&gt;&lt;g&gt;&lt;rect x=&quot;0&quot; y=&quot;435&quot; fill=&quot;#eaeaea&quot; stroke=&quot;#666&quot; width=&quot;150&quot; height=&quot;65&quot; rx=&quot;3&quot; ry=&quot;3&quot; class=&quot;actor&quot;&gt;&lt;/rect&gt;&lt;text x=&quot;75&quot; y=&quot;467.5&quot; dominant-baseline=&quot;central&quot; alignment-baseline=&quot;central&quot; class=&quot;actor&quot; style=&quot;text-anchor: middle; font-size: 14px;&quot;&gt;&lt;tspan x=&quot;75&quot; dy=&quot;0&quot;&gt;Hub&lt;/tspan&gt;&lt;/text&gt;&lt;/g&gt;&lt;g&gt;&lt;rect x=&quot;200&quot; y=&quot;435&quot; fill=&quot;#eaeaea&quot; stroke=&quot;#666&quot; width=&quot;150&quot; height=&quot;65&quot; rx=&quot;3&quot; ry=&quot;3&quot; class=&quot;actor&quot;&gt;&lt;/rect&gt;&lt;text x=&quot;275&quot; y=&quot;467.5&quot; dominant-baseline=&quot;central&quot; alignment-baseline=&quot;central&quot; class=&quot;actor&quot; style=&quot;text-anchor: middle; font-size: 14px;&quot;&gt;&lt;tspan x=&quot;275&quot; dy=&quot;0&quot;&gt;JumpStart Table&lt;/tspan&gt;&lt;/text&gt;&lt;/g&gt;&lt;g&gt;&lt;rect x=&quot;400&quot; y=&quot;435&quot; fill=&quot;#eaeaea&quot; stroke=&quot;#666&quot; width=&quot;150&quot; height=&quot;65&quot; rx=&quot;3&quot; ry=&quot;3&quot; class=&quot;actor&quot;&gt;&lt;/rect&gt;&lt;text x=&quot;475&quot; y=&quot;467.5&quot; dominant-baseline=&quot;central&quot; alignment-baseline=&quot;central&quot; class=&quot;actor&quot; style=&quot;text-anchor: middle; font-size: 14px;&quot;&gt;&lt;tspan x=&quot;475&quot; dy=&quot;0&quot;&gt;InstanceHistory Table&lt;/tspan&gt;&lt;/text&gt;&lt;/g&gt;&lt;g&gt;&lt;rect x=&quot;600&quot; y=&quot;435&quot; fill=&quot;#eaeaea&quot; stroke=&quot;#666&quot; width=&quot;150&quot; height=&quot;65&quot; rx=&quot;3&quot; ry=&quot;3&quot; class=&quot;actor&quot;&gt;&lt;/rect&gt;&lt;text x=&quot;675&quot; y=&quot;467.5&quot; dominant-baseline=&quot;central&quot; alignment-baseline=&quot;central&quot; class=&quot;actor&quot; style=&quot;text-anchor: middle; font-size: 14px;&quot;&gt;&lt;tspan x=&quot;675&quot; dy=&quot;0&quot;&gt;Orchestrator Queue&lt;/tspan&gt;&lt;/text&gt;&lt;/g&gt;&lt;/svg&gt;&lt;/div&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Now lets look at the case where queing to Service bus fails from the client.&lt;/p&gt;
&lt;div class=&quot;mermaid&quot; data-processed=&quot;true&quot;&gt;&lt;svg id=&quot;mermaid-1587845641327&quot; width=&quot;100%&quot; xmlns=&quot;http://www.w3.org/2000/svg&quot; height=&quot;100%&quot; style=&quot;max-width:650px;&quot; viewBox=&quot;-50 -10 650 231&quot;&gt;&lt;style&gt;#mermaid-1587845641327 .label{font-family:&apos;trebuchet ms&apos;, verdana, arial;font-family:var(--mermaid-font-family);color:#333}#mermaid-1587845641327 .label text{fill:#333}#mermaid-1587845641327 .node rect,#mermaid-1587845641327 .node circle,#mermaid-1587845641327 .node ellipse,#mermaid-1587845641327 .node polygon,#mermaid-1587845641327 .node path{fill:#ECECFF;stroke:#9370db;stroke-width:1px}#mermaid-1587845641327 .node .label{text-align:center}#mermaid-1587845641327 .node.clickable{cursor:pointer}#mermaid-1587845641327 .arrowheadPath{fill:#333}#mermaid-1587845641327 .edgePath .path{stroke:#333;stroke-width:1.5px}#mermaid-1587845641327 .edgeLabel{background-color:#e8e8e8;text-align:center}#mermaid-1587845641327 .cluster rect{fill:#ffffde;stroke:#aa3;stroke-width:1px}#mermaid-1587845641327 .cluster text{fill:#333}#mermaid-1587845641327 div.mermaidTooltip{position:absolute;text-align:center;max-width:200px;padding:2px;font-family:&apos;trebuchet ms&apos;, verdana, arial;font-family:var(--mermaid-font-family);font-size:12px;background:#ffffde;border:1px solid #aa3;border-radius:2px;pointer-events:none;z-index:100}#mermaid-1587845641327 .actor{stroke:#ccf;fill:#ECECFF}#mermaid-1587845641327 text.actor{fill:#000;stroke:none}#mermaid-1587845641327 .actor-line{stroke:grey}#mermaid-1587845641327 .messageLine0{stroke-width:1.5;stroke-dasharray:&apos;2 2&apos;;stroke:#333}#mermaid-1587845641327 .messageLine1{stroke-width:1.5;stroke-dasharray:&apos;2 2&apos;;stroke:#333}#mermaid-1587845641327 #arrowhead{fill:#333}#mermaid-1587845641327 .sequenceNumber{fill:#fff}#mermaid-1587845641327 #sequencenumber{fill:#333}#mermaid-1587845641327 #crosshead path{fill:#333 !important;stroke:#333 !important}#mermaid-1587845641327 .messageText{fill:#333;stroke:none}#mermaid-1587845641327 .labelBox{stroke:#ccf;fill:#ECECFF}#mermaid-1587845641327 .labelText{fill:#000;stroke:none}#mermaid-1587845641327 .loopText{fill:#000;stroke:none}#mermaid-1587845641327 .loopLine{stroke-width:2;stroke-dasharray:&apos;2 2&apos;;stroke:#ccf}#mermaid-1587845641327 .note{stroke:#aa3;fill:#fff5ad}#mermaid-1587845641327 .noteText{fill:black;stroke:none;font-family:&apos;trebuchet ms&apos;, verdana, arial;font-family:var(--mermaid-font-family);font-size:14px}#mermaid-1587845641327 .activation0{fill:#f4f4f4;stroke:#666}#mermaid-1587845641327 .activation1{fill:#f4f4f4;stroke:#666}#mermaid-1587845641327 .activation2{fill:#f4f4f4;stroke:#666}#mermaid-1587845641327 .mermaid-main-font{font-family:&quot;trebuchet ms&quot;, verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1587845641327 .section{stroke:none;opacity:0.2}#mermaid-1587845641327 .section0{fill:rgba(102,102,255,0.49)}#mermaid-1587845641327 .section2{fill:#fff400}#mermaid-1587845641327 .section1,#mermaid-1587845641327 .section3{fill:#fff;opacity:0.2}#mermaid-1587845641327 .sectionTitle0{fill:#333}#mermaid-1587845641327 .sectionTitle1{fill:#333}#mermaid-1587845641327 .sectionTitle2{fill:#333}#mermaid-1587845641327 .sectionTitle3{fill:#333}#mermaid-1587845641327 .sectionTitle{text-anchor:start;font-size:11px;text-height:14px;font-family:&apos;trebuchet ms&apos;, verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1587845641327 .grid .tick{stroke:#d3d3d3;opacity:0.8;shape-rendering:crispEdges}#mermaid-1587845641327 .grid .tick text{font-family:&apos;trebuchet ms&apos;, verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1587845641327 .grid path{stroke-width:0}#mermaid-1587845641327 .today{fill:none;stroke:red;stroke-width:2px}#mermaid-1587845641327 .task{stroke-width:2}#mermaid-1587845641327 .taskText{text-anchor:middle;font-family:&apos;trebuchet ms&apos;, verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1587845641327 .taskText:not([font-size]){font-size:11px}#mermaid-1587845641327 .taskTextOutsideRight{fill:#000;text-anchor:start;font-size:11px;font-family:&apos;trebuchet ms&apos;, verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1587845641327 .taskTextOutsideLeft{fill:#000;text-anchor:end;font-size:11px}#mermaid-1587845641327 .task.clickable{cursor:pointer}#mermaid-1587845641327 .taskText.clickable{cursor:pointer;fill:#003163 !important;font-weight:bold}#mermaid-1587845641327 .taskTextOutsideLeft.clickable{cursor:pointer;fill:#003163 !important;font-weight:bold}#mermaid-1587845641327 .taskTextOutsideRight.clickable{cursor:pointer;fill:#003163 !important;font-weight:bold}#mermaid-1587845641327 .taskText0,#mermaid-1587845641327 .taskText1,#mermaid-1587845641327 .taskText2,#mermaid-1587845641327 .taskText3{fill:#fff}#mermaid-1587845641327 .task0,#mermaid-1587845641327 .task1,#mermaid-1587845641327 .task2,#mermaid-1587845641327 .task3{fill:#8a90dd;stroke:#534fbc}#mermaid-1587845641327 .taskTextOutside0,#mermaid-1587845641327 .taskTextOutside2{fill:#000}#mermaid-1587845641327 .taskTextOutside1,#mermaid-1587845641327 .taskTextOutside3{fill:#000}#mermaid-1587845641327 .active0,#mermaid-1587845641327 .active1,#mermaid-1587845641327 .active2,#mermaid-1587845641327 .active3{fill:#bfc7ff;stroke:#534fbc}#mermaid-1587845641327 .activeText0,#mermaid-1587845641327 .activeText1,#mermaid-1587845641327 .activeText2,#mermaid-1587845641327 .activeText3{fill:#000 !important}#mermaid-1587845641327 .done0,#mermaid-1587845641327 .done1,#mermaid-1587845641327 .done2,#mermaid-1587845641327 .done3{stroke:grey;fill:#d3d3d3;stroke-width:2}#mermaid-1587845641327 .doneText0,#mermaid-1587845641327 .doneText1,#mermaid-1587845641327 .doneText2,#mermaid-1587845641327 .doneText3{fill:#000 !important}#mermaid-1587845641327 .crit0,#mermaid-1587845641327 .crit1,#mermaid-1587845641327 .crit2,#mermaid-1587845641327 .crit3{stroke:#f88;fill:red;stroke-width:2}#mermaid-1587845641327 .activeCrit0,#mermaid-1587845641327 .activeCrit1,#mermaid-1587845641327 .activeCrit2,#mermaid-1587845641327 .activeCrit3{stroke:#f88;fill:#bfc7ff;stroke-width:2}#mermaid-1587845641327 .doneCrit0,#mermaid-1587845641327 .doneCrit1,#mermaid-1587845641327 .doneCrit2,#mermaid-1587845641327 .doneCrit3{stroke:#f88;fill:#d3d3d3;stroke-width:2;cursor:pointer;shape-rendering:crispEdges}#mermaid-1587845641327 .milestone{transform:rotate(45deg) scale(0.8, 0.8)}#mermaid-1587845641327 .milestoneText{font-style:italic}#mermaid-1587845641327 .doneCritText0,#mermaid-1587845641327 .doneCritText1,#mermaid-1587845641327 .doneCritText2,#mermaid-1587845641327 .doneCritText3{fill:#000 !important}#mermaid-1587845641327 .activeCritText0,#mermaid-1587845641327 .activeCritText1,#mermaid-1587845641327 .activeCritText2,#mermaid-1587845641327 .activeCritText3{fill:#000 !important}#mermaid-1587845641327 .titleText{text-anchor:middle;font-size:18px;fill:#000;font-family:&apos;trebuchet ms&apos;, verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1587845641327 g.classGroup text{fill:#9370db;stroke:none;font-family:&apos;trebuchet ms&apos;, verdana, arial;font-family:var(--mermaid-font-family);font-size:10px}#mermaid-1587845641327 g.classGroup text .title{font-weight:bolder}#mermaid-1587845641327 g.clickable{cursor:pointer}#mermaid-1587845641327 g.classGroup rect{fill:#ECECFF;stroke:#9370db}#mermaid-1587845641327 g.classGroup line{stroke:#9370db;stroke-width:1}#mermaid-1587845641327 .classLabel .box{stroke:none;stroke-width:0;fill:#ECECFF;opacity:0.5}#mermaid-1587845641327 .classLabel .label{fill:#9370db;font-size:10px}#mermaid-1587845641327 .relation{stroke:#9370db;stroke-width:1;fill:none}#mermaid-1587845641327 .dashed-line{stroke-dasharray:3}#mermaid-1587845641327 #compositionStart{fill:#9370db;stroke:#9370db;stroke-width:1}#mermaid-1587845641327 #compositionEnd{fill:#9370db;stroke:#9370db;stroke-width:1}#mermaid-1587845641327 #aggregationStart{fill:#ECECFF;stroke:#9370db;stroke-width:1}#mermaid-1587845641327 #aggregationEnd{fill:#ECECFF;stroke:#9370db;stroke-width:1}#mermaid-1587845641327 #dependencyStart{fill:#9370db;stroke:#9370db;stroke-width:1}#mermaid-1587845641327 #dependencyEnd{fill:#9370db;stroke:#9370db;stroke-width:1}#mermaid-1587845641327 #extensionStart{fill:#9370db;stroke:#9370db;stroke-width:1}#mermaid-1587845641327 #extensionEnd{fill:#9370db;stroke:#9370db;stroke-width:1}#mermaid-1587845641327 .commit-id,#mermaid-1587845641327 .commit-msg,#mermaid-1587845641327 .branch-label{fill:lightgrey;color:lightgrey;font-family:&apos;trebuchet ms&apos;, verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1587845641327 .pieTitleText{text-anchor:middle;font-size:25px;fill:#000;font-family:&apos;trebuchet ms&apos;, verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1587845641327 .slice{font-family:&apos;trebuchet ms&apos;, verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1587845641327 g.stateGroup text{fill:#9370db;stroke:none;font-size:10px;font-family:&apos;trebuchet ms&apos;, verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1587845641327 g.stateGroup text{fill:#9370db;stroke:none;font-size:10px}#mermaid-1587845641327 g.stateGroup .state-title{font-weight:bolder;fill:#000}#mermaid-1587845641327 g.stateGroup rect{fill:#ECECFF;stroke:#9370db}#mermaid-1587845641327 g.stateGroup line{stroke:#9370db;stroke-width:1}#mermaid-1587845641327 .transition{stroke:#9370db;stroke-width:1;fill:none}#mermaid-1587845641327 .stateGroup .composit{fill:white;border-bottom:1px}#mermaid-1587845641327 .stateGroup .alt-composit{fill:#e0e0e0;border-bottom:1px}#mermaid-1587845641327 .state-note{stroke:#aa3;fill:#fff5ad}#mermaid-1587845641327 .state-note text{fill:black;stroke:none;font-size:10px}#mermaid-1587845641327 .stateLabel .box{stroke:none;stroke-width:0;fill:#ECECFF;opacity:0.5}#mermaid-1587845641327 .stateLabel text{fill:#000;font-size:10px;font-weight:bold;font-family:&apos;trebuchet ms&apos;, verdana, arial;font-family:var(--mermaid-font-family)}:root{--mermaid-font-family: &apos;&quot;trebuchet ms&quot;, verdana, arial&apos;;--mermaid-font-family: &quot;Comic Sans MS&quot;, &quot;Comic Sans&quot;, cursive}

:root { --mermaid-font-family: &quot;trebuchet ms&quot;, verdana, arial;}&lt;/style&gt;&lt;style&gt;#mermaid-1587845641327 {
    color: rgb(0, 0, 0);
    font: normal normal 400 normal 16px / normal &quot;trebuchet ms&quot;, verdana, arial;
  }&lt;/style&gt;&lt;g&gt;&lt;/g&gt;&lt;g&gt;&lt;line id=&quot;actor0&quot; x1=&quot;75&quot; y1=&quot;5&quot; x2=&quot;75&quot; y2=&quot;220&quot; class=&quot;actor-line&quot; stroke-width=&quot;0.5px&quot; stroke=&quot;#999&quot;&gt;&lt;/line&gt;&lt;rect x=&quot;0&quot; y=&quot;0&quot; fill=&quot;#eaeaea&quot; stroke=&quot;#666&quot; width=&quot;150&quot; height=&quot;65&quot; rx=&quot;3&quot; ry=&quot;3&quot; class=&quot;actor&quot;&gt;&lt;/rect&gt;&lt;text x=&quot;75&quot; y=&quot;32.5&quot; dominant-baseline=&quot;central&quot; alignment-baseline=&quot;central&quot; class=&quot;actor&quot; style=&quot;text-anchor: middle; font-size: 14px;&quot;&gt;&lt;tspan x=&quot;75&quot; dy=&quot;0&quot;&gt;Client&lt;/tspan&gt;&lt;/text&gt;&lt;/g&gt;&lt;g&gt;&lt;line id=&quot;actor1&quot; x1=&quot;275&quot; y1=&quot;5&quot; x2=&quot;275&quot; y2=&quot;220&quot; class=&quot;actor-line&quot; stroke-width=&quot;0.5px&quot; stroke=&quot;#999&quot;&gt;&lt;/line&gt;&lt;rect x=&quot;200&quot; y=&quot;0&quot; fill=&quot;#eaeaea&quot; stroke=&quot;#666&quot; width=&quot;150&quot; height=&quot;65&quot; rx=&quot;3&quot; ry=&quot;3&quot; class=&quot;actor&quot;&gt;&lt;/rect&gt;&lt;text x=&quot;275&quot; y=&quot;32.5&quot; dominant-baseline=&quot;central&quot; alignment-baseline=&quot;central&quot; class=&quot;actor&quot; style=&quot;text-anchor: middle; font-size: 14px;&quot;&gt;&lt;tspan x=&quot;275&quot; dy=&quot;0&quot;&gt;JumpStart Table&lt;/tspan&gt;&lt;/text&gt;&lt;/g&gt;&lt;g&gt;&lt;line id=&quot;actor2&quot; x1=&quot;475&quot; y1=&quot;5&quot; x2=&quot;475&quot; y2=&quot;220&quot; class=&quot;actor-line&quot; stroke-width=&quot;0.5px&quot; stroke=&quot;#999&quot;&gt;&lt;/line&gt;&lt;rect x=&quot;400&quot; y=&quot;0&quot; fill=&quot;#eaeaea&quot; stroke=&quot;#666&quot; width=&quot;150&quot; height=&quot;65&quot; rx=&quot;3&quot; ry=&quot;3&quot; class=&quot;actor&quot;&gt;&lt;/rect&gt;&lt;text x=&quot;475&quot; y=&quot;32.5&quot; dominant-baseline=&quot;central&quot; alignment-baseline=&quot;central&quot; class=&quot;actor&quot; style=&quot;text-anchor: middle; font-size: 14px;&quot;&gt;&lt;tspan x=&quot;475&quot; dy=&quot;0&quot;&gt;Orchestrator&lt;/tspan&gt;&lt;/text&gt;&lt;/g&gt;&lt;defs&gt;&lt;marker id=&quot;arrowhead&quot; refX=&quot;5&quot; refY=&quot;2&quot; markerWidth=&quot;6&quot; markerHeight=&quot;4&quot; orient=&quot;auto&quot;&gt;&lt;path d=&quot;M 0,0 V 4 L6,2 Z&quot;&gt;&lt;/path&gt;&lt;/marker&gt;&lt;/defs&gt;&lt;defs&gt;&lt;marker id=&quot;crosshead&quot; markerWidth=&quot;15&quot; markerHeight=&quot;8&quot; orient=&quot;auto&quot; refX=&quot;16&quot; refY=&quot;4&quot;&gt;&lt;path fill=&quot;black&quot; stroke=&quot;#000000&quot; stroke-width=&quot;1px&quot; d=&quot;M 9,2 V 6 L16,4 Z&quot; style=&quot;stroke-dasharray: 0, 0;&quot;&gt;&lt;/path&gt;&lt;path fill=&quot;none&quot; stroke=&quot;#000000&quot; stroke-width=&quot;1px&quot; d=&quot;M 0,1 L 6,7 M 6,1 L 0,7&quot; style=&quot;stroke-dasharray: 0, 0;&quot;&gt;&lt;/path&gt;&lt;/marker&gt;&lt;/defs&gt;&lt;defs&gt;&lt;marker id=&quot;sequencenumber&quot; refX=&quot;15&quot; refY=&quot;15&quot; markerWidth=&quot;60&quot; markerHeight=&quot;40&quot; orient=&quot;auto&quot;&gt;&lt;circle cx=&quot;15&quot; cy=&quot;15&quot; r=&quot;6&quot;&gt;&lt;/circle&gt;&lt;/marker&gt;&lt;/defs&gt;&lt;g&gt;&lt;text x=&quot;175&quot; y=&quot;93&quot; class=&quot;messageText&quot; style=&quot;text-anchor: middle;&quot;&gt;Orchestration Details&lt;/text&gt;&lt;line x1=&quot;75&quot; y1=&quot;100&quot; x2=&quot;275&quot; y2=&quot;100&quot; class=&quot;messageLine0&quot; stroke-width=&quot;2&quot; stroke=&quot;black&quot; marker-end=&quot;url(#arrowhead)&quot; style=&quot;fill: none;&quot;&gt;&lt;/line&gt;&lt;/g&gt;&lt;g&gt;&lt;text x=&quot;275&quot; y=&quot;128&quot; class=&quot;messageText&quot; style=&quot;text-anchor: middle;&quot;&gt;Message Queuing failed&lt;/text&gt;&lt;line x1=&quot;75&quot; y1=&quot;135&quot; x2=&quot;475&quot; y2=&quot;135&quot; class=&quot;messageLine1&quot; stroke-width=&quot;2&quot; stroke=&quot;black&quot; marker-end=&quot;url(#crosshead)&quot; style=&quot;stroke-dasharray: 3, 3; fill: none;&quot;&gt;&lt;/line&gt;&lt;/g&gt;&lt;g&gt;&lt;rect x=&quot;0&quot; y=&quot;155&quot; fill=&quot;#eaeaea&quot; stroke=&quot;#666&quot; width=&quot;150&quot; height=&quot;65&quot; rx=&quot;3&quot; ry=&quot;3&quot; class=&quot;actor&quot;&gt;&lt;/rect&gt;&lt;text x=&quot;75&quot; y=&quot;187.5&quot; dominant-baseline=&quot;central&quot; alignment-baseline=&quot;central&quot; class=&quot;actor&quot; style=&quot;text-anchor: middle; font-size: 14px;&quot;&gt;&lt;tspan x=&quot;75&quot; dy=&quot;0&quot;&gt;Client&lt;/tspan&gt;&lt;/text&gt;&lt;/g&gt;&lt;g&gt;&lt;rect x=&quot;200&quot; y=&quot;155&quot; fill=&quot;#eaeaea&quot; stroke=&quot;#666&quot; width=&quot;150&quot; height=&quot;65&quot; rx=&quot;3&quot; ry=&quot;3&quot; class=&quot;actor&quot;&gt;&lt;/rect&gt;&lt;text x=&quot;275&quot; y=&quot;187.5&quot; dominant-baseline=&quot;central&quot; alignment-baseline=&quot;central&quot; class=&quot;actor&quot; style=&quot;text-anchor: middle; font-size: 14px;&quot;&gt;&lt;tspan x=&quot;275&quot; dy=&quot;0&quot;&gt;JumpStart Table&lt;/tspan&gt;&lt;/text&gt;&lt;/g&gt;&lt;g&gt;&lt;rect x=&quot;400&quot; y=&quot;155&quot; fill=&quot;#eaeaea&quot; stroke=&quot;#666&quot; width=&quot;150&quot; height=&quot;65&quot; rx=&quot;3&quot; ry=&quot;3&quot; class=&quot;actor&quot;&gt;&lt;/rect&gt;&lt;text x=&quot;475&quot; y=&quot;187.5&quot; dominant-baseline=&quot;central&quot; alignment-baseline=&quot;central&quot; class=&quot;actor&quot; style=&quot;text-anchor: middle; font-size: 14px;&quot;&gt;&lt;tspan x=&quot;475&quot; dy=&quot;0&quot;&gt;Orchestrator&lt;/tspan&gt;&lt;/text&gt;&lt;/g&gt;&lt;/svg&gt;&lt;/div&gt;
&lt;p&gt;Now, this might happen for a variety of reason, it could be a transient error, or the Client might have encountered an exception which caused the app to close. In a distributed system, it’s expected some nodes might go down.&lt;/p&gt;
&lt;p&gt;When this happens, DTF is an inconsistent state as the JumpStart Table indicates that a task has been scheduled, but in reality, the message to the Service bus has failed. This is a common problem with Distributed Systems and is called the &lt;a href=&quot;https://thoughts-on-java.org/dual-writes/&quot;&gt;Dual Writes&lt;/a&gt; issue. DUal writes leave you with a system with an inconsistent system.&lt;/p&gt;
&lt;p&gt;Thankfully when this happens, the jump start polling comes to the rescue.&lt;/p&gt;
&lt;div class=&quot;mermaid&quot; data-processed=&quot;true&quot;&gt;&lt;svg id=&quot;mermaid-1587845641340&quot; width=&quot;100%&quot; xmlns=&quot;http://www.w3.org/2000/svg&quot; height=&quot;100%&quot; style=&quot;max-width:850px;&quot; viewBox=&quot;-50 -10 850 592&quot;&gt;&lt;style&gt;#mermaid-1587845641340 .label{font-family:&apos;trebuchet ms&apos;, verdana, arial;font-family:var(--mermaid-font-family);color:#333}#mermaid-1587845641340 .label text{fill:#333}#mermaid-1587845641340 .node rect,#mermaid-1587845641340 .node circle,#mermaid-1587845641340 .node ellipse,#mermaid-1587845641340 .node polygon,#mermaid-1587845641340 .node path{fill:#ECECFF;stroke:#9370db;stroke-width:1px}#mermaid-1587845641340 .node .label{text-align:center}#mermaid-1587845641340 .node.clickable{cursor:pointer}#mermaid-1587845641340 .arrowheadPath{fill:#333}#mermaid-1587845641340 .edgePath .path{stroke:#333;stroke-width:1.5px}#mermaid-1587845641340 .edgeLabel{background-color:#e8e8e8;text-align:center}#mermaid-1587845641340 .cluster rect{fill:#ffffde;stroke:#aa3;stroke-width:1px}#mermaid-1587845641340 .cluster text{fill:#333}#mermaid-1587845641340 div.mermaidTooltip{position:absolute;text-align:center;max-width:200px;padding:2px;font-family:&apos;trebuchet ms&apos;, verdana, arial;font-family:var(--mermaid-font-family);font-size:12px;background:#ffffde;border:1px solid #aa3;border-radius:2px;pointer-events:none;z-index:100}#mermaid-1587845641340 .actor{stroke:#ccf;fill:#ECECFF}#mermaid-1587845641340 text.actor{fill:#000;stroke:none}#mermaid-1587845641340 .actor-line{stroke:grey}#mermaid-1587845641340 .messageLine0{stroke-width:1.5;stroke-dasharray:&apos;2 2&apos;;stroke:#333}#mermaid-1587845641340 .messageLine1{stroke-width:1.5;stroke-dasharray:&apos;2 2&apos;;stroke:#333}#mermaid-1587845641340 #arrowhead{fill:#333}#mermaid-1587845641340 .sequenceNumber{fill:#fff}#mermaid-1587845641340 #sequencenumber{fill:#333}#mermaid-1587845641340 #crosshead path{fill:#333 !important;stroke:#333 !important}#mermaid-1587845641340 .messageText{fill:#333;stroke:none}#mermaid-1587845641340 .labelBox{stroke:#ccf;fill:#ECECFF}#mermaid-1587845641340 .labelText{fill:#000;stroke:none}#mermaid-1587845641340 .loopText{fill:#000;stroke:none}#mermaid-1587845641340 .loopLine{stroke-width:2;stroke-dasharray:&apos;2 2&apos;;stroke:#ccf}#mermaid-1587845641340 .note{stroke:#aa3;fill:#fff5ad}#mermaid-1587845641340 .noteText{fill:black;stroke:none;font-family:&apos;trebuchet ms&apos;, verdana, arial;font-family:var(--mermaid-font-family);font-size:14px}#mermaid-1587845641340 .activation0{fill:#f4f4f4;stroke:#666}#mermaid-1587845641340 .activation1{fill:#f4f4f4;stroke:#666}#mermaid-1587845641340 .activation2{fill:#f4f4f4;stroke:#666}#mermaid-1587845641340 .mermaid-main-font{font-family:&quot;trebuchet ms&quot;, verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1587845641340 .section{stroke:none;opacity:0.2}#mermaid-1587845641340 .section0{fill:rgba(102,102,255,0.49)}#mermaid-1587845641340 .section2{fill:#fff400}#mermaid-1587845641340 .section1,#mermaid-1587845641340 .section3{fill:#fff;opacity:0.2}#mermaid-1587845641340 .sectionTitle0{fill:#333}#mermaid-1587845641340 .sectionTitle1{fill:#333}#mermaid-1587845641340 .sectionTitle2{fill:#333}#mermaid-1587845641340 .sectionTitle3{fill:#333}#mermaid-1587845641340 .sectionTitle{text-anchor:start;font-size:11px;text-height:14px;font-family:&apos;trebuchet ms&apos;, verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1587845641340 .grid .tick{stroke:#d3d3d3;opacity:0.8;shape-rendering:crispEdges}#mermaid-1587845641340 .grid .tick text{font-family:&apos;trebuchet ms&apos;, verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1587845641340 .grid path{stroke-width:0}#mermaid-1587845641340 .today{fill:none;stroke:red;stroke-width:2px}#mermaid-1587845641340 .task{stroke-width:2}#mermaid-1587845641340 .taskText{text-anchor:middle;font-family:&apos;trebuchet ms&apos;, verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1587845641340 .taskText:not([font-size]){font-size:11px}#mermaid-1587845641340 .taskTextOutsideRight{fill:#000;text-anchor:start;font-size:11px;font-family:&apos;trebuchet ms&apos;, verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1587845641340 .taskTextOutsideLeft{fill:#000;text-anchor:end;font-size:11px}#mermaid-1587845641340 .task.clickable{cursor:pointer}#mermaid-1587845641340 .taskText.clickable{cursor:pointer;fill:#003163 !important;font-weight:bold}#mermaid-1587845641340 .taskTextOutsideLeft.clickable{cursor:pointer;fill:#003163 !important;font-weight:bold}#mermaid-1587845641340 .taskTextOutsideRight.clickable{cursor:pointer;fill:#003163 !important;font-weight:bold}#mermaid-1587845641340 .taskText0,#mermaid-1587845641340 .taskText1,#mermaid-1587845641340 .taskText2,#mermaid-1587845641340 .taskText3{fill:#fff}#mermaid-1587845641340 .task0,#mermaid-1587845641340 .task1,#mermaid-1587845641340 .task2,#mermaid-1587845641340 .task3{fill:#8a90dd;stroke:#534fbc}#mermaid-1587845641340 .taskTextOutside0,#mermaid-1587845641340 .taskTextOutside2{fill:#000}#mermaid-1587845641340 .taskTextOutside1,#mermaid-1587845641340 .taskTextOutside3{fill:#000}#mermaid-1587845641340 .active0,#mermaid-1587845641340 .active1,#mermaid-1587845641340 .active2,#mermaid-1587845641340 .active3{fill:#bfc7ff;stroke:#534fbc}#mermaid-1587845641340 .activeText0,#mermaid-1587845641340 .activeText1,#mermaid-1587845641340 .activeText2,#mermaid-1587845641340 .activeText3{fill:#000 !important}#mermaid-1587845641340 .done0,#mermaid-1587845641340 .done1,#mermaid-1587845641340 .done2,#mermaid-1587845641340 .done3{stroke:grey;fill:#d3d3d3;stroke-width:2}#mermaid-1587845641340 .doneText0,#mermaid-1587845641340 .doneText1,#mermaid-1587845641340 .doneText2,#mermaid-1587845641340 .doneText3{fill:#000 !important}#mermaid-1587845641340 .crit0,#mermaid-1587845641340 .crit1,#mermaid-1587845641340 .crit2,#mermaid-1587845641340 .crit3{stroke:#f88;fill:red;stroke-width:2}#mermaid-1587845641340 .activeCrit0,#mermaid-1587845641340 .activeCrit1,#mermaid-1587845641340 .activeCrit2,#mermaid-1587845641340 .activeCrit3{stroke:#f88;fill:#bfc7ff;stroke-width:2}#mermaid-1587845641340 .doneCrit0,#mermaid-1587845641340 .doneCrit1,#mermaid-1587845641340 .doneCrit2,#mermaid-1587845641340 .doneCrit3{stroke:#f88;fill:#d3d3d3;stroke-width:2;cursor:pointer;shape-rendering:crispEdges}#mermaid-1587845641340 .milestone{transform:rotate(45deg) scale(0.8, 0.8)}#mermaid-1587845641340 .milestoneText{font-style:italic}#mermaid-1587845641340 .doneCritText0,#mermaid-1587845641340 .doneCritText1,#mermaid-1587845641340 .doneCritText2,#mermaid-1587845641340 .doneCritText3{fill:#000 !important}#mermaid-1587845641340 .activeCritText0,#mermaid-1587845641340 .activeCritText1,#mermaid-1587845641340 .activeCritText2,#mermaid-1587845641340 .activeCritText3{fill:#000 !important}#mermaid-1587845641340 .titleText{text-anchor:middle;font-size:18px;fill:#000;font-family:&apos;trebuchet ms&apos;, verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1587845641340 g.classGroup text{fill:#9370db;stroke:none;font-family:&apos;trebuchet ms&apos;, verdana, arial;font-family:var(--mermaid-font-family);font-size:10px}#mermaid-1587845641340 g.classGroup text .title{font-weight:bolder}#mermaid-1587845641340 g.clickable{cursor:pointer}#mermaid-1587845641340 g.classGroup rect{fill:#ECECFF;stroke:#9370db}#mermaid-1587845641340 g.classGroup line{stroke:#9370db;stroke-width:1}#mermaid-1587845641340 .classLabel .box{stroke:none;stroke-width:0;fill:#ECECFF;opacity:0.5}#mermaid-1587845641340 .classLabel .label{fill:#9370db;font-size:10px}#mermaid-1587845641340 .relation{stroke:#9370db;stroke-width:1;fill:none}#mermaid-1587845641340 .dashed-line{stroke-dasharray:3}#mermaid-1587845641340 #compositionStart{fill:#9370db;stroke:#9370db;stroke-width:1}#mermaid-1587845641340 #compositionEnd{fill:#9370db;stroke:#9370db;stroke-width:1}#mermaid-1587845641340 #aggregationStart{fill:#ECECFF;stroke:#9370db;stroke-width:1}#mermaid-1587845641340 #aggregationEnd{fill:#ECECFF;stroke:#9370db;stroke-width:1}#mermaid-1587845641340 #dependencyStart{fill:#9370db;stroke:#9370db;stroke-width:1}#mermaid-1587845641340 #dependencyEnd{fill:#9370db;stroke:#9370db;stroke-width:1}#mermaid-1587845641340 #extensionStart{fill:#9370db;stroke:#9370db;stroke-width:1}#mermaid-1587845641340 #extensionEnd{fill:#9370db;stroke:#9370db;stroke-width:1}#mermaid-1587845641340 .commit-id,#mermaid-1587845641340 .commit-msg,#mermaid-1587845641340 .branch-label{fill:lightgrey;color:lightgrey;font-family:&apos;trebuchet ms&apos;, verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1587845641340 .pieTitleText{text-anchor:middle;font-size:25px;fill:#000;font-family:&apos;trebuchet ms&apos;, verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1587845641340 .slice{font-family:&apos;trebuchet ms&apos;, verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1587845641340 g.stateGroup text{fill:#9370db;stroke:none;font-size:10px;font-family:&apos;trebuchet ms&apos;, verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1587845641340 g.stateGroup text{fill:#9370db;stroke:none;font-size:10px}#mermaid-1587845641340 g.stateGroup .state-title{font-weight:bolder;fill:#000}#mermaid-1587845641340 g.stateGroup rect{fill:#ECECFF;stroke:#9370db}#mermaid-1587845641340 g.stateGroup line{stroke:#9370db;stroke-width:1}#mermaid-1587845641340 .transition{stroke:#9370db;stroke-width:1;fill:none}#mermaid-1587845641340 .stateGroup .composit{fill:white;border-bottom:1px}#mermaid-1587845641340 .stateGroup .alt-composit{fill:#e0e0e0;border-bottom:1px}#mermaid-1587845641340 .state-note{stroke:#aa3;fill:#fff5ad}#mermaid-1587845641340 .state-note text{fill:black;stroke:none;font-size:10px}#mermaid-1587845641340 .stateLabel .box{stroke:none;stroke-width:0;fill:#ECECFF;opacity:0.5}#mermaid-1587845641340 .stateLabel text{fill:#000;font-size:10px;font-weight:bold;font-family:&apos;trebuchet ms&apos;, verdana, arial;font-family:var(--mermaid-font-family)}:root{--mermaid-font-family: &apos;&quot;trebuchet ms&quot;, verdana, arial&apos;;--mermaid-font-family: &quot;Comic Sans MS&quot;, &quot;Comic Sans&quot;, cursive}

:root { --mermaid-font-family: &quot;trebuchet ms&quot;, verdana, arial;}&lt;/style&gt;&lt;style&gt;#mermaid-1587845641340 {
    color: rgb(0, 0, 0);
    font: normal normal 400 normal 16px / normal &quot;trebuchet ms&quot;, verdana, arial;
  }&lt;/style&gt;&lt;g&gt;&lt;/g&gt;&lt;g&gt;&lt;line id=&quot;actor0&quot; x1=&quot;75&quot; y1=&quot;5&quot; x2=&quot;75&quot; y2=&quot;581&quot; class=&quot;actor-line&quot; stroke-width=&quot;0.5px&quot; stroke=&quot;#999&quot;&gt;&lt;/line&gt;&lt;rect x=&quot;0&quot; y=&quot;0&quot; fill=&quot;#eaeaea&quot; stroke=&quot;#666&quot; width=&quot;150&quot; height=&quot;65&quot; rx=&quot;3&quot; ry=&quot;3&quot; class=&quot;actor&quot;&gt;&lt;/rect&gt;&lt;text x=&quot;75&quot; y=&quot;32.5&quot; dominant-baseline=&quot;central&quot; alignment-baseline=&quot;central&quot; class=&quot;actor&quot; style=&quot;text-anchor: middle; font-size: 14px;&quot;&gt;&lt;tspan x=&quot;75&quot; dy=&quot;0&quot;&gt;Hub&lt;/tspan&gt;&lt;/text&gt;&lt;/g&gt;&lt;g&gt;&lt;line id=&quot;actor1&quot; x1=&quot;275&quot; y1=&quot;5&quot; x2=&quot;275&quot; y2=&quot;581&quot; class=&quot;actor-line&quot; stroke-width=&quot;0.5px&quot; stroke=&quot;#999&quot;&gt;&lt;/line&gt;&lt;rect x=&quot;200&quot; y=&quot;0&quot; fill=&quot;#eaeaea&quot; stroke=&quot;#666&quot; width=&quot;150&quot; height=&quot;65&quot; rx=&quot;3&quot; ry=&quot;3&quot; class=&quot;actor&quot;&gt;&lt;/rect&gt;&lt;text x=&quot;275&quot; y=&quot;32.5&quot; dominant-baseline=&quot;central&quot; alignment-baseline=&quot;central&quot; class=&quot;actor&quot; style=&quot;text-anchor: middle; font-size: 14px;&quot;&gt;&lt;tspan x=&quot;275&quot; dy=&quot;0&quot;&gt;JumpStart Table&lt;/tspan&gt;&lt;/text&gt;&lt;/g&gt;&lt;g&gt;&lt;line id=&quot;actor2&quot; x1=&quot;475&quot; y1=&quot;5&quot; x2=&quot;475&quot; y2=&quot;581&quot; class=&quot;actor-line&quot; stroke-width=&quot;0.5px&quot; stroke=&quot;#999&quot;&gt;&lt;/line&gt;&lt;rect x=&quot;400&quot; y=&quot;0&quot; fill=&quot;#eaeaea&quot; stroke=&quot;#666&quot; width=&quot;150&quot; height=&quot;65&quot; rx=&quot;3&quot; ry=&quot;3&quot; class=&quot;actor&quot;&gt;&lt;/rect&gt;&lt;text x=&quot;475&quot; y=&quot;32.5&quot; dominant-baseline=&quot;central&quot; alignment-baseline=&quot;central&quot; class=&quot;actor&quot; style=&quot;text-anchor: middle; font-size: 14px;&quot;&gt;&lt;tspan x=&quot;475&quot; dy=&quot;0&quot;&gt;InstanceHistory Table&lt;/tspan&gt;&lt;/text&gt;&lt;/g&gt;&lt;g&gt;&lt;line id=&quot;actor3&quot; x1=&quot;675&quot; y1=&quot;5&quot; x2=&quot;675&quot; y2=&quot;581&quot; class=&quot;actor-line&quot; stroke-width=&quot;0.5px&quot; stroke=&quot;#999&quot;&gt;&lt;/line&gt;&lt;rect x=&quot;600&quot; y=&quot;0&quot; fill=&quot;#eaeaea&quot; stroke=&quot;#666&quot; width=&quot;150&quot; height=&quot;65&quot; rx=&quot;3&quot; ry=&quot;3&quot; class=&quot;actor&quot;&gt;&lt;/rect&gt;&lt;text x=&quot;675&quot; y=&quot;32.5&quot; dominant-baseline=&quot;central&quot; alignment-baseline=&quot;central&quot; class=&quot;actor&quot; style=&quot;text-anchor: middle; font-size: 14px;&quot;&gt;&lt;tspan x=&quot;675&quot; dy=&quot;0&quot;&gt;Orchestrator&lt;/tspan&gt;&lt;/text&gt;&lt;/g&gt;&lt;defs&gt;&lt;marker id=&quot;arrowhead&quot; refX=&quot;5&quot; refY=&quot;2&quot; markerWidth=&quot;6&quot; markerHeight=&quot;4&quot; orient=&quot;auto&quot;&gt;&lt;path d=&quot;M 0,0 V 4 L6,2 Z&quot;&gt;&lt;/path&gt;&lt;/marker&gt;&lt;/defs&gt;&lt;defs&gt;&lt;marker id=&quot;crosshead&quot; markerWidth=&quot;15&quot; markerHeight=&quot;8&quot; orient=&quot;auto&quot; refX=&quot;16&quot; refY=&quot;4&quot;&gt;&lt;path fill=&quot;black&quot; stroke=&quot;#000000&quot; stroke-width=&quot;1px&quot; d=&quot;M 9,2 V 6 L16,4 Z&quot; style=&quot;stroke-dasharray: 0, 0;&quot;&gt;&lt;/path&gt;&lt;path fill=&quot;none&quot; stroke=&quot;#000000&quot; stroke-width=&quot;1px&quot; d=&quot;M 0,1 L 6,7 M 6,1 L 0,7&quot; style=&quot;stroke-dasharray: 0, 0;&quot;&gt;&lt;/path&gt;&lt;/marker&gt;&lt;/defs&gt;&lt;defs&gt;&lt;marker id=&quot;sequencenumber&quot; refX=&quot;15&quot; refY=&quot;15&quot; markerWidth=&quot;60&quot; markerHeight=&quot;40&quot; orient=&quot;auto&quot;&gt;&lt;circle cx=&quot;15&quot; cy=&quot;15&quot; r=&quot;6&quot;&gt;&lt;/circle&gt;&lt;/marker&gt;&lt;/defs&gt;&lt;g&gt;&lt;text x=&quot;175&quot; y=&quot;118&quot; class=&quot;messageText&quot; style=&quot;text-anchor: middle;&quot;&gt;Finds an entry&lt;/text&gt;&lt;line x1=&quot;75&quot; y1=&quot;125&quot; x2=&quot;275&quot; y2=&quot;125&quot; class=&quot;messageLine1&quot; stroke-width=&quot;2&quot; stroke=&quot;black&quot; style=&quot;stroke-dasharray: 3, 3; fill: none;&quot;&gt;&lt;/line&gt;&lt;/g&gt;&lt;g&gt;&lt;text x=&quot;275&quot; y=&quot;153&quot; class=&quot;messageText&quot; style=&quot;text-anchor: middle;&quot;&gt;Checks if the Orchestration corresponding to the entry is present&lt;/text&gt;&lt;line x1=&quot;75&quot; y1=&quot;160&quot; x2=&quot;475&quot; y2=&quot;160&quot; class=&quot;messageLine0&quot; stroke-width=&quot;2&quot; stroke=&quot;black&quot; marker-end=&quot;url(#arrowhead)&quot; style=&quot;fill: none;&quot;&gt;&lt;/line&gt;&lt;/g&gt;&lt;g&gt;&lt;text x=&quot;175&quot; y=&quot;188&quot; class=&quot;messageText&quot; style=&quot;text-anchor: middle;&quot;&gt;If currentTime - startTime &amp;lt; 10 minutes , no-op.&lt;/text&gt;&lt;line x1=&quot;75&quot; y1=&quot;195&quot; x2=&quot;275&quot; y2=&quot;195&quot; class=&quot;messageLine0&quot; stroke-width=&quot;2&quot; stroke=&quot;black&quot; marker-end=&quot;url(#arrowhead)&quot; style=&quot;fill: none;&quot;&gt;&lt;/line&gt;&lt;/g&gt;&lt;g&gt;&lt;line x1=&quot;65&quot; y1=&quot;75&quot; x2=&quot;485&quot; y2=&quot;75&quot; class=&quot;loopLine&quot;&gt;&lt;/line&gt;&lt;line x1=&quot;485&quot; y1=&quot;75&quot; x2=&quot;485&quot; y2=&quot;205&quot; class=&quot;loopLine&quot;&gt;&lt;/line&gt;&lt;line x1=&quot;65&quot; y1=&quot;205&quot; x2=&quot;485&quot; y2=&quot;205&quot; class=&quot;loopLine&quot;&gt;&lt;/line&gt;&lt;line x1=&quot;65&quot; y1=&quot;75&quot; x2=&quot;65&quot; y2=&quot;205&quot; class=&quot;loopLine&quot;&gt;&lt;/line&gt;&lt;polygon points=&quot;65,75 115,75 115,88 106.6,95 65,95&quot; class=&quot;labelBox&quot;&gt;&lt;/polygon&gt;&lt;text x=&quot;72.5&quot; y=&quot;90&quot; class=&quot;labelText&quot;&gt;&lt;tspan x=&quot;72.5&quot;&gt;loop&lt;/tspan&gt;&lt;/text&gt;&lt;text x=&quot;275&quot; y=&quot;90&quot; class=&quot;loopText&quot; style=&quot;text-anchor: middle;&quot;&gt;&lt;tspan x=&quot;275&quot;&gt;[ Every 5 Seconds ]&lt;/tspan&gt;&lt;/text&gt;&lt;/g&gt;&lt;g&gt;&lt;rect x=&quot;50&quot; y=&quot;215&quot; fill=&quot;#EDF2AE&quot; stroke=&quot;#666&quot; width=&quot;250&quot; height=&quot;36&quot; rx=&quot;0&quot; ry=&quot;0&quot; class=&quot;note&quot;&gt;&lt;/rect&gt;&lt;text x=&quot;46&quot; y=&quot;239&quot; class=&quot;noteText&quot;&gt;&lt;tspan x=&quot;66&quot;&gt;After 10 minutes of waiting&lt;/tspan&gt;&lt;/text&gt;&lt;/g&gt;&lt;g&gt;&lt;text x=&quot;175&quot; y=&quot;279&quot; class=&quot;messageText&quot; style=&quot;text-anchor: middle;&quot;&gt;Gets the entry from the jump start table &amp;amp; creates the message&lt;/text&gt;&lt;line x1=&quot;75&quot; y1=&quot;286&quot; x2=&quot;275&quot; y2=&quot;286&quot; class=&quot;messageLine0&quot; stroke-width=&quot;2&quot; stroke=&quot;black&quot; marker-end=&quot;url(#arrowhead)&quot; style=&quot;fill: none;&quot;&gt;&lt;/line&gt;&lt;/g&gt;&lt;g&gt;&lt;text x=&quot;375&quot; y=&quot;314&quot; class=&quot;messageText&quot; style=&quot;text-anchor: middle;&quot;&gt;ExecutionStarted&lt;/text&gt;&lt;line x1=&quot;75&quot; y1=&quot;321&quot; x2=&quot;675&quot; y2=&quot;321&quot; class=&quot;messageLine1&quot; stroke-width=&quot;2&quot; stroke=&quot;black&quot; marker-end=&quot;url(#arrowhead)&quot; style=&quot;stroke-dasharray: 3, 3; fill: none;&quot;&gt;&lt;/line&gt;&lt;/g&gt;&lt;g&gt;&lt;text x=&quot;175&quot; y=&quot;349&quot; class=&quot;messageText&quot; style=&quot;text-anchor: middle;&quot;&gt;Updates the entity with the new timestamp&lt;/text&gt;&lt;line x1=&quot;75&quot; y1=&quot;356&quot; x2=&quot;275&quot; y2=&quot;356&quot; class=&quot;messageLine0&quot; stroke-width=&quot;2&quot; stroke=&quot;black&quot; marker-end=&quot;url(#arrowhead)&quot; style=&quot;fill: none;&quot;&gt;&lt;/line&gt;&lt;/g&gt;&lt;g&gt;&lt;text x=&quot;375&quot; y=&quot;384&quot; class=&quot;messageText&quot; style=&quot;text-anchor: middle;&quot;&gt;ExecutionStarted&lt;/text&gt;&lt;line x1=&quot;675&quot; y1=&quot;391&quot; x2=&quot;75&quot; y2=&quot;391&quot; class=&quot;messageLine1&quot; stroke-width=&quot;2&quot; stroke=&quot;black&quot; style=&quot;stroke-dasharray: 3, 3; fill: none;&quot;&gt;&lt;/line&gt;&lt;/g&gt;&lt;g&gt;&lt;text x=&quot;175&quot; y=&quot;419&quot; class=&quot;messageText&quot; style=&quot;text-anchor: middle;&quot;&gt;Finds an entry&lt;/text&gt;&lt;line x1=&quot;75&quot; y1=&quot;426&quot; x2=&quot;275&quot; y2=&quot;426&quot; class=&quot;messageLine1&quot; stroke-width=&quot;2&quot; stroke=&quot;black&quot; style=&quot;stroke-dasharray: 3, 3; fill: none;&quot;&gt;&lt;/line&gt;&lt;/g&gt;&lt;g&gt;&lt;text x=&quot;275&quot; y=&quot;454&quot; class=&quot;messageText&quot; style=&quot;text-anchor: middle;&quot;&gt;Checks if the Orchestration corresponding to the entry is present&lt;/text&gt;&lt;line x1=&quot;75&quot; y1=&quot;461&quot; x2=&quot;475&quot; y2=&quot;461&quot; class=&quot;messageLine0&quot; stroke-width=&quot;2&quot; stroke=&quot;black&quot; marker-end=&quot;url(#arrowhead)&quot; style=&quot;fill: none;&quot;&gt;&lt;/line&gt;&lt;/g&gt;&lt;g&gt;&lt;text x=&quot;175&quot; y=&quot;489&quot; class=&quot;messageText&quot; style=&quot;text-anchor: middle;&quot;&gt;Deletes the entry&lt;/text&gt;&lt;line x1=&quot;75&quot; y1=&quot;496&quot; x2=&quot;275&quot; y2=&quot;496&quot; class=&quot;messageLine0&quot; stroke-width=&quot;2&quot; stroke=&quot;black&quot; marker-end=&quot;url(#arrowhead)&quot; style=&quot;fill: none;&quot;&gt;&lt;/line&gt;&lt;/g&gt;&lt;g&gt;&lt;rect x=&quot;0&quot; y=&quot;516&quot; fill=&quot;#eaeaea&quot; stroke=&quot;#666&quot; width=&quot;150&quot; height=&quot;65&quot; rx=&quot;3&quot; ry=&quot;3&quot; class=&quot;actor&quot;&gt;&lt;/rect&gt;&lt;text x=&quot;75&quot; y=&quot;548.5&quot; dominant-baseline=&quot;central&quot; alignment-baseline=&quot;central&quot; class=&quot;actor&quot; style=&quot;text-anchor: middle; font-size: 14px;&quot;&gt;&lt;tspan x=&quot;75&quot; dy=&quot;0&quot;&gt;Hub&lt;/tspan&gt;&lt;/text&gt;&lt;/g&gt;&lt;g&gt;&lt;rect x=&quot;200&quot; y=&quot;516&quot; fill=&quot;#eaeaea&quot; stroke=&quot;#666&quot; width=&quot;150&quot; height=&quot;65&quot; rx=&quot;3&quot; ry=&quot;3&quot; class=&quot;actor&quot;&gt;&lt;/rect&gt;&lt;text x=&quot;275&quot; y=&quot;548.5&quot; dominant-baseline=&quot;central&quot; alignment-baseline=&quot;central&quot; class=&quot;actor&quot; style=&quot;text-anchor: middle; font-size: 14px;&quot;&gt;&lt;tspan x=&quot;275&quot; dy=&quot;0&quot;&gt;JumpStart Table&lt;/tspan&gt;&lt;/text&gt;&lt;/g&gt;&lt;g&gt;&lt;rect x=&quot;400&quot; y=&quot;516&quot; fill=&quot;#eaeaea&quot; stroke=&quot;#666&quot; width=&quot;150&quot; height=&quot;65&quot; rx=&quot;3&quot; ry=&quot;3&quot; class=&quot;actor&quot;&gt;&lt;/rect&gt;&lt;text x=&quot;475&quot; y=&quot;548.5&quot; dominant-baseline=&quot;central&quot; alignment-baseline=&quot;central&quot; class=&quot;actor&quot; style=&quot;text-anchor: middle; font-size: 14px;&quot;&gt;&lt;tspan x=&quot;475&quot; dy=&quot;0&quot;&gt;InstanceHistory Table&lt;/tspan&gt;&lt;/text&gt;&lt;/g&gt;&lt;g&gt;&lt;rect x=&quot;600&quot; y=&quot;516&quot; fill=&quot;#eaeaea&quot; stroke=&quot;#666&quot; width=&quot;150&quot; height=&quot;65&quot; rx=&quot;3&quot; ry=&quot;3&quot; class=&quot;actor&quot;&gt;&lt;/rect&gt;&lt;text x=&quot;675&quot; y=&quot;548.5&quot; dominant-baseline=&quot;central&quot; alignment-baseline=&quot;central&quot; class=&quot;actor&quot; style=&quot;text-anchor: middle; font-size: 14px;&quot;&gt;&lt;tspan x=&quot;675&quot; dy=&quot;0&quot;&gt;Orchestrator&lt;/tspan&gt;&lt;/text&gt;&lt;/g&gt;&lt;/svg&gt;&lt;/div&gt;
&lt;p&gt;The Hub looks for situations where the entity is present in the Jump Start table but has not arrived through Service Bus for 10 minutes. Then it queues the ExecutionStarted event itself. It keeps repeating this process and trying to jump-start the orchestration until it finds the orchestration in the instanceHistory table&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;The jump start is not a replacement for the Service Bus. It is only protecting against the dual write situation by becoming eventually consistent in case of a failure. Of course, you only have this problem when instance tracking is enabled. If you do not have an Azure Table storage , then you would not run into the Dual Write scenarios at all.&lt;/li&gt;
&lt;/ol&gt;</content:encoded></item><item><title><![CDATA[Durable Task Framework Internals - Part 2 (The curious case of Orchestrations)]]></title><description><![CDATA[Durable Task Framework Series This post is part 2 of a series of posts on DTF. Durable Task Framework Internals - Part 1 (Dataflow and…]]></description><link>https://abhikmitra.github.io/blog/durable-task-2/</link><guid isPermaLink="false">https://abhikmitra.github.io/blog/durable-task-2/</guid><pubDate>Fri, 24 Apr 2020 18:00:00 GMT</pubDate><content:encoded>&lt;h3&gt;Durable Task Framework Series&lt;/h3&gt;
&lt;p&gt;This post is &lt;strong&gt;part 2&lt;/strong&gt; of a series of posts on DTF.&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;a href=&quot;https://abhikmitra.github.io/blog/durable-task/&quot;&gt;Durable Task Framework Internals - Part 1 (Dataflow and Reliability)&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://abhikmitra.github.io/blog/durable-task-2/&quot;&gt;Durable Task Framework Internals - Part 2 (The curious case of Orchestrations)&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://abhikmitra.github.io/blog/durable-task-3/&quot;&gt;Durable Task Framework Internals - Part 3 (Tracker Queue, Instance History, and JumpStart)&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://abhikmitra.github.io/blog/durable-task-4/&quot;&gt;Durable Task Framework Internals - Part 4 (Terminated Orchestrations &amp;#x26; Middlewares)&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;Do you think there is more that I should cover or something I should fix ? Please raise an &lt;a href=&quot;https://github.com/abhikmitra/blog/issues&quot;&gt;issue&lt;/a&gt; and let me know&lt;/p&gt;
&lt;hr&gt;
&lt;h3&gt;Multi Activity Orchestrations&lt;/h3&gt;
&lt;p&gt;We will see whats the process of  Orchestration in case of multiple activities as that’s what you will frequently have.&lt;/p&gt;
&lt;p&gt;Here is a sequence diagram of the happy path with an orchestration comprising of two activitties &lt;code class=&quot;language-text&quot;&gt;TaskActivity1&lt;/code&gt; and &lt;code class=&quot;language-text&quot;&gt;TaskActivity2&lt;/code&gt;&lt;/p&gt;
&lt;div class=&quot;mermaid&quot; data-processed=&quot;true&quot;&gt;&lt;svg id=&quot;mermaid-1587845642139&quot; width=&quot;100%&quot; xmlns=&quot;http://www.w3.org/2000/svg&quot; height=&quot;100%&quot; style=&quot;max-width:1450px;&quot; viewBox=&quot;-50 -10 1450 881&quot;&gt;&lt;rect x=&quot;465&quot; y=&quot;695&quot; fill=&quot;rgb(255, 255, 0, 0.5)&quot; width=&quot;220&quot; height=&quot;55&quot; class=&quot;rect&quot;&gt;&lt;/rect&gt;&lt;rect x=&quot;465&quot; y=&quot;525&quot; fill=&quot;rgb(255, 255, 0, 0.5)&quot; width=&quot;220&quot; height=&quot;55&quot; class=&quot;rect&quot;&gt;&lt;/rect&gt;&lt;rect x=&quot;465&quot; y=&quot;145&quot; fill=&quot;rgb(255, 255, 0, 0.5)&quot; width=&quot;220&quot; height=&quot;55&quot; class=&quot;rect&quot;&gt;&lt;/rect&gt;&lt;style&gt;#mermaid-1587845642139 .label{font-family:&apos;trebuchet ms&apos;, verdana, arial;font-family:var(--mermaid-font-family);color:#333}#mermaid-1587845642139 .label text{fill:#333}#mermaid-1587845642139 .node rect,#mermaid-1587845642139 .node circle,#mermaid-1587845642139 .node ellipse,#mermaid-1587845642139 .node polygon,#mermaid-1587845642139 .node path{fill:#ECECFF;stroke:#9370db;stroke-width:1px}#mermaid-1587845642139 .node .label{text-align:center}#mermaid-1587845642139 .node.clickable{cursor:pointer}#mermaid-1587845642139 .arrowheadPath{fill:#333}#mermaid-1587845642139 .edgePath .path{stroke:#333;stroke-width:1.5px}#mermaid-1587845642139 .edgeLabel{background-color:#e8e8e8;text-align:center}#mermaid-1587845642139 .cluster rect{fill:#ffffde;stroke:#aa3;stroke-width:1px}#mermaid-1587845642139 .cluster text{fill:#333}#mermaid-1587845642139 div.mermaidTooltip{position:absolute;text-align:center;max-width:200px;padding:2px;font-family:&apos;trebuchet ms&apos;, verdana, arial;font-family:var(--mermaid-font-family);font-size:12px;background:#ffffde;border:1px solid #aa3;border-radius:2px;pointer-events:none;z-index:100}#mermaid-1587845642139 .actor{stroke:#ccf;fill:#ECECFF}#mermaid-1587845642139 text.actor{fill:#000;stroke:none}#mermaid-1587845642139 .actor-line{stroke:grey}#mermaid-1587845642139 .messageLine0{stroke-width:1.5;stroke-dasharray:&apos;2 2&apos;;stroke:#333}#mermaid-1587845642139 .messageLine1{stroke-width:1.5;stroke-dasharray:&apos;2 2&apos;;stroke:#333}#mermaid-1587845642139 #arrowhead{fill:#333}#mermaid-1587845642139 .sequenceNumber{fill:#fff}#mermaid-1587845642139 #sequencenumber{fill:#333}#mermaid-1587845642139 #crosshead path{fill:#333 !important;stroke:#333 !important}#mermaid-1587845642139 .messageText{fill:#333;stroke:none}#mermaid-1587845642139 .labelBox{stroke:#ccf;fill:#ECECFF}#mermaid-1587845642139 .labelText{fill:#000;stroke:none}#mermaid-1587845642139 .loopText{fill:#000;stroke:none}#mermaid-1587845642139 .loopLine{stroke-width:2;stroke-dasharray:&apos;2 2&apos;;stroke:#ccf}#mermaid-1587845642139 .note{stroke:#aa3;fill:#fff5ad}#mermaid-1587845642139 .noteText{fill:black;stroke:none;font-family:&apos;trebuchet ms&apos;, verdana, arial;font-family:var(--mermaid-font-family);font-size:14px}#mermaid-1587845642139 .activation0{fill:#f4f4f4;stroke:#666}#mermaid-1587845642139 .activation1{fill:#f4f4f4;stroke:#666}#mermaid-1587845642139 .activation2{fill:#f4f4f4;stroke:#666}#mermaid-1587845642139 .mermaid-main-font{font-family:&quot;trebuchet ms&quot;, verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1587845642139 .section{stroke:none;opacity:0.2}#mermaid-1587845642139 .section0{fill:rgba(102,102,255,0.49)}#mermaid-1587845642139 .section2{fill:#fff400}#mermaid-1587845642139 .section1,#mermaid-1587845642139 .section3{fill:#fff;opacity:0.2}#mermaid-1587845642139 .sectionTitle0{fill:#333}#mermaid-1587845642139 .sectionTitle1{fill:#333}#mermaid-1587845642139 .sectionTitle2{fill:#333}#mermaid-1587845642139 .sectionTitle3{fill:#333}#mermaid-1587845642139 .sectionTitle{text-anchor:start;font-size:11px;text-height:14px;font-family:&apos;trebuchet ms&apos;, verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1587845642139 .grid .tick{stroke:#d3d3d3;opacity:0.8;shape-rendering:crispEdges}#mermaid-1587845642139 .grid .tick text{font-family:&apos;trebuchet ms&apos;, verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1587845642139 .grid path{stroke-width:0}#mermaid-1587845642139 .today{fill:none;stroke:red;stroke-width:2px}#mermaid-1587845642139 .task{stroke-width:2}#mermaid-1587845642139 .taskText{text-anchor:middle;font-family:&apos;trebuchet ms&apos;, verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1587845642139 .taskText:not([font-size]){font-size:11px}#mermaid-1587845642139 .taskTextOutsideRight{fill:#000;text-anchor:start;font-size:11px;font-family:&apos;trebuchet ms&apos;, verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1587845642139 .taskTextOutsideLeft{fill:#000;text-anchor:end;font-size:11px}#mermaid-1587845642139 .task.clickable{cursor:pointer}#mermaid-1587845642139 .taskText.clickable{cursor:pointer;fill:#003163 !important;font-weight:bold}#mermaid-1587845642139 .taskTextOutsideLeft.clickable{cursor:pointer;fill:#003163 !important;font-weight:bold}#mermaid-1587845642139 .taskTextOutsideRight.clickable{cursor:pointer;fill:#003163 !important;font-weight:bold}#mermaid-1587845642139 .taskText0,#mermaid-1587845642139 .taskText1,#mermaid-1587845642139 .taskText2,#mermaid-1587845642139 .taskText3{fill:#fff}#mermaid-1587845642139 .task0,#mermaid-1587845642139 .task1,#mermaid-1587845642139 .task2,#mermaid-1587845642139 .task3{fill:#8a90dd;stroke:#534fbc}#mermaid-1587845642139 .taskTextOutside0,#mermaid-1587845642139 .taskTextOutside2{fill:#000}#mermaid-1587845642139 .taskTextOutside1,#mermaid-1587845642139 .taskTextOutside3{fill:#000}#mermaid-1587845642139 .active0,#mermaid-1587845642139 .active1,#mermaid-1587845642139 .active2,#mermaid-1587845642139 .active3{fill:#bfc7ff;stroke:#534fbc}#mermaid-1587845642139 .activeText0,#mermaid-1587845642139 .activeText1,#mermaid-1587845642139 .activeText2,#mermaid-1587845642139 .activeText3{fill:#000 !important}#mermaid-1587845642139 .done0,#mermaid-1587845642139 .done1,#mermaid-1587845642139 .done2,#mermaid-1587845642139 .done3{stroke:grey;fill:#d3d3d3;stroke-width:2}#mermaid-1587845642139 .doneText0,#mermaid-1587845642139 .doneText1,#mermaid-1587845642139 .doneText2,#mermaid-1587845642139 .doneText3{fill:#000 !important}#mermaid-1587845642139 .crit0,#mermaid-1587845642139 .crit1,#mermaid-1587845642139 .crit2,#mermaid-1587845642139 .crit3{stroke:#f88;fill:red;stroke-width:2}#mermaid-1587845642139 .activeCrit0,#mermaid-1587845642139 .activeCrit1,#mermaid-1587845642139 .activeCrit2,#mermaid-1587845642139 .activeCrit3{stroke:#f88;fill:#bfc7ff;stroke-width:2}#mermaid-1587845642139 .doneCrit0,#mermaid-1587845642139 .doneCrit1,#mermaid-1587845642139 .doneCrit2,#mermaid-1587845642139 .doneCrit3{stroke:#f88;fill:#d3d3d3;stroke-width:2;cursor:pointer;shape-rendering:crispEdges}#mermaid-1587845642139 .milestone{transform:rotate(45deg) scale(0.8, 0.8)}#mermaid-1587845642139 .milestoneText{font-style:italic}#mermaid-1587845642139 .doneCritText0,#mermaid-1587845642139 .doneCritText1,#mermaid-1587845642139 .doneCritText2,#mermaid-1587845642139 .doneCritText3{fill:#000 !important}#mermaid-1587845642139 .activeCritText0,#mermaid-1587845642139 .activeCritText1,#mermaid-1587845642139 .activeCritText2,#mermaid-1587845642139 .activeCritText3{fill:#000 !important}#mermaid-1587845642139 .titleText{text-anchor:middle;font-size:18px;fill:#000;font-family:&apos;trebuchet ms&apos;, verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1587845642139 g.classGroup text{fill:#9370db;stroke:none;font-family:&apos;trebuchet ms&apos;, verdana, arial;font-family:var(--mermaid-font-family);font-size:10px}#mermaid-1587845642139 g.classGroup text .title{font-weight:bolder}#mermaid-1587845642139 g.clickable{cursor:pointer}#mermaid-1587845642139 g.classGroup rect{fill:#ECECFF;stroke:#9370db}#mermaid-1587845642139 g.classGroup line{stroke:#9370db;stroke-width:1}#mermaid-1587845642139 .classLabel .box{stroke:none;stroke-width:0;fill:#ECECFF;opacity:0.5}#mermaid-1587845642139 .classLabel .label{fill:#9370db;font-size:10px}#mermaid-1587845642139 .relation{stroke:#9370db;stroke-width:1;fill:none}#mermaid-1587845642139 .dashed-line{stroke-dasharray:3}#mermaid-1587845642139 #compositionStart{fill:#9370db;stroke:#9370db;stroke-width:1}#mermaid-1587845642139 #compositionEnd{fill:#9370db;stroke:#9370db;stroke-width:1}#mermaid-1587845642139 #aggregationStart{fill:#ECECFF;stroke:#9370db;stroke-width:1}#mermaid-1587845642139 #aggregationEnd{fill:#ECECFF;stroke:#9370db;stroke-width:1}#mermaid-1587845642139 #dependencyStart{fill:#9370db;stroke:#9370db;stroke-width:1}#mermaid-1587845642139 #dependencyEnd{fill:#9370db;stroke:#9370db;stroke-width:1}#mermaid-1587845642139 #extensionStart{fill:#9370db;stroke:#9370db;stroke-width:1}#mermaid-1587845642139 #extensionEnd{fill:#9370db;stroke:#9370db;stroke-width:1}#mermaid-1587845642139 .commit-id,#mermaid-1587845642139 .commit-msg,#mermaid-1587845642139 .branch-label{fill:lightgrey;color:lightgrey;font-family:&apos;trebuchet ms&apos;, verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1587845642139 .pieTitleText{text-anchor:middle;font-size:25px;fill:#000;font-family:&apos;trebuchet ms&apos;, verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1587845642139 .slice{font-family:&apos;trebuchet ms&apos;, verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1587845642139 g.stateGroup text{fill:#9370db;stroke:none;font-size:10px;font-family:&apos;trebuchet ms&apos;, verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1587845642139 g.stateGroup text{fill:#9370db;stroke:none;font-size:10px}#mermaid-1587845642139 g.stateGroup .state-title{font-weight:bolder;fill:#000}#mermaid-1587845642139 g.stateGroup rect{fill:#ECECFF;stroke:#9370db}#mermaid-1587845642139 g.stateGroup line{stroke:#9370db;stroke-width:1}#mermaid-1587845642139 .transition{stroke:#9370db;stroke-width:1;fill:none}#mermaid-1587845642139 .stateGroup .composit{fill:white;border-bottom:1px}#mermaid-1587845642139 .stateGroup .alt-composit{fill:#e0e0e0;border-bottom:1px}#mermaid-1587845642139 .state-note{stroke:#aa3;fill:#fff5ad}#mermaid-1587845642139 .state-note text{fill:black;stroke:none;font-size:10px}#mermaid-1587845642139 .stateLabel .box{stroke:none;stroke-width:0;fill:#ECECFF;opacity:0.5}#mermaid-1587845642139 .stateLabel text{fill:#000;font-size:10px;font-weight:bold;font-family:&apos;trebuchet ms&apos;, verdana, arial;font-family:var(--mermaid-font-family)}:root{--mermaid-font-family: &apos;&quot;trebuchet ms&quot;, verdana, arial&apos;;--mermaid-font-family: &quot;Comic Sans MS&quot;, &quot;Comic Sans&quot;, cursive}

:root { --mermaid-font-family: &quot;trebuchet ms&quot;, verdana, arial;}&lt;/style&gt;&lt;style&gt;#mermaid-1587845642139 {
    color: rgb(0, 0, 0);
    font: normal normal 400 normal 16px / normal &quot;trebuchet ms&quot;, verdana, arial;
  }&lt;/style&gt;&lt;g&gt;&lt;/g&gt;&lt;g&gt;&lt;line id=&quot;actor0&quot; x1=&quot;75&quot; y1=&quot;5&quot; x2=&quot;75&quot; y2=&quot;870&quot; class=&quot;actor-line&quot; stroke-width=&quot;0.5px&quot; stroke=&quot;#999&quot;&gt;&lt;/line&gt;&lt;rect x=&quot;0&quot; y=&quot;0&quot; fill=&quot;#eaeaea&quot; stroke=&quot;#666&quot; width=&quot;150&quot; height=&quot;65&quot; rx=&quot;3&quot; ry=&quot;3&quot; class=&quot;actor&quot;&gt;&lt;/rect&gt;&lt;text x=&quot;75&quot; y=&quot;32.5&quot; dominant-baseline=&quot;central&quot; alignment-baseline=&quot;central&quot; class=&quot;actor&quot; style=&quot;text-anchor: middle; font-size: 14px;&quot;&gt;&lt;tspan x=&quot;75&quot; dy=&quot;0&quot;&gt;Client&lt;/tspan&gt;&lt;/text&gt;&lt;/g&gt;&lt;g&gt;&lt;line id=&quot;actor1&quot; x1=&quot;275&quot; y1=&quot;5&quot; x2=&quot;275&quot; y2=&quot;870&quot; class=&quot;actor-line&quot; stroke-width=&quot;0.5px&quot; stroke=&quot;#999&quot;&gt;&lt;/line&gt;&lt;rect x=&quot;200&quot; y=&quot;0&quot; fill=&quot;#eaeaea&quot; stroke=&quot;#666&quot; width=&quot;150&quot; height=&quot;65&quot; rx=&quot;3&quot; ry=&quot;3&quot; class=&quot;actor&quot;&gt;&lt;/rect&gt;&lt;text x=&quot;275&quot; y=&quot;32.5&quot; dominant-baseline=&quot;central&quot; alignment-baseline=&quot;central&quot; class=&quot;actor&quot; style=&quot;text-anchor: middle; font-size: 14px;&quot;&gt;&lt;tspan x=&quot;275&quot; dy=&quot;0&quot;&gt;Orchestrator&lt;/tspan&gt;&lt;/text&gt;&lt;/g&gt;&lt;g&gt;&lt;line id=&quot;actor2&quot; x1=&quot;475&quot; y1=&quot;5&quot; x2=&quot;475&quot; y2=&quot;870&quot; class=&quot;actor-line&quot; stroke-width=&quot;0.5px&quot; stroke=&quot;#999&quot;&gt;&lt;/line&gt;&lt;rect x=&quot;400&quot; y=&quot;0&quot; fill=&quot;#eaeaea&quot; stroke=&quot;#666&quot; width=&quot;150&quot; height=&quot;65&quot; rx=&quot;3&quot; ry=&quot;3&quot; class=&quot;actor&quot;&gt;&lt;/rect&gt;&lt;text x=&quot;475&quot; y=&quot;32.5&quot; dominant-baseline=&quot;central&quot; alignment-baseline=&quot;central&quot; class=&quot;actor&quot; style=&quot;text-anchor: middle; font-size: 14px;&quot;&gt;&lt;tspan x=&quot;475&quot; dy=&quot;0&quot;&gt;Hub&lt;/tspan&gt;&lt;/text&gt;&lt;/g&gt;&lt;g&gt;&lt;line id=&quot;actor3&quot; x1=&quot;675&quot; y1=&quot;5&quot; x2=&quot;675&quot; y2=&quot;870&quot; class=&quot;actor-line&quot; stroke-width=&quot;0.5px&quot; stroke=&quot;#999&quot;&gt;&lt;/line&gt;&lt;rect x=&quot;600&quot; y=&quot;0&quot; fill=&quot;#eaeaea&quot; stroke=&quot;#666&quot; width=&quot;150&quot; height=&quot;65&quot; rx=&quot;3&quot; ry=&quot;3&quot; class=&quot;actor&quot;&gt;&lt;/rect&gt;&lt;text x=&quot;675&quot; y=&quot;32.5&quot; dominant-baseline=&quot;central&quot; alignment-baseline=&quot;central&quot; class=&quot;actor&quot; style=&quot;text-anchor: middle; font-size: 14px;&quot;&gt;&lt;tspan x=&quot;675&quot; dy=&quot;0&quot;&gt;TestOrchestration&lt;/tspan&gt;&lt;/text&gt;&lt;/g&gt;&lt;g&gt;&lt;line id=&quot;actor4&quot; x1=&quot;875&quot; y1=&quot;5&quot; x2=&quot;875&quot; y2=&quot;870&quot; class=&quot;actor-line&quot; stroke-width=&quot;0.5px&quot; stroke=&quot;#999&quot;&gt;&lt;/line&gt;&lt;rect x=&quot;800&quot; y=&quot;0&quot; fill=&quot;#eaeaea&quot; stroke=&quot;#666&quot; width=&quot;150&quot; height=&quot;65&quot; rx=&quot;3&quot; ry=&quot;3&quot; class=&quot;actor&quot;&gt;&lt;/rect&gt;&lt;text x=&quot;875&quot; y=&quot;32.5&quot; dominant-baseline=&quot;central&quot; alignment-baseline=&quot;central&quot; class=&quot;actor&quot; style=&quot;text-anchor: middle; font-size: 14px;&quot;&gt;&lt;tspan x=&quot;875&quot; dy=&quot;0&quot;&gt;Worker&lt;/tspan&gt;&lt;/text&gt;&lt;/g&gt;&lt;g&gt;&lt;line id=&quot;actor5&quot; x1=&quot;1075&quot; y1=&quot;5&quot; x2=&quot;1075&quot; y2=&quot;870&quot; class=&quot;actor-line&quot; stroke-width=&quot;0.5px&quot; stroke=&quot;#999&quot;&gt;&lt;/line&gt;&lt;rect x=&quot;1000&quot; y=&quot;0&quot; fill=&quot;#eaeaea&quot; stroke=&quot;#666&quot; width=&quot;150&quot; height=&quot;65&quot; rx=&quot;3&quot; ry=&quot;3&quot; class=&quot;actor&quot;&gt;&lt;/rect&gt;&lt;text x=&quot;1075&quot; y=&quot;32.5&quot; dominant-baseline=&quot;central&quot; alignment-baseline=&quot;central&quot; class=&quot;actor&quot; style=&quot;text-anchor: middle; font-size: 14px;&quot;&gt;&lt;tspan x=&quot;1075&quot; dy=&quot;0&quot;&gt;TaskActivity1&lt;/tspan&gt;&lt;/text&gt;&lt;/g&gt;&lt;g&gt;&lt;line id=&quot;actor6&quot; x1=&quot;1275&quot; y1=&quot;5&quot; x2=&quot;1275&quot; y2=&quot;870&quot; class=&quot;actor-line&quot; stroke-width=&quot;0.5px&quot; stroke=&quot;#999&quot;&gt;&lt;/line&gt;&lt;rect x=&quot;1200&quot; y=&quot;0&quot; fill=&quot;#eaeaea&quot; stroke=&quot;#666&quot; width=&quot;150&quot; height=&quot;65&quot; rx=&quot;3&quot; ry=&quot;3&quot; class=&quot;actor&quot;&gt;&lt;/rect&gt;&lt;text x=&quot;1275&quot; y=&quot;32.5&quot; dominant-baseline=&quot;central&quot; alignment-baseline=&quot;central&quot; class=&quot;actor&quot; style=&quot;text-anchor: middle; font-size: 14px;&quot;&gt;&lt;tspan x=&quot;1275&quot; dy=&quot;0&quot;&gt;TaskActivity2&lt;/tspan&gt;&lt;/text&gt;&lt;/g&gt;&lt;defs&gt;&lt;marker id=&quot;arrowhead&quot; refX=&quot;5&quot; refY=&quot;2&quot; markerWidth=&quot;6&quot; markerHeight=&quot;4&quot; orient=&quot;auto&quot;&gt;&lt;path d=&quot;M 0,0 V 4 L6,2 Z&quot;&gt;&lt;/path&gt;&lt;/marker&gt;&lt;/defs&gt;&lt;defs&gt;&lt;marker id=&quot;crosshead&quot; markerWidth=&quot;15&quot; markerHeight=&quot;8&quot; orient=&quot;auto&quot; refX=&quot;16&quot; refY=&quot;4&quot;&gt;&lt;path fill=&quot;black&quot; stroke=&quot;#000000&quot; stroke-width=&quot;1px&quot; d=&quot;M 9,2 V 6 L16,4 Z&quot; style=&quot;stroke-dasharray: 0, 0;&quot;&gt;&lt;/path&gt;&lt;path fill=&quot;none&quot; stroke=&quot;#000000&quot; stroke-width=&quot;1px&quot; d=&quot;M 0,1 L 6,7 M 6,1 L 0,7&quot; style=&quot;stroke-dasharray: 0, 0;&quot;&gt;&lt;/path&gt;&lt;/marker&gt;&lt;/defs&gt;&lt;defs&gt;&lt;marker id=&quot;sequencenumber&quot; refX=&quot;15&quot; refY=&quot;15&quot; markerWidth=&quot;60&quot; markerHeight=&quot;40&quot; orient=&quot;auto&quot;&gt;&lt;circle cx=&quot;15&quot; cy=&quot;15&quot; r=&quot;6&quot;&gt;&lt;/circle&gt;&lt;/marker&gt;&lt;/defs&gt;&lt;g&gt;&lt;text x=&quot;175&quot; y=&quot;93&quot; class=&quot;messageText&quot; style=&quot;text-anchor: middle;&quot;&gt;ExecutionStarted&lt;/text&gt;&lt;line x1=&quot;75&quot; y1=&quot;100&quot; x2=&quot;275&quot; y2=&quot;100&quot; class=&quot;messageLine1&quot; stroke-width=&quot;2&quot; stroke=&quot;black&quot; marker-end=&quot;url(#arrowhead)&quot; style=&quot;stroke-dasharray: 3, 3; fill: none;&quot;&gt;&lt;/line&gt;&lt;/g&gt;&lt;g&gt;&lt;text x=&quot;375&quot; y=&quot;128&quot; class=&quot;messageText&quot; style=&quot;text-anchor: middle;&quot;&gt;ExecutionStarted&lt;/text&gt;&lt;line x1=&quot;275&quot; y1=&quot;135&quot; x2=&quot;475&quot; y2=&quot;135&quot; class=&quot;messageLine1&quot; stroke-width=&quot;2&quot; stroke=&quot;black&quot; marker-end=&quot;url(#arrowhead)&quot; style=&quot;stroke-dasharray: 3, 3; fill: none;&quot;&gt;&lt;/line&gt;&lt;/g&gt;&lt;g&gt;&lt;text x=&quot;575&quot; y=&quot;183&quot; class=&quot;messageText&quot; style=&quot;text-anchor: middle;&quot;&gt;1. Orchestration Invoked&lt;/text&gt;&lt;line x1=&quot;475&quot; y1=&quot;190&quot; x2=&quot;675&quot; y2=&quot;190&quot; class=&quot;messageLine0&quot; stroke-width=&quot;2&quot; stroke=&quot;black&quot; marker-end=&quot;url(#arrowhead)&quot; style=&quot;fill: none;&quot;&gt;&lt;/line&gt;&lt;/g&gt;&lt;g&gt;&lt;text x=&quot;675&quot; y=&quot;228&quot; class=&quot;messageText&quot; style=&quot;text-anchor: middle;&quot;&gt;TaskScheduled&lt;/text&gt;&lt;line x1=&quot;475&quot; y1=&quot;235&quot; x2=&quot;875&quot; y2=&quot;235&quot; class=&quot;messageLine1&quot; stroke-width=&quot;2&quot; stroke=&quot;black&quot; marker-end=&quot;url(#arrowhead)&quot; style=&quot;stroke-dasharray: 3, 3; fill: none;&quot;&gt;&lt;/line&gt;&lt;/g&gt;&lt;g&gt;&lt;text x=&quot;675&quot; y=&quot;263&quot; class=&quot;messageText&quot; style=&quot;text-anchor: middle;&quot;&gt;TaskScheduled&lt;/text&gt;&lt;line x1=&quot;475&quot; y1=&quot;270&quot; x2=&quot;875&quot; y2=&quot;270&quot; class=&quot;messageLine1&quot; stroke-width=&quot;2&quot; stroke=&quot;black&quot; marker-end=&quot;url(#arrowhead)&quot; style=&quot;stroke-dasharray: 3, 3; fill: none;&quot;&gt;&lt;/line&gt;&lt;/g&gt;&lt;g&gt;&lt;text x=&quot;675&quot; y=&quot;298&quot; class=&quot;messageText&quot; style=&quot;text-anchor: middle;&quot;&gt;Task Scheduled&lt;/text&gt;&lt;line x1=&quot;875&quot; y1=&quot;305&quot; x2=&quot;475&quot; y2=&quot;305&quot; class=&quot;messageLine1&quot; stroke-width=&quot;2&quot; stroke=&quot;black&quot; marker-end=&quot;url(#arrowhead)&quot; style=&quot;stroke-dasharray: 3, 3; fill: none;&quot;&gt;&lt;/line&gt;&lt;/g&gt;&lt;g&gt;&lt;text x=&quot;775&quot; y=&quot;333&quot; class=&quot;messageText&quot; style=&quot;text-anchor: middle;&quot;&gt;Task Invoked&lt;/text&gt;&lt;line x1=&quot;475&quot; y1=&quot;340&quot; x2=&quot;1075&quot; y2=&quot;340&quot; class=&quot;messageLine0&quot; stroke-width=&quot;2&quot; stroke=&quot;black&quot; marker-end=&quot;url(#arrowhead)&quot; style=&quot;fill: none;&quot;&gt;&lt;/line&gt;&lt;/g&gt;&lt;g&gt;&lt;rect x=&quot;1070&quot; y=&quot;342&quot; fill=&quot;#EDF2AE&quot; stroke=&quot;#666&quot; width=&quot;10&quot; height=&quot;273&quot; rx=&quot;0&quot; ry=&quot;0&quot; class=&quot;activation0&quot;&gt;&lt;/rect&gt;&lt;/g&gt;&lt;g&gt;&lt;text x=&quot;675&quot; y=&quot;368&quot; class=&quot;messageText&quot; style=&quot;text-anchor: middle;&quot;&gt;Task Scheduled&lt;/text&gt;&lt;line x1=&quot;875&quot; y1=&quot;375&quot; x2=&quot;475&quot; y2=&quot;375&quot; class=&quot;messageLine1&quot; stroke-width=&quot;2&quot; stroke=&quot;black&quot; marker-end=&quot;url(#arrowhead)&quot; style=&quot;stroke-dasharray: 3, 3; fill: none;&quot;&gt;&lt;/line&gt;&lt;/g&gt;&lt;g&gt;&lt;text x=&quot;875&quot; y=&quot;403&quot; class=&quot;messageText&quot; style=&quot;text-anchor: middle;&quot;&gt;Task Invoked&lt;/text&gt;&lt;line x1=&quot;475&quot; y1=&quot;410&quot; x2=&quot;1275&quot; y2=&quot;410&quot; class=&quot;messageLine0&quot; stroke-width=&quot;2&quot; stroke=&quot;black&quot; marker-end=&quot;url(#arrowhead)&quot; style=&quot;fill: none;&quot;&gt;&lt;/line&gt;&lt;/g&gt;&lt;g&gt;&lt;rect x=&quot;1270&quot; y=&quot;412&quot; fill=&quot;#EDF2AE&quot; stroke=&quot;#666&quot; width=&quot;10&quot; height=&quot;33&quot; rx=&quot;0&quot; ry=&quot;0&quot; class=&quot;activation0&quot;&gt;&lt;/rect&gt;&lt;/g&gt;&lt;g&gt;&lt;text x=&quot;872.5&quot; y=&quot;438&quot; class=&quot;messageText&quot; style=&quot;text-anchor: middle;&quot;&gt;Task Finished&lt;/text&gt;&lt;line x1=&quot;1270&quot; y1=&quot;445&quot; x2=&quot;475&quot; y2=&quot;445&quot; class=&quot;messageLine0&quot; stroke-width=&quot;2&quot; stroke=&quot;black&quot; marker-end=&quot;url(#arrowhead)&quot; style=&quot;fill: none;&quot;&gt;&lt;/line&gt;&lt;/g&gt;&lt;g&gt;&lt;text x=&quot;375&quot; y=&quot;473&quot; class=&quot;messageText&quot; style=&quot;text-anchor: middle;&quot;&gt;TaskCompleted&lt;/text&gt;&lt;line x1=&quot;475&quot; y1=&quot;480&quot; x2=&quot;275&quot; y2=&quot;480&quot; class=&quot;messageLine1&quot; stroke-width=&quot;2&quot; stroke=&quot;black&quot; marker-end=&quot;url(#arrowhead)&quot; style=&quot;stroke-dasharray: 3, 3; fill: none;&quot;&gt;&lt;/line&gt;&lt;/g&gt;&lt;g&gt;&lt;text x=&quot;375&quot; y=&quot;508&quot; class=&quot;messageText&quot; style=&quot;text-anchor: middle;&quot;&gt;TaskCompleted&lt;/text&gt;&lt;line x1=&quot;275&quot; y1=&quot;515&quot; x2=&quot;475&quot; y2=&quot;515&quot; class=&quot;messageLine1&quot; stroke-width=&quot;2&quot; stroke=&quot;black&quot; marker-end=&quot;url(#arrowhead)&quot; style=&quot;stroke-dasharray: 3, 3; fill: none;&quot;&gt;&lt;/line&gt;&lt;/g&gt;&lt;g&gt;&lt;text x=&quot;575&quot; y=&quot;563&quot; class=&quot;messageText&quot; style=&quot;text-anchor: middle;&quot;&gt;2. Orchestration Invoked&lt;/text&gt;&lt;line x1=&quot;475&quot; y1=&quot;570&quot; x2=&quot;675&quot; y2=&quot;570&quot; class=&quot;messageLine0&quot; stroke-width=&quot;2&quot; stroke=&quot;black&quot; marker-end=&quot;url(#arrowhead)&quot; style=&quot;fill: none;&quot;&gt;&lt;/line&gt;&lt;/g&gt;&lt;g&gt;&lt;text x=&quot;772.5&quot; y=&quot;608&quot; class=&quot;messageText&quot; style=&quot;text-anchor: middle;&quot;&gt;Task Finished&lt;/text&gt;&lt;line x1=&quot;1070&quot; y1=&quot;615&quot; x2=&quot;475&quot; y2=&quot;615&quot; class=&quot;messageLine0&quot; stroke-width=&quot;2&quot; stroke=&quot;black&quot; marker-end=&quot;url(#arrowhead)&quot; style=&quot;fill: none;&quot;&gt;&lt;/line&gt;&lt;/g&gt;&lt;g&gt;&lt;text x=&quot;375&quot; y=&quot;643&quot; class=&quot;messageText&quot; style=&quot;text-anchor: middle;&quot;&gt;TaskCompleted&lt;/text&gt;&lt;line x1=&quot;475&quot; y1=&quot;650&quot; x2=&quot;275&quot; y2=&quot;650&quot; class=&quot;messageLine1&quot; stroke-width=&quot;2&quot; stroke=&quot;black&quot; marker-end=&quot;url(#arrowhead)&quot; style=&quot;stroke-dasharray: 3, 3; fill: none;&quot;&gt;&lt;/line&gt;&lt;/g&gt;&lt;g&gt;&lt;text x=&quot;375&quot; y=&quot;678&quot; class=&quot;messageText&quot; style=&quot;text-anchor: middle;&quot;&gt;TaskCompleted&lt;/text&gt;&lt;line x1=&quot;275&quot; y1=&quot;685&quot; x2=&quot;475&quot; y2=&quot;685&quot; class=&quot;messageLine1&quot; stroke-width=&quot;2&quot; stroke=&quot;black&quot; marker-end=&quot;url(#arrowhead)&quot; style=&quot;stroke-dasharray: 3, 3; fill: none;&quot;&gt;&lt;/line&gt;&lt;/g&gt;&lt;g&gt;&lt;text x=&quot;575&quot; y=&quot;733&quot; class=&quot;messageText&quot; style=&quot;text-anchor: middle;&quot;&gt;3. Orchestration Invoked&lt;/text&gt;&lt;line x1=&quot;475&quot; y1=&quot;740&quot; x2=&quot;675&quot; y2=&quot;740&quot; class=&quot;messageLine0&quot; stroke-width=&quot;2&quot; stroke=&quot;black&quot; marker-end=&quot;url(#arrowhead)&quot; style=&quot;fill: none;&quot;&gt;&lt;/line&gt;&lt;/g&gt;&lt;g&gt;&lt;text x=&quot;575&quot; y=&quot;778&quot; class=&quot;messageText&quot; style=&quot;text-anchor: middle;&quot;&gt;Orchestration Finished&lt;/text&gt;&lt;line x1=&quot;675&quot; y1=&quot;785&quot; x2=&quot;475&quot; y2=&quot;785&quot; class=&quot;messageLine0&quot; stroke-width=&quot;2&quot; stroke=&quot;black&quot; marker-end=&quot;url(#arrowhead)&quot; style=&quot;fill: none;&quot;&gt;&lt;/line&gt;&lt;/g&gt;&lt;g&gt;&lt;rect x=&quot;0&quot; y=&quot;805&quot; fill=&quot;#eaeaea&quot; stroke=&quot;#666&quot; width=&quot;150&quot; height=&quot;65&quot; rx=&quot;3&quot; ry=&quot;3&quot; class=&quot;actor&quot;&gt;&lt;/rect&gt;&lt;text x=&quot;75&quot; y=&quot;837.5&quot; dominant-baseline=&quot;central&quot; alignment-baseline=&quot;central&quot; class=&quot;actor&quot; style=&quot;text-anchor: middle; font-size: 14px;&quot;&gt;&lt;tspan x=&quot;75&quot; dy=&quot;0&quot;&gt;Client&lt;/tspan&gt;&lt;/text&gt;&lt;/g&gt;&lt;g&gt;&lt;rect x=&quot;200&quot; y=&quot;805&quot; fill=&quot;#eaeaea&quot; stroke=&quot;#666&quot; width=&quot;150&quot; height=&quot;65&quot; rx=&quot;3&quot; ry=&quot;3&quot; class=&quot;actor&quot;&gt;&lt;/rect&gt;&lt;text x=&quot;275&quot; y=&quot;837.5&quot; dominant-baseline=&quot;central&quot; alignment-baseline=&quot;central&quot; class=&quot;actor&quot; style=&quot;text-anchor: middle; font-size: 14px;&quot;&gt;&lt;tspan x=&quot;275&quot; dy=&quot;0&quot;&gt;Orchestrator&lt;/tspan&gt;&lt;/text&gt;&lt;/g&gt;&lt;g&gt;&lt;rect x=&quot;400&quot; y=&quot;805&quot; fill=&quot;#eaeaea&quot; stroke=&quot;#666&quot; width=&quot;150&quot; height=&quot;65&quot; rx=&quot;3&quot; ry=&quot;3&quot; class=&quot;actor&quot;&gt;&lt;/rect&gt;&lt;text x=&quot;475&quot; y=&quot;837.5&quot; dominant-baseline=&quot;central&quot; alignment-baseline=&quot;central&quot; class=&quot;actor&quot; style=&quot;text-anchor: middle; font-size: 14px;&quot;&gt;&lt;tspan x=&quot;475&quot; dy=&quot;0&quot;&gt;Hub&lt;/tspan&gt;&lt;/text&gt;&lt;/g&gt;&lt;g&gt;&lt;rect x=&quot;600&quot; y=&quot;805&quot; fill=&quot;#eaeaea&quot; stroke=&quot;#666&quot; width=&quot;150&quot; height=&quot;65&quot; rx=&quot;3&quot; ry=&quot;3&quot; class=&quot;actor&quot;&gt;&lt;/rect&gt;&lt;text x=&quot;675&quot; y=&quot;837.5&quot; dominant-baseline=&quot;central&quot; alignment-baseline=&quot;central&quot; class=&quot;actor&quot; style=&quot;text-anchor: middle; font-size: 14px;&quot;&gt;&lt;tspan x=&quot;675&quot; dy=&quot;0&quot;&gt;TestOrchestration&lt;/tspan&gt;&lt;/text&gt;&lt;/g&gt;&lt;g&gt;&lt;rect x=&quot;800&quot; y=&quot;805&quot; fill=&quot;#eaeaea&quot; stroke=&quot;#666&quot; width=&quot;150&quot; height=&quot;65&quot; rx=&quot;3&quot; ry=&quot;3&quot; class=&quot;actor&quot;&gt;&lt;/rect&gt;&lt;text x=&quot;875&quot; y=&quot;837.5&quot; dominant-baseline=&quot;central&quot; alignment-baseline=&quot;central&quot; class=&quot;actor&quot; style=&quot;text-anchor: middle; font-size: 14px;&quot;&gt;&lt;tspan x=&quot;875&quot; dy=&quot;0&quot;&gt;Worker&lt;/tspan&gt;&lt;/text&gt;&lt;/g&gt;&lt;g&gt;&lt;rect x=&quot;1000&quot; y=&quot;805&quot; fill=&quot;#eaeaea&quot; stroke=&quot;#666&quot; width=&quot;150&quot; height=&quot;65&quot; rx=&quot;3&quot; ry=&quot;3&quot; class=&quot;actor&quot;&gt;&lt;/rect&gt;&lt;text x=&quot;1075&quot; y=&quot;837.5&quot; dominant-baseline=&quot;central&quot; alignment-baseline=&quot;central&quot; class=&quot;actor&quot; style=&quot;text-anchor: middle; font-size: 14px;&quot;&gt;&lt;tspan x=&quot;1075&quot; dy=&quot;0&quot;&gt;TaskActivity1&lt;/tspan&gt;&lt;/text&gt;&lt;/g&gt;&lt;g&gt;&lt;rect x=&quot;1200&quot; y=&quot;805&quot; fill=&quot;#eaeaea&quot; stroke=&quot;#666&quot; width=&quot;150&quot; height=&quot;65&quot; rx=&quot;3&quot; ry=&quot;3&quot; class=&quot;actor&quot;&gt;&lt;/rect&gt;&lt;text x=&quot;1275&quot; y=&quot;837.5&quot; dominant-baseline=&quot;central&quot; alignment-baseline=&quot;central&quot; class=&quot;actor&quot; style=&quot;text-anchor: middle; font-size: 14px;&quot;&gt;&lt;tspan x=&quot;1275&quot; dy=&quot;0&quot;&gt;TaskActivity2&lt;/tspan&gt;&lt;/text&gt;&lt;/g&gt;&lt;/svg&gt;&lt;/div&gt;
&lt;h3&gt;The curious case of Orchestrations&lt;/h3&gt;
&lt;p&gt;So we have  the same Orchestration getting invoked 3 times. Curiously only once the orchestration finishes while others dont seem to do anything.
Lets look at the orchestration code.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;csharp&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber NaN&quot; class=&quot;language-csharp line-numbers&quot;&gt;&lt;code class=&quot;language-csharp&quot;&gt;    Console&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Writeline&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;Orchestration Started&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;var&lt;/span&gt; task1 &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; context&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token generic-method&quot;&gt;&lt;span class=&quot;token function&quot;&gt;ScheduleWithRetry&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;bool&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;typeof&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;TestActivity1&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; options&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;Test Input1&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;var&lt;/span&gt; task2 &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; context&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token generic-method&quot;&gt;&lt;span class=&quot;token function&quot;&gt;ScheduleWithRetry&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;bool&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;typeof&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;TestActivity2&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; options&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;Test Input2&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;var&lt;/span&gt; result1 &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;  &lt;span class=&quot;token keyword&quot;&gt;await&lt;/span&gt; task1&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;var&lt;/span&gt; result2 &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;await&lt;/span&gt; task2&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    Console&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Writeline&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;Orchestration Finished&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; result&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;First&lt;/strong&gt; time Orchestration starts - Replay False - Starts due to TaskCompleted event from the client&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Console logs - Orchestration Started&lt;/li&gt;
&lt;li&gt;Encounters 2 ScheduleWithRetry and sends two taskScheduled event to the Worker&lt;/li&gt;
&lt;li&gt;Goes to the await statement, see that task 1 is not complete. Exits.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;Second&lt;/strong&gt; time orchestration starts - Replay true - Starts due to TaskCompleted event from Task 2 getting completed&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Console logs - Orchestration Started&lt;/li&gt;
&lt;li&gt;Encounters 2 ScheduleWithRetry, which does a noop as the tasks are already scheduled.&lt;/li&gt;
&lt;li&gt;Goes to the await statement, see that task 1 is not complete. Exits.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;Third time&lt;/strong&gt; orchestration starts - Replay true - Starts due to TaskCompleted event from Task 1 getting completed&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Console logs - Orchestration Started&lt;/li&gt;
&lt;li&gt;Encounters 2 ScheduleWithRetry, which does a noop as the tasks are already scheduled.&lt;/li&gt;
&lt;li&gt;Goes to the await statement, sees that task 1 complete, returns the result.&lt;/li&gt;
&lt;li&gt;Goes to the await statement, sees that task 2 is already complete, returns the result.&lt;/li&gt;
&lt;li&gt;Console logs - Orchestration Finished&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;So, in general, for any orchestration, we will have n number of unfinished Orchestrations and one complete orchestration.&lt;/p&gt;
&lt;h3&gt;Incomplete Orchestrations&lt;/h3&gt;
&lt;p&gt;The orchestrations seem to magically disappear after they encounter &lt;code class=&quot;language-text&quot;&gt;await&lt;/code&gt;, i.e. if Task1 is in flight.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber NaN&quot; class=&quot;language-text line-numbers&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;   var result1 =  await task1;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;ul&gt;
&lt;li&gt;In Case #1 and case #2 , this &lt;code class=&quot;language-text&quot;&gt;await&lt;/code&gt; never returns because internally when you Schedule a task it cannot invoke the actual task due to the sync nature of execution.&lt;/li&gt;
&lt;li&gt;Instead the framework returns a &lt;a href=&quot;https://docs.microsoft.com/en-us/dotnet/api/system.threading.tasks.taskcompletionsource-1?view=netframework-4.8&quot;&gt;TaskCompletionSource&lt;/a&gt;.&lt;/li&gt;
&lt;li&gt;The framework checks the Service Bus message (TaskCompleted event) which triggered the execution whether it has the result of the await call and resolves the &lt;code class=&quot;language-text&quot;&gt;TaskCompletionSource&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;In all other cases &lt;code class=&quot;language-text&quot;&gt;TaskCompletionSource&lt;/code&gt; is never resolved, and hence you get the &lt;code class=&quot;language-text&quot;&gt;Orchestration Finished&lt;/code&gt; log only once and not in the other 2 cases.&lt;/li&gt;
&lt;li&gt;Unfulfilled tasks does not mean that the thread is blocked. The task parallel library will free up the thread and recycle it back to the pool.&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
&lt;p&gt;The await that you do over the &lt;code class=&quot;language-text&quot;&gt;ScheduleWithRetry&lt;/code&gt; Tasks are syntactic sugar over what is primarily an asynchronous event-driven architecture based on Queues.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2&gt;Where do results from taskActivity get stored ?&lt;/h2&gt;
&lt;p&gt;In Part 1, you would have seen that even though hub was shut down , if the Task  execution was complete it will not re-run the Task. Its a similar situation when task1 completes in the multi activity scenario above , orchestration gets executed multiple times and gets the value of Task2 without even executing it more than once. Surely there is some store where the result from the task activities are stored?&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;DTF serializes all the events into something called as Session State which is closely tied to the concept of &lt;a href=&quot;https://docs.microsoft.com/en-us/azure/service-bus-messaging/message-sessions&quot;&gt;Message Sessions&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Service bus uses session Id to enforce ordering and partitioning of messages.&lt;/li&gt;
&lt;li&gt;Each session Id allows you to store a 1 Mb/256 Kb blob of data that is called Session State.&lt;/li&gt;
&lt;li&gt;Session is opened when you have a message in the service bus , and a session is closed when all messages of a particular sessionId is cleared and sessionState is set to null.&lt;/li&gt;
&lt;li&gt;DTF uses this session State to store data of all the states that the orchestration went through.&lt;/li&gt;
&lt;li&gt;Once the Orchestration is complete this session state is cleared and message session is closed.&lt;/li&gt;
&lt;li&gt;So the moment a Task completes, DTF puts the result into the event and into the Session State.&lt;/li&gt;
&lt;li&gt;So whenever an Orchestration runs , its able to rebuild the current state by using the session state.&lt;/li&gt;
&lt;li&gt;Here is an example of a session state &lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 562px;&quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/blog/static/2798b67dcb285c283fb0a0df1e938e67/6e88f/serializedState.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 90.54054054054053%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAASCAYAAABb0P4QAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAC2UlEQVQ4y41U2XLaQBDk/38pfsAgdF+AjQAJCYG5BOZK7HKVXe5MjwA7lYdEVVO7O9rt6Znp3cb++RnbaovtdoePjw98fn7i+nH9L3t/f8f5fMbb2xteX1/R2Gw2KPICHPmjnE4xeBxgmCSoqgq73e6/7FmIcWzkeY4szbATx+FwwHq9xmKxwHK5FNbbvw4ySLWplADn3HM1BZxkGcIgRDJIdOzGXYyGQ/R7PZ3TojBCr1vPk8EA02KKoiiQpukNlERIqJGJ0zQ68DwfVseE53qwTAuBF4j58BxPAfnPsV0kyRCJlGQ8HmM0GgnQBi8vL5Ly7gvQ6lhwHRdxFAmzPjoSwBcw13YExBHAUP57F1AHpoyt+5YEtrXeo+EIT08LHI9HNFKJ5FgObMtW0JqNpT6y5Uh/GASwzXoPMyCoI3PDMDT44DGpAcdCmw7LNNFsNuuDtq2pEtgXUJbDNARAgpKl0Wqj3TIQRTHWq7VK7lZDMrQZUYwM2BjzkrLnupoi2ROU7DzPQ5ZNMJ/NJc0nGWcoyxIzWStgPplcUgq1EawjmxHJ2vd99XsCGviBNCLFRPbPBISMKK2FgC6kfgRXQJWNH2q9yKrX7Um6dYA4jgUo1LRjSY+1Y93YAN6ujXR4tVqpEfwGyI1sBpn6kpLv1szoIzMGISh9/W5fdcrL8PDwoOC/fv0UUW+/aqi68+tmhCIR1iwKYwFxNQilZF406ooWW817PdNuG1LPTK8sBf4HQ/OiMWqOHVX5SOf5jyW4Nodsr9lMpyVO55MC8bYoYDHJVaTcUOvRugndkjlFzvW9sLr7cSeAfb3HtLUY7y/1dwNM07Hqy+YNEEaUxRWQnU6ls6UwYWlYt1wI5JdOM11293Q6faXM7sznc3Vsqssr8u014bO03+91M0f6CULjnB3mY1GWM2XZ4FPFJ+xwOGqk78ZUvtt+f8BS9rPLqbDjWQLzBSrkHWWA38xfAK69acTIAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;Serialized state&quot;
        title=&quot;Serialized state&quot;
        src=&quot;/blog/static/2798b67dcb285c283fb0a0df1e938e67/6e88f/serializedState.png&quot;
        srcset=&quot;/blog/static/2798b67dcb285c283fb0a0df1e938e67/12f09/serializedState.png 148w,
/blog/static/2798b67dcb285c283fb0a0df1e938e67/e4a3f/serializedState.png 295w,
/blog/static/2798b67dcb285c283fb0a0df1e938e67/6e88f/serializedState.png 562w&quot;
        sizes=&quot;(max-width: 562px) 100vw, 562px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/li&gt;
&lt;/ul&gt;</content:encoded></item><item><title><![CDATA[Durable Task Framework Internals - Part 1 (Dataflow and Reliability)]]></title><description><![CDATA[Durable Task Framework Series This post is part 1 of a series of posts on DTF. Durable Task Framework Internals - Part 1 (Dataflow and…]]></description><link>https://abhikmitra.github.io/blog/durable-task/</link><guid isPermaLink="false">https://abhikmitra.github.io/blog/durable-task/</guid><pubDate>Thu, 23 Apr 2020 18:00:00 GMT</pubDate><content:encoded>&lt;h3&gt;Durable Task Framework Series&lt;/h3&gt;
&lt;p&gt;This post is &lt;strong&gt;part 1&lt;/strong&gt; of a series of posts on DTF.&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;a href=&quot;https://abhikmitra.github.io/blog/durable-task/&quot;&gt;Durable Task Framework Internals - Part 1 (Dataflow and Reliability)&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://abhikmitra.github.io/blog/durable-task-2/&quot;&gt;Durable Task Framework Internals - Part 2 (The curious case of Orchestrations)&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://abhikmitra.github.io/blog/durable-task-3/&quot;&gt;Durable Task Framework Internals - Part 3 (Tracker Queue, Instance History, and JumpStart)&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://abhikmitra.github.io/blog/durable-task-4/&quot;&gt;Durable Task Framework Internals - Part 4 (Terminated Orchestrations &amp;#x26; Middlewares)&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;Do you think there is more that I should cover or something I should fix ? Please raise an &lt;a href=&quot;https://github.com/abhikmitra/blog/issues&quot;&gt;issue&lt;/a&gt; and let me know&lt;/p&gt;
&lt;hr&gt;
&lt;h3&gt;Durable Task Framework&lt;/h3&gt;
&lt;p&gt;The Durable Task Framework is an orchestration framework for dot net apps. You can read more about it in their official &lt;a href=&quot;https://github.com/Azure/durabletask&quot;&gt;github repo&lt;/a&gt;. This &lt;a href=&quot;https://channel9.msdn.com/Shows/On-NET/Building-workflows-with-the-Durable-Task-Framework&quot;&gt;channel 9 video&lt;/a&gt; does a pretty good job of explaining about the framework.&lt;/p&gt;
&lt;p&gt;While I was reading through the materials , I felt the literature out their treated the system as a blackbox and I couldn’t find any material on the web on how does DTF works under the hood. So I cloned DTF repo and added console logs to understand how it works. The following details apply to &lt;a href=&quot;https://www.nuget.org/packages/DurableTask.Core/&quot;&gt;DurableTask.Core&lt;/a&gt; version 2.0.0.6 which maps to commit id &lt;code class=&quot;language-text&quot;&gt;0a93eba6c9692f52776dac0f3741eccad3293ef6&lt;/code&gt; in the DTF Github repo.&lt;/p&gt;
&lt;h3&gt;Setup&lt;/h3&gt;
&lt;p&gt;My setup has 2 console apps , DTFDemoWorker and DTFClient. DTFDemoWorker houses the hubWorker and creates the resources. I have 1 Orchestration called a TestOrchestration which does 2 activities, testActivity1 and TestActivity2 both of which console logs to the console and waits for sometime to simulate some work being done.&lt;/p&gt;
&lt;p&gt;You can find the repo &lt;a href=&quot;https://github.com/abhikmitra/DTFDemo&quot;&gt;here&lt;/a&gt; &lt;/p&gt;
&lt;p&gt;When we create the resources DTF creates 3 Queues in the Service Bus &lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&amp;#x3C;TaskHubName&gt;/orchestrator&lt;/li&gt;
&lt;li&gt;&amp;#x3C;TaskHubName&gt;/tracking&lt;/li&gt;
&lt;li&gt;&amp;#x3C;TaskHubName&gt;/worker&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;Steps&lt;/h3&gt;
&lt;p&gt;We will see whats the process in which Orchestrator provides reliability. We will ignore the tracking Queue for now and add that later. To kepe the diagrams simple , let’s assume we have 1 Task that gets invoked.&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;We start the process with the following code from the Client.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;csharp&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber NaN&quot; class=&quot;language-csharp line-numbers&quot;&gt;&lt;code class=&quot;language-csharp&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;var&lt;/span&gt; instance &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; client&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;CreateOrchestrationInstanceAsync&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;typeof&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;TestOrchestration&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;InstanceId5302&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;Test Input&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Result&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/li&gt;
&lt;li&gt;This will send a message with event name &lt;code class=&quot;language-text&quot;&gt;ExecutionStarted&lt;/code&gt; message into the Orchestrator queue.There will be other details such as the orchestration name and id , that will help DTF to operate on the correct instance of orchestration.&lt;/li&gt;
&lt;/ol&gt;
&lt;div class=&quot;mermaid&quot; data-processed=&quot;true&quot;&gt;&lt;svg id=&quot;mermaid-1587845641378&quot; width=&quot;100%&quot; xmlns=&quot;http://www.w3.org/2000/svg&quot; height=&quot;100%&quot; style=&quot;max-width:450px;&quot; viewBox=&quot;-50 -10 450 196&quot;&gt;&lt;style&gt;#mermaid-1587845641378 .label{font-family:&apos;trebuchet ms&apos;, verdana, arial;font-family:var(--mermaid-font-family);color:#333}#mermaid-1587845641378 .label text{fill:#333}#mermaid-1587845641378 .node rect,#mermaid-1587845641378 .node circle,#mermaid-1587845641378 .node ellipse,#mermaid-1587845641378 .node polygon,#mermaid-1587845641378 .node path{fill:#ECECFF;stroke:#9370db;stroke-width:1px}#mermaid-1587845641378 .node .label{text-align:center}#mermaid-1587845641378 .node.clickable{cursor:pointer}#mermaid-1587845641378 .arrowheadPath{fill:#333}#mermaid-1587845641378 .edgePath .path{stroke:#333;stroke-width:1.5px}#mermaid-1587845641378 .edgeLabel{background-color:#e8e8e8;text-align:center}#mermaid-1587845641378 .cluster rect{fill:#ffffde;stroke:#aa3;stroke-width:1px}#mermaid-1587845641378 .cluster text{fill:#333}#mermaid-1587845641378 div.mermaidTooltip{position:absolute;text-align:center;max-width:200px;padding:2px;font-family:&apos;trebuchet ms&apos;, verdana, arial;font-family:var(--mermaid-font-family);font-size:12px;background:#ffffde;border:1px solid #aa3;border-radius:2px;pointer-events:none;z-index:100}#mermaid-1587845641378 .actor{stroke:#ccf;fill:#ECECFF}#mermaid-1587845641378 text.actor{fill:#000;stroke:none}#mermaid-1587845641378 .actor-line{stroke:grey}#mermaid-1587845641378 .messageLine0{stroke-width:1.5;stroke-dasharray:&apos;2 2&apos;;stroke:#333}#mermaid-1587845641378 .messageLine1{stroke-width:1.5;stroke-dasharray:&apos;2 2&apos;;stroke:#333}#mermaid-1587845641378 #arrowhead{fill:#333}#mermaid-1587845641378 .sequenceNumber{fill:#fff}#mermaid-1587845641378 #sequencenumber{fill:#333}#mermaid-1587845641378 #crosshead path{fill:#333 !important;stroke:#333 !important}#mermaid-1587845641378 .messageText{fill:#333;stroke:none}#mermaid-1587845641378 .labelBox{stroke:#ccf;fill:#ECECFF}#mermaid-1587845641378 .labelText{fill:#000;stroke:none}#mermaid-1587845641378 .loopText{fill:#000;stroke:none}#mermaid-1587845641378 .loopLine{stroke-width:2;stroke-dasharray:&apos;2 2&apos;;stroke:#ccf}#mermaid-1587845641378 .note{stroke:#aa3;fill:#fff5ad}#mermaid-1587845641378 .noteText{fill:black;stroke:none;font-family:&apos;trebuchet ms&apos;, verdana, arial;font-family:var(--mermaid-font-family);font-size:14px}#mermaid-1587845641378 .activation0{fill:#f4f4f4;stroke:#666}#mermaid-1587845641378 .activation1{fill:#f4f4f4;stroke:#666}#mermaid-1587845641378 .activation2{fill:#f4f4f4;stroke:#666}#mermaid-1587845641378 .mermaid-main-font{font-family:&quot;trebuchet ms&quot;, verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1587845641378 .section{stroke:none;opacity:0.2}#mermaid-1587845641378 .section0{fill:rgba(102,102,255,0.49)}#mermaid-1587845641378 .section2{fill:#fff400}#mermaid-1587845641378 .section1,#mermaid-1587845641378 .section3{fill:#fff;opacity:0.2}#mermaid-1587845641378 .sectionTitle0{fill:#333}#mermaid-1587845641378 .sectionTitle1{fill:#333}#mermaid-1587845641378 .sectionTitle2{fill:#333}#mermaid-1587845641378 .sectionTitle3{fill:#333}#mermaid-1587845641378 .sectionTitle{text-anchor:start;font-size:11px;text-height:14px;font-family:&apos;trebuchet ms&apos;, verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1587845641378 .grid .tick{stroke:#d3d3d3;opacity:0.8;shape-rendering:crispEdges}#mermaid-1587845641378 .grid .tick text{font-family:&apos;trebuchet ms&apos;, verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1587845641378 .grid path{stroke-width:0}#mermaid-1587845641378 .today{fill:none;stroke:red;stroke-width:2px}#mermaid-1587845641378 .task{stroke-width:2}#mermaid-1587845641378 .taskText{text-anchor:middle;font-family:&apos;trebuchet ms&apos;, verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1587845641378 .taskText:not([font-size]){font-size:11px}#mermaid-1587845641378 .taskTextOutsideRight{fill:#000;text-anchor:start;font-size:11px;font-family:&apos;trebuchet ms&apos;, verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1587845641378 .taskTextOutsideLeft{fill:#000;text-anchor:end;font-size:11px}#mermaid-1587845641378 .task.clickable{cursor:pointer}#mermaid-1587845641378 .taskText.clickable{cursor:pointer;fill:#003163 !important;font-weight:bold}#mermaid-1587845641378 .taskTextOutsideLeft.clickable{cursor:pointer;fill:#003163 !important;font-weight:bold}#mermaid-1587845641378 .taskTextOutsideRight.clickable{cursor:pointer;fill:#003163 !important;font-weight:bold}#mermaid-1587845641378 .taskText0,#mermaid-1587845641378 .taskText1,#mermaid-1587845641378 .taskText2,#mermaid-1587845641378 .taskText3{fill:#fff}#mermaid-1587845641378 .task0,#mermaid-1587845641378 .task1,#mermaid-1587845641378 .task2,#mermaid-1587845641378 .task3{fill:#8a90dd;stroke:#534fbc}#mermaid-1587845641378 .taskTextOutside0,#mermaid-1587845641378 .taskTextOutside2{fill:#000}#mermaid-1587845641378 .taskTextOutside1,#mermaid-1587845641378 .taskTextOutside3{fill:#000}#mermaid-1587845641378 .active0,#mermaid-1587845641378 .active1,#mermaid-1587845641378 .active2,#mermaid-1587845641378 .active3{fill:#bfc7ff;stroke:#534fbc}#mermaid-1587845641378 .activeText0,#mermaid-1587845641378 .activeText1,#mermaid-1587845641378 .activeText2,#mermaid-1587845641378 .activeText3{fill:#000 !important}#mermaid-1587845641378 .done0,#mermaid-1587845641378 .done1,#mermaid-1587845641378 .done2,#mermaid-1587845641378 .done3{stroke:grey;fill:#d3d3d3;stroke-width:2}#mermaid-1587845641378 .doneText0,#mermaid-1587845641378 .doneText1,#mermaid-1587845641378 .doneText2,#mermaid-1587845641378 .doneText3{fill:#000 !important}#mermaid-1587845641378 .crit0,#mermaid-1587845641378 .crit1,#mermaid-1587845641378 .crit2,#mermaid-1587845641378 .crit3{stroke:#f88;fill:red;stroke-width:2}#mermaid-1587845641378 .activeCrit0,#mermaid-1587845641378 .activeCrit1,#mermaid-1587845641378 .activeCrit2,#mermaid-1587845641378 .activeCrit3{stroke:#f88;fill:#bfc7ff;stroke-width:2}#mermaid-1587845641378 .doneCrit0,#mermaid-1587845641378 .doneCrit1,#mermaid-1587845641378 .doneCrit2,#mermaid-1587845641378 .doneCrit3{stroke:#f88;fill:#d3d3d3;stroke-width:2;cursor:pointer;shape-rendering:crispEdges}#mermaid-1587845641378 .milestone{transform:rotate(45deg) scale(0.8, 0.8)}#mermaid-1587845641378 .milestoneText{font-style:italic}#mermaid-1587845641378 .doneCritText0,#mermaid-1587845641378 .doneCritText1,#mermaid-1587845641378 .doneCritText2,#mermaid-1587845641378 .doneCritText3{fill:#000 !important}#mermaid-1587845641378 .activeCritText0,#mermaid-1587845641378 .activeCritText1,#mermaid-1587845641378 .activeCritText2,#mermaid-1587845641378 .activeCritText3{fill:#000 !important}#mermaid-1587845641378 .titleText{text-anchor:middle;font-size:18px;fill:#000;font-family:&apos;trebuchet ms&apos;, verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1587845641378 g.classGroup text{fill:#9370db;stroke:none;font-family:&apos;trebuchet ms&apos;, verdana, arial;font-family:var(--mermaid-font-family);font-size:10px}#mermaid-1587845641378 g.classGroup text .title{font-weight:bolder}#mermaid-1587845641378 g.clickable{cursor:pointer}#mermaid-1587845641378 g.classGroup rect{fill:#ECECFF;stroke:#9370db}#mermaid-1587845641378 g.classGroup line{stroke:#9370db;stroke-width:1}#mermaid-1587845641378 .classLabel .box{stroke:none;stroke-width:0;fill:#ECECFF;opacity:0.5}#mermaid-1587845641378 .classLabel .label{fill:#9370db;font-size:10px}#mermaid-1587845641378 .relation{stroke:#9370db;stroke-width:1;fill:none}#mermaid-1587845641378 .dashed-line{stroke-dasharray:3}#mermaid-1587845641378 #compositionStart{fill:#9370db;stroke:#9370db;stroke-width:1}#mermaid-1587845641378 #compositionEnd{fill:#9370db;stroke:#9370db;stroke-width:1}#mermaid-1587845641378 #aggregationStart{fill:#ECECFF;stroke:#9370db;stroke-width:1}#mermaid-1587845641378 #aggregationEnd{fill:#ECECFF;stroke:#9370db;stroke-width:1}#mermaid-1587845641378 #dependencyStart{fill:#9370db;stroke:#9370db;stroke-width:1}#mermaid-1587845641378 #dependencyEnd{fill:#9370db;stroke:#9370db;stroke-width:1}#mermaid-1587845641378 #extensionStart{fill:#9370db;stroke:#9370db;stroke-width:1}#mermaid-1587845641378 #extensionEnd{fill:#9370db;stroke:#9370db;stroke-width:1}#mermaid-1587845641378 .commit-id,#mermaid-1587845641378 .commit-msg,#mermaid-1587845641378 .branch-label{fill:lightgrey;color:lightgrey;font-family:&apos;trebuchet ms&apos;, verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1587845641378 .pieTitleText{text-anchor:middle;font-size:25px;fill:#000;font-family:&apos;trebuchet ms&apos;, verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1587845641378 .slice{font-family:&apos;trebuchet ms&apos;, verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1587845641378 g.stateGroup text{fill:#9370db;stroke:none;font-size:10px;font-family:&apos;trebuchet ms&apos;, verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1587845641378 g.stateGroup text{fill:#9370db;stroke:none;font-size:10px}#mermaid-1587845641378 g.stateGroup .state-title{font-weight:bolder;fill:#000}#mermaid-1587845641378 g.stateGroup rect{fill:#ECECFF;stroke:#9370db}#mermaid-1587845641378 g.stateGroup line{stroke:#9370db;stroke-width:1}#mermaid-1587845641378 .transition{stroke:#9370db;stroke-width:1;fill:none}#mermaid-1587845641378 .stateGroup .composit{fill:white;border-bottom:1px}#mermaid-1587845641378 .stateGroup .alt-composit{fill:#e0e0e0;border-bottom:1px}#mermaid-1587845641378 .state-note{stroke:#aa3;fill:#fff5ad}#mermaid-1587845641378 .state-note text{fill:black;stroke:none;font-size:10px}#mermaid-1587845641378 .stateLabel .box{stroke:none;stroke-width:0;fill:#ECECFF;opacity:0.5}#mermaid-1587845641378 .stateLabel text{fill:#000;font-size:10px;font-weight:bold;font-family:&apos;trebuchet ms&apos;, verdana, arial;font-family:var(--mermaid-font-family)}:root{--mermaid-font-family: &apos;&quot;trebuchet ms&quot;, verdana, arial&apos;;--mermaid-font-family: &quot;Comic Sans MS&quot;, &quot;Comic Sans&quot;, cursive}

:root { --mermaid-font-family: &quot;trebuchet ms&quot;, verdana, arial;}&lt;/style&gt;&lt;style&gt;#mermaid-1587845641378 {
    color: rgb(0, 0, 0);
    font: normal normal 400 normal 16px / normal &quot;trebuchet ms&quot;, verdana, arial;
  }&lt;/style&gt;&lt;g&gt;&lt;/g&gt;&lt;g&gt;&lt;line id=&quot;actor0&quot; x1=&quot;75&quot; y1=&quot;5&quot; x2=&quot;75&quot; y2=&quot;185&quot; class=&quot;actor-line&quot; stroke-width=&quot;0.5px&quot; stroke=&quot;#999&quot;&gt;&lt;/line&gt;&lt;rect x=&quot;0&quot; y=&quot;0&quot; fill=&quot;#eaeaea&quot; stroke=&quot;#666&quot; width=&quot;150&quot; height=&quot;65&quot; rx=&quot;3&quot; ry=&quot;3&quot; class=&quot;actor&quot;&gt;&lt;/rect&gt;&lt;text x=&quot;75&quot; y=&quot;32.5&quot; dominant-baseline=&quot;central&quot; alignment-baseline=&quot;central&quot; class=&quot;actor&quot; style=&quot;text-anchor: middle; font-size: 14px;&quot;&gt;&lt;tspan x=&quot;75&quot; dy=&quot;0&quot;&gt;Client&lt;/tspan&gt;&lt;/text&gt;&lt;/g&gt;&lt;g&gt;&lt;line id=&quot;actor1&quot; x1=&quot;275&quot; y1=&quot;5&quot; x2=&quot;275&quot; y2=&quot;185&quot; class=&quot;actor-line&quot; stroke-width=&quot;0.5px&quot; stroke=&quot;#999&quot;&gt;&lt;/line&gt;&lt;rect x=&quot;200&quot; y=&quot;0&quot; fill=&quot;#eaeaea&quot; stroke=&quot;#666&quot; width=&quot;150&quot; height=&quot;65&quot; rx=&quot;3&quot; ry=&quot;3&quot; class=&quot;actor&quot;&gt;&lt;/rect&gt;&lt;text x=&quot;275&quot; y=&quot;32.5&quot; dominant-baseline=&quot;central&quot; alignment-baseline=&quot;central&quot; class=&quot;actor&quot; style=&quot;text-anchor: middle; font-size: 14px;&quot;&gt;&lt;tspan x=&quot;275&quot; dy=&quot;0&quot;&gt;Orchestrator&lt;/tspan&gt;&lt;/text&gt;&lt;/g&gt;&lt;defs&gt;&lt;marker id=&quot;arrowhead&quot; refX=&quot;5&quot; refY=&quot;2&quot; markerWidth=&quot;6&quot; markerHeight=&quot;4&quot; orient=&quot;auto&quot;&gt;&lt;path d=&quot;M 0,0 V 4 L6,2 Z&quot;&gt;&lt;/path&gt;&lt;/marker&gt;&lt;/defs&gt;&lt;defs&gt;&lt;marker id=&quot;crosshead&quot; markerWidth=&quot;15&quot; markerHeight=&quot;8&quot; orient=&quot;auto&quot; refX=&quot;16&quot; refY=&quot;4&quot;&gt;&lt;path fill=&quot;black&quot; stroke=&quot;#000000&quot; stroke-width=&quot;1px&quot; d=&quot;M 9,2 V 6 L16,4 Z&quot; style=&quot;stroke-dasharray: 0, 0;&quot;&gt;&lt;/path&gt;&lt;path fill=&quot;none&quot; stroke=&quot;#000000&quot; stroke-width=&quot;1px&quot; d=&quot;M 0,1 L 6,7 M 6,1 L 0,7&quot; style=&quot;stroke-dasharray: 0, 0;&quot;&gt;&lt;/path&gt;&lt;/marker&gt;&lt;/defs&gt;&lt;defs&gt;&lt;marker id=&quot;sequencenumber&quot; refX=&quot;15&quot; refY=&quot;15&quot; markerWidth=&quot;60&quot; markerHeight=&quot;40&quot; orient=&quot;auto&quot;&gt;&lt;circle cx=&quot;15&quot; cy=&quot;15&quot; r=&quot;6&quot;&gt;&lt;/circle&gt;&lt;/marker&gt;&lt;/defs&gt;&lt;g&gt;&lt;text x=&quot;175&quot; y=&quot;93&quot; class=&quot;messageText&quot; style=&quot;text-anchor: middle;&quot;&gt;ExecutionStarted&lt;/text&gt;&lt;line x1=&quot;75&quot; y1=&quot;100&quot; x2=&quot;275&quot; y2=&quot;100&quot; class=&quot;messageLine0&quot; stroke-width=&quot;2&quot; stroke=&quot;black&quot; marker-end=&quot;url(#arrowhead)&quot; style=&quot;fill: none;&quot;&gt;&lt;/line&gt;&lt;/g&gt;&lt;g&gt;&lt;rect x=&quot;0&quot; y=&quot;120&quot; fill=&quot;#eaeaea&quot; stroke=&quot;#666&quot; width=&quot;150&quot; height=&quot;65&quot; rx=&quot;3&quot; ry=&quot;3&quot; class=&quot;actor&quot;&gt;&lt;/rect&gt;&lt;text x=&quot;75&quot; y=&quot;152.5&quot; dominant-baseline=&quot;central&quot; alignment-baseline=&quot;central&quot; class=&quot;actor&quot; style=&quot;text-anchor: middle; font-size: 14px;&quot;&gt;&lt;tspan x=&quot;75&quot; dy=&quot;0&quot;&gt;Client&lt;/tspan&gt;&lt;/text&gt;&lt;/g&gt;&lt;g&gt;&lt;rect x=&quot;200&quot; y=&quot;120&quot; fill=&quot;#eaeaea&quot; stroke=&quot;#666&quot; width=&quot;150&quot; height=&quot;65&quot; rx=&quot;3&quot; ry=&quot;3&quot; class=&quot;actor&quot;&gt;&lt;/rect&gt;&lt;text x=&quot;275&quot; y=&quot;152.5&quot; dominant-baseline=&quot;central&quot; alignment-baseline=&quot;central&quot; class=&quot;actor&quot; style=&quot;text-anchor: middle; font-size: 14px;&quot;&gt;&lt;tspan x=&quot;275&quot; dy=&quot;0&quot;&gt;Orchestrator&lt;/tspan&gt;&lt;/text&gt;&lt;/g&gt;&lt;/svg&gt;&lt;/div&gt;
&lt;ol start=&quot;3&quot;&gt;
&lt;li&gt;This is received by the hub &amp;#x26; the actual &lt;a href=&quot;https://github.com/abhikmitra/DTFDemo/blob/master/Domains/TestOrchestration.cs&quot;&gt;TestOrchestration&lt;/a&gt; code is invoked. As you can see in the link above , I have put in log statements and 2 log statements are invoked.&lt;/li&gt;
&lt;/ol&gt;
&lt;div class=&quot;mermaid&quot; data-processed=&quot;true&quot;&gt;&lt;svg id=&quot;mermaid-1587845641377&quot; width=&quot;100%&quot; xmlns=&quot;http://www.w3.org/2000/svg&quot; height=&quot;100%&quot; style=&quot;max-width:850px;&quot; viewBox=&quot;-50 -10 850 266&quot;&gt;&lt;style&gt;#mermaid-1587845641377 .label{font-family:&apos;trebuchet ms&apos;, verdana, arial;font-family:var(--mermaid-font-family);color:#333}#mermaid-1587845641377 .label text{fill:#333}#mermaid-1587845641377 .node rect,#mermaid-1587845641377 .node circle,#mermaid-1587845641377 .node ellipse,#mermaid-1587845641377 .node polygon,#mermaid-1587845641377 .node path{fill:#ECECFF;stroke:#9370db;stroke-width:1px}#mermaid-1587845641377 .node .label{text-align:center}#mermaid-1587845641377 .node.clickable{cursor:pointer}#mermaid-1587845641377 .arrowheadPath{fill:#333}#mermaid-1587845641377 .edgePath .path{stroke:#333;stroke-width:1.5px}#mermaid-1587845641377 .edgeLabel{background-color:#e8e8e8;text-align:center}#mermaid-1587845641377 .cluster rect{fill:#ffffde;stroke:#aa3;stroke-width:1px}#mermaid-1587845641377 .cluster text{fill:#333}#mermaid-1587845641377 div.mermaidTooltip{position:absolute;text-align:center;max-width:200px;padding:2px;font-family:&apos;trebuchet ms&apos;, verdana, arial;font-family:var(--mermaid-font-family);font-size:12px;background:#ffffde;border:1px solid #aa3;border-radius:2px;pointer-events:none;z-index:100}#mermaid-1587845641377 .actor{stroke:#ccf;fill:#ECECFF}#mermaid-1587845641377 text.actor{fill:#000;stroke:none}#mermaid-1587845641377 .actor-line{stroke:grey}#mermaid-1587845641377 .messageLine0{stroke-width:1.5;stroke-dasharray:&apos;2 2&apos;;stroke:#333}#mermaid-1587845641377 .messageLine1{stroke-width:1.5;stroke-dasharray:&apos;2 2&apos;;stroke:#333}#mermaid-1587845641377 #arrowhead{fill:#333}#mermaid-1587845641377 .sequenceNumber{fill:#fff}#mermaid-1587845641377 #sequencenumber{fill:#333}#mermaid-1587845641377 #crosshead path{fill:#333 !important;stroke:#333 !important}#mermaid-1587845641377 .messageText{fill:#333;stroke:none}#mermaid-1587845641377 .labelBox{stroke:#ccf;fill:#ECECFF}#mermaid-1587845641377 .labelText{fill:#000;stroke:none}#mermaid-1587845641377 .loopText{fill:#000;stroke:none}#mermaid-1587845641377 .loopLine{stroke-width:2;stroke-dasharray:&apos;2 2&apos;;stroke:#ccf}#mermaid-1587845641377 .note{stroke:#aa3;fill:#fff5ad}#mermaid-1587845641377 .noteText{fill:black;stroke:none;font-family:&apos;trebuchet ms&apos;, verdana, arial;font-family:var(--mermaid-font-family);font-size:14px}#mermaid-1587845641377 .activation0{fill:#f4f4f4;stroke:#666}#mermaid-1587845641377 .activation1{fill:#f4f4f4;stroke:#666}#mermaid-1587845641377 .activation2{fill:#f4f4f4;stroke:#666}#mermaid-1587845641377 .mermaid-main-font{font-family:&quot;trebuchet ms&quot;, verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1587845641377 .section{stroke:none;opacity:0.2}#mermaid-1587845641377 .section0{fill:rgba(102,102,255,0.49)}#mermaid-1587845641377 .section2{fill:#fff400}#mermaid-1587845641377 .section1,#mermaid-1587845641377 .section3{fill:#fff;opacity:0.2}#mermaid-1587845641377 .sectionTitle0{fill:#333}#mermaid-1587845641377 .sectionTitle1{fill:#333}#mermaid-1587845641377 .sectionTitle2{fill:#333}#mermaid-1587845641377 .sectionTitle3{fill:#333}#mermaid-1587845641377 .sectionTitle{text-anchor:start;font-size:11px;text-height:14px;font-family:&apos;trebuchet ms&apos;, verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1587845641377 .grid .tick{stroke:#d3d3d3;opacity:0.8;shape-rendering:crispEdges}#mermaid-1587845641377 .grid .tick text{font-family:&apos;trebuchet ms&apos;, verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1587845641377 .grid path{stroke-width:0}#mermaid-1587845641377 .today{fill:none;stroke:red;stroke-width:2px}#mermaid-1587845641377 .task{stroke-width:2}#mermaid-1587845641377 .taskText{text-anchor:middle;font-family:&apos;trebuchet ms&apos;, verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1587845641377 .taskText:not([font-size]){font-size:11px}#mermaid-1587845641377 .taskTextOutsideRight{fill:#000;text-anchor:start;font-size:11px;font-family:&apos;trebuchet ms&apos;, verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1587845641377 .taskTextOutsideLeft{fill:#000;text-anchor:end;font-size:11px}#mermaid-1587845641377 .task.clickable{cursor:pointer}#mermaid-1587845641377 .taskText.clickable{cursor:pointer;fill:#003163 !important;font-weight:bold}#mermaid-1587845641377 .taskTextOutsideLeft.clickable{cursor:pointer;fill:#003163 !important;font-weight:bold}#mermaid-1587845641377 .taskTextOutsideRight.clickable{cursor:pointer;fill:#003163 !important;font-weight:bold}#mermaid-1587845641377 .taskText0,#mermaid-1587845641377 .taskText1,#mermaid-1587845641377 .taskText2,#mermaid-1587845641377 .taskText3{fill:#fff}#mermaid-1587845641377 .task0,#mermaid-1587845641377 .task1,#mermaid-1587845641377 .task2,#mermaid-1587845641377 .task3{fill:#8a90dd;stroke:#534fbc}#mermaid-1587845641377 .taskTextOutside0,#mermaid-1587845641377 .taskTextOutside2{fill:#000}#mermaid-1587845641377 .taskTextOutside1,#mermaid-1587845641377 .taskTextOutside3{fill:#000}#mermaid-1587845641377 .active0,#mermaid-1587845641377 .active1,#mermaid-1587845641377 .active2,#mermaid-1587845641377 .active3{fill:#bfc7ff;stroke:#534fbc}#mermaid-1587845641377 .activeText0,#mermaid-1587845641377 .activeText1,#mermaid-1587845641377 .activeText2,#mermaid-1587845641377 .activeText3{fill:#000 !important}#mermaid-1587845641377 .done0,#mermaid-1587845641377 .done1,#mermaid-1587845641377 .done2,#mermaid-1587845641377 .done3{stroke:grey;fill:#d3d3d3;stroke-width:2}#mermaid-1587845641377 .doneText0,#mermaid-1587845641377 .doneText1,#mermaid-1587845641377 .doneText2,#mermaid-1587845641377 .doneText3{fill:#000 !important}#mermaid-1587845641377 .crit0,#mermaid-1587845641377 .crit1,#mermaid-1587845641377 .crit2,#mermaid-1587845641377 .crit3{stroke:#f88;fill:red;stroke-width:2}#mermaid-1587845641377 .activeCrit0,#mermaid-1587845641377 .activeCrit1,#mermaid-1587845641377 .activeCrit2,#mermaid-1587845641377 .activeCrit3{stroke:#f88;fill:#bfc7ff;stroke-width:2}#mermaid-1587845641377 .doneCrit0,#mermaid-1587845641377 .doneCrit1,#mermaid-1587845641377 .doneCrit2,#mermaid-1587845641377 .doneCrit3{stroke:#f88;fill:#d3d3d3;stroke-width:2;cursor:pointer;shape-rendering:crispEdges}#mermaid-1587845641377 .milestone{transform:rotate(45deg) scale(0.8, 0.8)}#mermaid-1587845641377 .milestoneText{font-style:italic}#mermaid-1587845641377 .doneCritText0,#mermaid-1587845641377 .doneCritText1,#mermaid-1587845641377 .doneCritText2,#mermaid-1587845641377 .doneCritText3{fill:#000 !important}#mermaid-1587845641377 .activeCritText0,#mermaid-1587845641377 .activeCritText1,#mermaid-1587845641377 .activeCritText2,#mermaid-1587845641377 .activeCritText3{fill:#000 !important}#mermaid-1587845641377 .titleText{text-anchor:middle;font-size:18px;fill:#000;font-family:&apos;trebuchet ms&apos;, verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1587845641377 g.classGroup text{fill:#9370db;stroke:none;font-family:&apos;trebuchet ms&apos;, verdana, arial;font-family:var(--mermaid-font-family);font-size:10px}#mermaid-1587845641377 g.classGroup text .title{font-weight:bolder}#mermaid-1587845641377 g.clickable{cursor:pointer}#mermaid-1587845641377 g.classGroup rect{fill:#ECECFF;stroke:#9370db}#mermaid-1587845641377 g.classGroup line{stroke:#9370db;stroke-width:1}#mermaid-1587845641377 .classLabel .box{stroke:none;stroke-width:0;fill:#ECECFF;opacity:0.5}#mermaid-1587845641377 .classLabel .label{fill:#9370db;font-size:10px}#mermaid-1587845641377 .relation{stroke:#9370db;stroke-width:1;fill:none}#mermaid-1587845641377 .dashed-line{stroke-dasharray:3}#mermaid-1587845641377 #compositionStart{fill:#9370db;stroke:#9370db;stroke-width:1}#mermaid-1587845641377 #compositionEnd{fill:#9370db;stroke:#9370db;stroke-width:1}#mermaid-1587845641377 #aggregationStart{fill:#ECECFF;stroke:#9370db;stroke-width:1}#mermaid-1587845641377 #aggregationEnd{fill:#ECECFF;stroke:#9370db;stroke-width:1}#mermaid-1587845641377 #dependencyStart{fill:#9370db;stroke:#9370db;stroke-width:1}#mermaid-1587845641377 #dependencyEnd{fill:#9370db;stroke:#9370db;stroke-width:1}#mermaid-1587845641377 #extensionStart{fill:#9370db;stroke:#9370db;stroke-width:1}#mermaid-1587845641377 #extensionEnd{fill:#9370db;stroke:#9370db;stroke-width:1}#mermaid-1587845641377 .commit-id,#mermaid-1587845641377 .commit-msg,#mermaid-1587845641377 .branch-label{fill:lightgrey;color:lightgrey;font-family:&apos;trebuchet ms&apos;, verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1587845641377 .pieTitleText{text-anchor:middle;font-size:25px;fill:#000;font-family:&apos;trebuchet ms&apos;, verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1587845641377 .slice{font-family:&apos;trebuchet ms&apos;, verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1587845641377 g.stateGroup text{fill:#9370db;stroke:none;font-size:10px;font-family:&apos;trebuchet ms&apos;, verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1587845641377 g.stateGroup text{fill:#9370db;stroke:none;font-size:10px}#mermaid-1587845641377 g.stateGroup .state-title{font-weight:bolder;fill:#000}#mermaid-1587845641377 g.stateGroup rect{fill:#ECECFF;stroke:#9370db}#mermaid-1587845641377 g.stateGroup line{stroke:#9370db;stroke-width:1}#mermaid-1587845641377 .transition{stroke:#9370db;stroke-width:1;fill:none}#mermaid-1587845641377 .stateGroup .composit{fill:white;border-bottom:1px}#mermaid-1587845641377 .stateGroup .alt-composit{fill:#e0e0e0;border-bottom:1px}#mermaid-1587845641377 .state-note{stroke:#aa3;fill:#fff5ad}#mermaid-1587845641377 .state-note text{fill:black;stroke:none;font-size:10px}#mermaid-1587845641377 .stateLabel .box{stroke:none;stroke-width:0;fill:#ECECFF;opacity:0.5}#mermaid-1587845641377 .stateLabel text{fill:#000;font-size:10px;font-weight:bold;font-family:&apos;trebuchet ms&apos;, verdana, arial;font-family:var(--mermaid-font-family)}:root{--mermaid-font-family: &apos;&quot;trebuchet ms&quot;, verdana, arial&apos;;--mermaid-font-family: &quot;Comic Sans MS&quot;, &quot;Comic Sans&quot;, cursive}

:root { --mermaid-font-family: &quot;trebuchet ms&quot;, verdana, arial;}&lt;/style&gt;&lt;style&gt;#mermaid-1587845641377 {
    color: rgb(0, 0, 0);
    font: normal normal 400 normal 16px / normal &quot;trebuchet ms&quot;, verdana, arial;
  }&lt;/style&gt;&lt;g&gt;&lt;/g&gt;&lt;g&gt;&lt;line id=&quot;actor0&quot; x1=&quot;75&quot; y1=&quot;5&quot; x2=&quot;75&quot; y2=&quot;255&quot; class=&quot;actor-line&quot; stroke-width=&quot;0.5px&quot; stroke=&quot;#999&quot;&gt;&lt;/line&gt;&lt;rect x=&quot;0&quot; y=&quot;0&quot; fill=&quot;#eaeaea&quot; stroke=&quot;#666&quot; width=&quot;150&quot; height=&quot;65&quot; rx=&quot;3&quot; ry=&quot;3&quot; class=&quot;actor&quot;&gt;&lt;/rect&gt;&lt;text x=&quot;75&quot; y=&quot;32.5&quot; dominant-baseline=&quot;central&quot; alignment-baseline=&quot;central&quot; class=&quot;actor&quot; style=&quot;text-anchor: middle; font-size: 14px;&quot;&gt;&lt;tspan x=&quot;75&quot; dy=&quot;0&quot;&gt;Client&lt;/tspan&gt;&lt;/text&gt;&lt;/g&gt;&lt;g&gt;&lt;line id=&quot;actor1&quot; x1=&quot;275&quot; y1=&quot;5&quot; x2=&quot;275&quot; y2=&quot;255&quot; class=&quot;actor-line&quot; stroke-width=&quot;0.5px&quot; stroke=&quot;#999&quot;&gt;&lt;/line&gt;&lt;rect x=&quot;200&quot; y=&quot;0&quot; fill=&quot;#eaeaea&quot; stroke=&quot;#666&quot; width=&quot;150&quot; height=&quot;65&quot; rx=&quot;3&quot; ry=&quot;3&quot; class=&quot;actor&quot;&gt;&lt;/rect&gt;&lt;text x=&quot;275&quot; y=&quot;32.5&quot; dominant-baseline=&quot;central&quot; alignment-baseline=&quot;central&quot; class=&quot;actor&quot; style=&quot;text-anchor: middle; font-size: 14px;&quot;&gt;&lt;tspan x=&quot;275&quot; dy=&quot;0&quot;&gt;Orchestrator&lt;/tspan&gt;&lt;/text&gt;&lt;/g&gt;&lt;g&gt;&lt;line id=&quot;actor2&quot; x1=&quot;475&quot; y1=&quot;5&quot; x2=&quot;475&quot; y2=&quot;255&quot; class=&quot;actor-line&quot; stroke-width=&quot;0.5px&quot; stroke=&quot;#999&quot;&gt;&lt;/line&gt;&lt;rect x=&quot;400&quot; y=&quot;0&quot; fill=&quot;#eaeaea&quot; stroke=&quot;#666&quot; width=&quot;150&quot; height=&quot;65&quot; rx=&quot;3&quot; ry=&quot;3&quot; class=&quot;actor&quot;&gt;&lt;/rect&gt;&lt;text x=&quot;475&quot; y=&quot;32.5&quot; dominant-baseline=&quot;central&quot; alignment-baseline=&quot;central&quot; class=&quot;actor&quot; style=&quot;text-anchor: middle; font-size: 14px;&quot;&gt;&lt;tspan x=&quot;475&quot; dy=&quot;0&quot;&gt;Hub&lt;/tspan&gt;&lt;/text&gt;&lt;/g&gt;&lt;g&gt;&lt;line id=&quot;actor3&quot; x1=&quot;675&quot; y1=&quot;5&quot; x2=&quot;675&quot; y2=&quot;255&quot; class=&quot;actor-line&quot; stroke-width=&quot;0.5px&quot; stroke=&quot;#999&quot;&gt;&lt;/line&gt;&lt;rect x=&quot;600&quot; y=&quot;0&quot; fill=&quot;#eaeaea&quot; stroke=&quot;#666&quot; width=&quot;150&quot; height=&quot;65&quot; rx=&quot;3&quot; ry=&quot;3&quot; class=&quot;actor&quot;&gt;&lt;/rect&gt;&lt;text x=&quot;675&quot; y=&quot;32.5&quot; dominant-baseline=&quot;central&quot; alignment-baseline=&quot;central&quot; class=&quot;actor&quot; style=&quot;text-anchor: middle; font-size: 14px;&quot;&gt;&lt;tspan x=&quot;675&quot; dy=&quot;0&quot;&gt;TestOrchestration&lt;/tspan&gt;&lt;/text&gt;&lt;/g&gt;&lt;defs&gt;&lt;marker id=&quot;arrowhead&quot; refX=&quot;5&quot; refY=&quot;2&quot; markerWidth=&quot;6&quot; markerHeight=&quot;4&quot; orient=&quot;auto&quot;&gt;&lt;path d=&quot;M 0,0 V 4 L6,2 Z&quot;&gt;&lt;/path&gt;&lt;/marker&gt;&lt;/defs&gt;&lt;defs&gt;&lt;marker id=&quot;crosshead&quot; markerWidth=&quot;15&quot; markerHeight=&quot;8&quot; orient=&quot;auto&quot; refX=&quot;16&quot; refY=&quot;4&quot;&gt;&lt;path fill=&quot;black&quot; stroke=&quot;#000000&quot; stroke-width=&quot;1px&quot; d=&quot;M 9,2 V 6 L16,4 Z&quot; style=&quot;stroke-dasharray: 0, 0;&quot;&gt;&lt;/path&gt;&lt;path fill=&quot;none&quot; stroke=&quot;#000000&quot; stroke-width=&quot;1px&quot; d=&quot;M 0,1 L 6,7 M 6,1 L 0,7&quot; style=&quot;stroke-dasharray: 0, 0;&quot;&gt;&lt;/path&gt;&lt;/marker&gt;&lt;/defs&gt;&lt;defs&gt;&lt;marker id=&quot;sequencenumber&quot; refX=&quot;15&quot; refY=&quot;15&quot; markerWidth=&quot;60&quot; markerHeight=&quot;40&quot; orient=&quot;auto&quot;&gt;&lt;circle cx=&quot;15&quot; cy=&quot;15&quot; r=&quot;6&quot;&gt;&lt;/circle&gt;&lt;/marker&gt;&lt;/defs&gt;&lt;g&gt;&lt;text x=&quot;175&quot; y=&quot;93&quot; class=&quot;messageText&quot; style=&quot;text-anchor: middle;&quot;&gt;ExecutionStarted&lt;/text&gt;&lt;line x1=&quot;75&quot; y1=&quot;100&quot; x2=&quot;275&quot; y2=&quot;100&quot; class=&quot;messageLine1&quot; stroke-width=&quot;2&quot; stroke=&quot;black&quot; marker-end=&quot;url(#arrowhead)&quot; style=&quot;stroke-dasharray: 3, 3; fill: none;&quot;&gt;&lt;/line&gt;&lt;/g&gt;&lt;g&gt;&lt;text x=&quot;375&quot; y=&quot;128&quot; class=&quot;messageText&quot; style=&quot;text-anchor: middle;&quot;&gt;ExecutionStarted&lt;/text&gt;&lt;line x1=&quot;275&quot; y1=&quot;135&quot; x2=&quot;475&quot; y2=&quot;135&quot; class=&quot;messageLine1&quot; stroke-width=&quot;2&quot; stroke=&quot;black&quot; marker-end=&quot;url(#arrowhead)&quot; style=&quot;stroke-dasharray: 3, 3; fill: none;&quot;&gt;&lt;/line&gt;&lt;/g&gt;&lt;g&gt;&lt;text x=&quot;575&quot; y=&quot;163&quot; class=&quot;messageText&quot; style=&quot;text-anchor: middle;&quot;&gt;Orchestration Invoked&lt;/text&gt;&lt;line x1=&quot;475&quot; y1=&quot;170&quot; x2=&quot;675&quot; y2=&quot;170&quot; class=&quot;messageLine0&quot; stroke-width=&quot;2&quot; stroke=&quot;black&quot; marker-end=&quot;url(#arrowhead)&quot; style=&quot;fill: none;&quot;&gt;&lt;/line&gt;&lt;/g&gt;&lt;g&gt;&lt;rect x=&quot;0&quot; y=&quot;190&quot; fill=&quot;#eaeaea&quot; stroke=&quot;#666&quot; width=&quot;150&quot; height=&quot;65&quot; rx=&quot;3&quot; ry=&quot;3&quot; class=&quot;actor&quot;&gt;&lt;/rect&gt;&lt;text x=&quot;75&quot; y=&quot;222.5&quot; dominant-baseline=&quot;central&quot; alignment-baseline=&quot;central&quot; class=&quot;actor&quot; style=&quot;text-anchor: middle; font-size: 14px;&quot;&gt;&lt;tspan x=&quot;75&quot; dy=&quot;0&quot;&gt;Client&lt;/tspan&gt;&lt;/text&gt;&lt;/g&gt;&lt;g&gt;&lt;rect x=&quot;200&quot; y=&quot;190&quot; fill=&quot;#eaeaea&quot; stroke=&quot;#666&quot; width=&quot;150&quot; height=&quot;65&quot; rx=&quot;3&quot; ry=&quot;3&quot; class=&quot;actor&quot;&gt;&lt;/rect&gt;&lt;text x=&quot;275&quot; y=&quot;222.5&quot; dominant-baseline=&quot;central&quot; alignment-baseline=&quot;central&quot; class=&quot;actor&quot; style=&quot;text-anchor: middle; font-size: 14px;&quot;&gt;&lt;tspan x=&quot;275&quot; dy=&quot;0&quot;&gt;Orchestrator&lt;/tspan&gt;&lt;/text&gt;&lt;/g&gt;&lt;g&gt;&lt;rect x=&quot;400&quot; y=&quot;190&quot; fill=&quot;#eaeaea&quot; stroke=&quot;#666&quot; width=&quot;150&quot; height=&quot;65&quot; rx=&quot;3&quot; ry=&quot;3&quot; class=&quot;actor&quot;&gt;&lt;/rect&gt;&lt;text x=&quot;475&quot; y=&quot;222.5&quot; dominant-baseline=&quot;central&quot; alignment-baseline=&quot;central&quot; class=&quot;actor&quot; style=&quot;text-anchor: middle; font-size: 14px;&quot;&gt;&lt;tspan x=&quot;475&quot; dy=&quot;0&quot;&gt;Hub&lt;/tspan&gt;&lt;/text&gt;&lt;/g&gt;&lt;g&gt;&lt;rect x=&quot;600&quot; y=&quot;190&quot; fill=&quot;#eaeaea&quot; stroke=&quot;#666&quot; width=&quot;150&quot; height=&quot;65&quot; rx=&quot;3&quot; ry=&quot;3&quot; class=&quot;actor&quot;&gt;&lt;/rect&gt;&lt;text x=&quot;675&quot; y=&quot;222.5&quot; dominant-baseline=&quot;central&quot; alignment-baseline=&quot;central&quot; class=&quot;actor&quot; style=&quot;text-anchor: middle; font-size: 14px;&quot;&gt;&lt;tspan x=&quot;675&quot; dy=&quot;0&quot;&gt;TestOrchestration&lt;/tspan&gt;&lt;/text&gt;&lt;/g&gt;&lt;/svg&gt;&lt;/div&gt;
&lt;ol start=&quot;4&quot;&gt;
&lt;li&gt;
&lt;p&gt;Assume the orchestration code is as below. The orchestration runs till &lt;code class=&quot;language-text&quot;&gt;scheduleWithRetry&lt;/code&gt; and prints &lt;code class=&quot;language-text&quot;&gt;Running Orchestration&lt;/code&gt; into the console. Since this is the first time orchestration is running &lt;code class=&quot;language-text&quot;&gt;Is replaying&lt;/code&gt; is set to false. &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;csharp&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber NaN&quot; class=&quot;language-csharp line-numbers&quot;&gt;&lt;code class=&quot;language-csharp&quot;&gt;Console&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;WriteLine&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;Is Replaying =&quot;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; context&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;IsReplaying&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
Console&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;WriteLine&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;Running Orchestration&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;await&lt;/span&gt; context&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token generic-method&quot;&gt;&lt;span class=&quot;token function&quot;&gt;ScheduleWithRetry&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;bool&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;typeof&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;TestActivity1&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; options&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
Console&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;WriteLine&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;Orchestration Finished&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; result&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;When the orchestration encounters an activity it puts a message into the Worker Queue and exits the orchestration. The rest of the orchestration is not executed.&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;div class=&quot;mermaid&quot; data-processed=&quot;true&quot;&gt;&lt;svg id=&quot;mermaid-1587845641811&quot; width=&quot;100%&quot; xmlns=&quot;http://www.w3.org/2000/svg&quot; height=&quot;100%&quot; style=&quot;max-width:1050px;&quot; viewBox=&quot;-50 -10 1050 301&quot;&gt;&lt;style&gt;#mermaid-1587845641811 .label{font-family:&apos;trebuchet ms&apos;, verdana, arial;font-family:var(--mermaid-font-family);color:#333}#mermaid-1587845641811 .label text{fill:#333}#mermaid-1587845641811 .node rect,#mermaid-1587845641811 .node circle,#mermaid-1587845641811 .node ellipse,#mermaid-1587845641811 .node polygon,#mermaid-1587845641811 .node path{fill:#ECECFF;stroke:#9370db;stroke-width:1px}#mermaid-1587845641811 .node .label{text-align:center}#mermaid-1587845641811 .node.clickable{cursor:pointer}#mermaid-1587845641811 .arrowheadPath{fill:#333}#mermaid-1587845641811 .edgePath .path{stroke:#333;stroke-width:1.5px}#mermaid-1587845641811 .edgeLabel{background-color:#e8e8e8;text-align:center}#mermaid-1587845641811 .cluster rect{fill:#ffffde;stroke:#aa3;stroke-width:1px}#mermaid-1587845641811 .cluster text{fill:#333}#mermaid-1587845641811 div.mermaidTooltip{position:absolute;text-align:center;max-width:200px;padding:2px;font-family:&apos;trebuchet ms&apos;, verdana, arial;font-family:var(--mermaid-font-family);font-size:12px;background:#ffffde;border:1px solid #aa3;border-radius:2px;pointer-events:none;z-index:100}#mermaid-1587845641811 .actor{stroke:#ccf;fill:#ECECFF}#mermaid-1587845641811 text.actor{fill:#000;stroke:none}#mermaid-1587845641811 .actor-line{stroke:grey}#mermaid-1587845641811 .messageLine0{stroke-width:1.5;stroke-dasharray:&apos;2 2&apos;;stroke:#333}#mermaid-1587845641811 .messageLine1{stroke-width:1.5;stroke-dasharray:&apos;2 2&apos;;stroke:#333}#mermaid-1587845641811 #arrowhead{fill:#333}#mermaid-1587845641811 .sequenceNumber{fill:#fff}#mermaid-1587845641811 #sequencenumber{fill:#333}#mermaid-1587845641811 #crosshead path{fill:#333 !important;stroke:#333 !important}#mermaid-1587845641811 .messageText{fill:#333;stroke:none}#mermaid-1587845641811 .labelBox{stroke:#ccf;fill:#ECECFF}#mermaid-1587845641811 .labelText{fill:#000;stroke:none}#mermaid-1587845641811 .loopText{fill:#000;stroke:none}#mermaid-1587845641811 .loopLine{stroke-width:2;stroke-dasharray:&apos;2 2&apos;;stroke:#ccf}#mermaid-1587845641811 .note{stroke:#aa3;fill:#fff5ad}#mermaid-1587845641811 .noteText{fill:black;stroke:none;font-family:&apos;trebuchet ms&apos;, verdana, arial;font-family:var(--mermaid-font-family);font-size:14px}#mermaid-1587845641811 .activation0{fill:#f4f4f4;stroke:#666}#mermaid-1587845641811 .activation1{fill:#f4f4f4;stroke:#666}#mermaid-1587845641811 .activation2{fill:#f4f4f4;stroke:#666}#mermaid-1587845641811 .mermaid-main-font{font-family:&quot;trebuchet ms&quot;, verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1587845641811 .section{stroke:none;opacity:0.2}#mermaid-1587845641811 .section0{fill:rgba(102,102,255,0.49)}#mermaid-1587845641811 .section2{fill:#fff400}#mermaid-1587845641811 .section1,#mermaid-1587845641811 .section3{fill:#fff;opacity:0.2}#mermaid-1587845641811 .sectionTitle0{fill:#333}#mermaid-1587845641811 .sectionTitle1{fill:#333}#mermaid-1587845641811 .sectionTitle2{fill:#333}#mermaid-1587845641811 .sectionTitle3{fill:#333}#mermaid-1587845641811 .sectionTitle{text-anchor:start;font-size:11px;text-height:14px;font-family:&apos;trebuchet ms&apos;, verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1587845641811 .grid .tick{stroke:#d3d3d3;opacity:0.8;shape-rendering:crispEdges}#mermaid-1587845641811 .grid .tick text{font-family:&apos;trebuchet ms&apos;, verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1587845641811 .grid path{stroke-width:0}#mermaid-1587845641811 .today{fill:none;stroke:red;stroke-width:2px}#mermaid-1587845641811 .task{stroke-width:2}#mermaid-1587845641811 .taskText{text-anchor:middle;font-family:&apos;trebuchet ms&apos;, verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1587845641811 .taskText:not([font-size]){font-size:11px}#mermaid-1587845641811 .taskTextOutsideRight{fill:#000;text-anchor:start;font-size:11px;font-family:&apos;trebuchet ms&apos;, verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1587845641811 .taskTextOutsideLeft{fill:#000;text-anchor:end;font-size:11px}#mermaid-1587845641811 .task.clickable{cursor:pointer}#mermaid-1587845641811 .taskText.clickable{cursor:pointer;fill:#003163 !important;font-weight:bold}#mermaid-1587845641811 .taskTextOutsideLeft.clickable{cursor:pointer;fill:#003163 !important;font-weight:bold}#mermaid-1587845641811 .taskTextOutsideRight.clickable{cursor:pointer;fill:#003163 !important;font-weight:bold}#mermaid-1587845641811 .taskText0,#mermaid-1587845641811 .taskText1,#mermaid-1587845641811 .taskText2,#mermaid-1587845641811 .taskText3{fill:#fff}#mermaid-1587845641811 .task0,#mermaid-1587845641811 .task1,#mermaid-1587845641811 .task2,#mermaid-1587845641811 .task3{fill:#8a90dd;stroke:#534fbc}#mermaid-1587845641811 .taskTextOutside0,#mermaid-1587845641811 .taskTextOutside2{fill:#000}#mermaid-1587845641811 .taskTextOutside1,#mermaid-1587845641811 .taskTextOutside3{fill:#000}#mermaid-1587845641811 .active0,#mermaid-1587845641811 .active1,#mermaid-1587845641811 .active2,#mermaid-1587845641811 .active3{fill:#bfc7ff;stroke:#534fbc}#mermaid-1587845641811 .activeText0,#mermaid-1587845641811 .activeText1,#mermaid-1587845641811 .activeText2,#mermaid-1587845641811 .activeText3{fill:#000 !important}#mermaid-1587845641811 .done0,#mermaid-1587845641811 .done1,#mermaid-1587845641811 .done2,#mermaid-1587845641811 .done3{stroke:grey;fill:#d3d3d3;stroke-width:2}#mermaid-1587845641811 .doneText0,#mermaid-1587845641811 .doneText1,#mermaid-1587845641811 .doneText2,#mermaid-1587845641811 .doneText3{fill:#000 !important}#mermaid-1587845641811 .crit0,#mermaid-1587845641811 .crit1,#mermaid-1587845641811 .crit2,#mermaid-1587845641811 .crit3{stroke:#f88;fill:red;stroke-width:2}#mermaid-1587845641811 .activeCrit0,#mermaid-1587845641811 .activeCrit1,#mermaid-1587845641811 .activeCrit2,#mermaid-1587845641811 .activeCrit3{stroke:#f88;fill:#bfc7ff;stroke-width:2}#mermaid-1587845641811 .doneCrit0,#mermaid-1587845641811 .doneCrit1,#mermaid-1587845641811 .doneCrit2,#mermaid-1587845641811 .doneCrit3{stroke:#f88;fill:#d3d3d3;stroke-width:2;cursor:pointer;shape-rendering:crispEdges}#mermaid-1587845641811 .milestone{transform:rotate(45deg) scale(0.8, 0.8)}#mermaid-1587845641811 .milestoneText{font-style:italic}#mermaid-1587845641811 .doneCritText0,#mermaid-1587845641811 .doneCritText1,#mermaid-1587845641811 .doneCritText2,#mermaid-1587845641811 .doneCritText3{fill:#000 !important}#mermaid-1587845641811 .activeCritText0,#mermaid-1587845641811 .activeCritText1,#mermaid-1587845641811 .activeCritText2,#mermaid-1587845641811 .activeCritText3{fill:#000 !important}#mermaid-1587845641811 .titleText{text-anchor:middle;font-size:18px;fill:#000;font-family:&apos;trebuchet ms&apos;, verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1587845641811 g.classGroup text{fill:#9370db;stroke:none;font-family:&apos;trebuchet ms&apos;, verdana, arial;font-family:var(--mermaid-font-family);font-size:10px}#mermaid-1587845641811 g.classGroup text .title{font-weight:bolder}#mermaid-1587845641811 g.clickable{cursor:pointer}#mermaid-1587845641811 g.classGroup rect{fill:#ECECFF;stroke:#9370db}#mermaid-1587845641811 g.classGroup line{stroke:#9370db;stroke-width:1}#mermaid-1587845641811 .classLabel .box{stroke:none;stroke-width:0;fill:#ECECFF;opacity:0.5}#mermaid-1587845641811 .classLabel .label{fill:#9370db;font-size:10px}#mermaid-1587845641811 .relation{stroke:#9370db;stroke-width:1;fill:none}#mermaid-1587845641811 .dashed-line{stroke-dasharray:3}#mermaid-1587845641811 #compositionStart{fill:#9370db;stroke:#9370db;stroke-width:1}#mermaid-1587845641811 #compositionEnd{fill:#9370db;stroke:#9370db;stroke-width:1}#mermaid-1587845641811 #aggregationStart{fill:#ECECFF;stroke:#9370db;stroke-width:1}#mermaid-1587845641811 #aggregationEnd{fill:#ECECFF;stroke:#9370db;stroke-width:1}#mermaid-1587845641811 #dependencyStart{fill:#9370db;stroke:#9370db;stroke-width:1}#mermaid-1587845641811 #dependencyEnd{fill:#9370db;stroke:#9370db;stroke-width:1}#mermaid-1587845641811 #extensionStart{fill:#9370db;stroke:#9370db;stroke-width:1}#mermaid-1587845641811 #extensionEnd{fill:#9370db;stroke:#9370db;stroke-width:1}#mermaid-1587845641811 .commit-id,#mermaid-1587845641811 .commit-msg,#mermaid-1587845641811 .branch-label{fill:lightgrey;color:lightgrey;font-family:&apos;trebuchet ms&apos;, verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1587845641811 .pieTitleText{text-anchor:middle;font-size:25px;fill:#000;font-family:&apos;trebuchet ms&apos;, verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1587845641811 .slice{font-family:&apos;trebuchet ms&apos;, verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1587845641811 g.stateGroup text{fill:#9370db;stroke:none;font-size:10px;font-family:&apos;trebuchet ms&apos;, verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1587845641811 g.stateGroup text{fill:#9370db;stroke:none;font-size:10px}#mermaid-1587845641811 g.stateGroup .state-title{font-weight:bolder;fill:#000}#mermaid-1587845641811 g.stateGroup rect{fill:#ECECFF;stroke:#9370db}#mermaid-1587845641811 g.stateGroup line{stroke:#9370db;stroke-width:1}#mermaid-1587845641811 .transition{stroke:#9370db;stroke-width:1;fill:none}#mermaid-1587845641811 .stateGroup .composit{fill:white;border-bottom:1px}#mermaid-1587845641811 .stateGroup .alt-composit{fill:#e0e0e0;border-bottom:1px}#mermaid-1587845641811 .state-note{stroke:#aa3;fill:#fff5ad}#mermaid-1587845641811 .state-note text{fill:black;stroke:none;font-size:10px}#mermaid-1587845641811 .stateLabel .box{stroke:none;stroke-width:0;fill:#ECECFF;opacity:0.5}#mermaid-1587845641811 .stateLabel text{fill:#000;font-size:10px;font-weight:bold;font-family:&apos;trebuchet ms&apos;, verdana, arial;font-family:var(--mermaid-font-family)}:root{--mermaid-font-family: &apos;&quot;trebuchet ms&quot;, verdana, arial&apos;;--mermaid-font-family: &quot;Comic Sans MS&quot;, &quot;Comic Sans&quot;, cursive}

:root { --mermaid-font-family: &quot;trebuchet ms&quot;, verdana, arial;}&lt;/style&gt;&lt;style&gt;#mermaid-1587845641811 {
    color: rgb(0, 0, 0);
    font: normal normal 400 normal 16px / normal &quot;trebuchet ms&quot;, verdana, arial;
  }&lt;/style&gt;&lt;g&gt;&lt;/g&gt;&lt;g&gt;&lt;line id=&quot;actor0&quot; x1=&quot;75&quot; y1=&quot;5&quot; x2=&quot;75&quot; y2=&quot;290&quot; class=&quot;actor-line&quot; stroke-width=&quot;0.5px&quot; stroke=&quot;#999&quot;&gt;&lt;/line&gt;&lt;rect x=&quot;0&quot; y=&quot;0&quot; fill=&quot;#eaeaea&quot; stroke=&quot;#666&quot; width=&quot;150&quot; height=&quot;65&quot; rx=&quot;3&quot; ry=&quot;3&quot; class=&quot;actor&quot;&gt;&lt;/rect&gt;&lt;text x=&quot;75&quot; y=&quot;32.5&quot; dominant-baseline=&quot;central&quot; alignment-baseline=&quot;central&quot; class=&quot;actor&quot; style=&quot;text-anchor: middle; font-size: 14px;&quot;&gt;&lt;tspan x=&quot;75&quot; dy=&quot;0&quot;&gt;Client&lt;/tspan&gt;&lt;/text&gt;&lt;/g&gt;&lt;g&gt;&lt;line id=&quot;actor1&quot; x1=&quot;275&quot; y1=&quot;5&quot; x2=&quot;275&quot; y2=&quot;290&quot; class=&quot;actor-line&quot; stroke-width=&quot;0.5px&quot; stroke=&quot;#999&quot;&gt;&lt;/line&gt;&lt;rect x=&quot;200&quot; y=&quot;0&quot; fill=&quot;#eaeaea&quot; stroke=&quot;#666&quot; width=&quot;150&quot; height=&quot;65&quot; rx=&quot;3&quot; ry=&quot;3&quot; class=&quot;actor&quot;&gt;&lt;/rect&gt;&lt;text x=&quot;275&quot; y=&quot;32.5&quot; dominant-baseline=&quot;central&quot; alignment-baseline=&quot;central&quot; class=&quot;actor&quot; style=&quot;text-anchor: middle; font-size: 14px;&quot;&gt;&lt;tspan x=&quot;275&quot; dy=&quot;0&quot;&gt;Orchestrator&lt;/tspan&gt;&lt;/text&gt;&lt;/g&gt;&lt;g&gt;&lt;line id=&quot;actor2&quot; x1=&quot;475&quot; y1=&quot;5&quot; x2=&quot;475&quot; y2=&quot;290&quot; class=&quot;actor-line&quot; stroke-width=&quot;0.5px&quot; stroke=&quot;#999&quot;&gt;&lt;/line&gt;&lt;rect x=&quot;400&quot; y=&quot;0&quot; fill=&quot;#eaeaea&quot; stroke=&quot;#666&quot; width=&quot;150&quot; height=&quot;65&quot; rx=&quot;3&quot; ry=&quot;3&quot; class=&quot;actor&quot;&gt;&lt;/rect&gt;&lt;text x=&quot;475&quot; y=&quot;32.5&quot; dominant-baseline=&quot;central&quot; alignment-baseline=&quot;central&quot; class=&quot;actor&quot; style=&quot;text-anchor: middle; font-size: 14px;&quot;&gt;&lt;tspan x=&quot;475&quot; dy=&quot;0&quot;&gt;Hub&lt;/tspan&gt;&lt;/text&gt;&lt;/g&gt;&lt;g&gt;&lt;line id=&quot;actor3&quot; x1=&quot;675&quot; y1=&quot;5&quot; x2=&quot;675&quot; y2=&quot;290&quot; class=&quot;actor-line&quot; stroke-width=&quot;0.5px&quot; stroke=&quot;#999&quot;&gt;&lt;/line&gt;&lt;rect x=&quot;600&quot; y=&quot;0&quot; fill=&quot;#eaeaea&quot; stroke=&quot;#666&quot; width=&quot;150&quot; height=&quot;65&quot; rx=&quot;3&quot; ry=&quot;3&quot; class=&quot;actor&quot;&gt;&lt;/rect&gt;&lt;text x=&quot;675&quot; y=&quot;32.5&quot; dominant-baseline=&quot;central&quot; alignment-baseline=&quot;central&quot; class=&quot;actor&quot; style=&quot;text-anchor: middle; font-size: 14px;&quot;&gt;&lt;tspan x=&quot;675&quot; dy=&quot;0&quot;&gt;TestOrchestration&lt;/tspan&gt;&lt;/text&gt;&lt;/g&gt;&lt;g&gt;&lt;line id=&quot;actor4&quot; x1=&quot;875&quot; y1=&quot;5&quot; x2=&quot;875&quot; y2=&quot;290&quot; class=&quot;actor-line&quot; stroke-width=&quot;0.5px&quot; stroke=&quot;#999&quot;&gt;&lt;/line&gt;&lt;rect x=&quot;800&quot; y=&quot;0&quot; fill=&quot;#eaeaea&quot; stroke=&quot;#666&quot; width=&quot;150&quot; height=&quot;65&quot; rx=&quot;3&quot; ry=&quot;3&quot; class=&quot;actor&quot;&gt;&lt;/rect&gt;&lt;text x=&quot;875&quot; y=&quot;32.5&quot; dominant-baseline=&quot;central&quot; alignment-baseline=&quot;central&quot; class=&quot;actor&quot; style=&quot;text-anchor: middle; font-size: 14px;&quot;&gt;&lt;tspan x=&quot;875&quot; dy=&quot;0&quot;&gt;Worker&lt;/tspan&gt;&lt;/text&gt;&lt;/g&gt;&lt;defs&gt;&lt;marker id=&quot;arrowhead&quot; refX=&quot;5&quot; refY=&quot;2&quot; markerWidth=&quot;6&quot; markerHeight=&quot;4&quot; orient=&quot;auto&quot;&gt;&lt;path d=&quot;M 0,0 V 4 L6,2 Z&quot;&gt;&lt;/path&gt;&lt;/marker&gt;&lt;/defs&gt;&lt;defs&gt;&lt;marker id=&quot;crosshead&quot; markerWidth=&quot;15&quot; markerHeight=&quot;8&quot; orient=&quot;auto&quot; refX=&quot;16&quot; refY=&quot;4&quot;&gt;&lt;path fill=&quot;black&quot; stroke=&quot;#000000&quot; stroke-width=&quot;1px&quot; d=&quot;M 9,2 V 6 L16,4 Z&quot; style=&quot;stroke-dasharray: 0, 0;&quot;&gt;&lt;/path&gt;&lt;path fill=&quot;none&quot; stroke=&quot;#000000&quot; stroke-width=&quot;1px&quot; d=&quot;M 0,1 L 6,7 M 6,1 L 0,7&quot; style=&quot;stroke-dasharray: 0, 0;&quot;&gt;&lt;/path&gt;&lt;/marker&gt;&lt;/defs&gt;&lt;defs&gt;&lt;marker id=&quot;sequencenumber&quot; refX=&quot;15&quot; refY=&quot;15&quot; markerWidth=&quot;60&quot; markerHeight=&quot;40&quot; orient=&quot;auto&quot;&gt;&lt;circle cx=&quot;15&quot; cy=&quot;15&quot; r=&quot;6&quot;&gt;&lt;/circle&gt;&lt;/marker&gt;&lt;/defs&gt;&lt;g&gt;&lt;text x=&quot;175&quot; y=&quot;93&quot; class=&quot;messageText&quot; style=&quot;text-anchor: middle;&quot;&gt;ExecutionStarted&lt;/text&gt;&lt;line x1=&quot;75&quot; y1=&quot;100&quot; x2=&quot;275&quot; y2=&quot;100&quot; class=&quot;messageLine1&quot; stroke-width=&quot;2&quot; stroke=&quot;black&quot; marker-end=&quot;url(#arrowhead)&quot; style=&quot;stroke-dasharray: 3, 3; fill: none;&quot;&gt;&lt;/line&gt;&lt;/g&gt;&lt;g&gt;&lt;text x=&quot;375&quot; y=&quot;128&quot; class=&quot;messageText&quot; style=&quot;text-anchor: middle;&quot;&gt;ExecutionStarted&lt;/text&gt;&lt;line x1=&quot;275&quot; y1=&quot;135&quot; x2=&quot;475&quot; y2=&quot;135&quot; class=&quot;messageLine1&quot; stroke-width=&quot;2&quot; stroke=&quot;black&quot; marker-end=&quot;url(#arrowhead)&quot; style=&quot;stroke-dasharray: 3, 3; fill: none;&quot;&gt;&lt;/line&gt;&lt;/g&gt;&lt;g&gt;&lt;text x=&quot;575&quot; y=&quot;163&quot; class=&quot;messageText&quot; style=&quot;text-anchor: middle;&quot;&gt;Orchestration Invoked&lt;/text&gt;&lt;line x1=&quot;475&quot; y1=&quot;170&quot; x2=&quot;675&quot; y2=&quot;170&quot; class=&quot;messageLine0&quot; stroke-width=&quot;2&quot; stroke=&quot;black&quot; marker-end=&quot;url(#arrowhead)&quot; style=&quot;fill: none;&quot;&gt;&lt;/line&gt;&lt;/g&gt;&lt;g&gt;&lt;text x=&quot;675&quot; y=&quot;198&quot; class=&quot;messageText&quot; style=&quot;text-anchor: middle;&quot;&gt;TaskScheduled&lt;/text&gt;&lt;line x1=&quot;475&quot; y1=&quot;205&quot; x2=&quot;875&quot; y2=&quot;205&quot; class=&quot;messageLine1&quot; stroke-width=&quot;2&quot; stroke=&quot;black&quot; marker-end=&quot;url(#arrowhead)&quot; style=&quot;stroke-dasharray: 3, 3; fill: none;&quot;&gt;&lt;/line&gt;&lt;/g&gt;&lt;g&gt;&lt;rect x=&quot;0&quot; y=&quot;225&quot; fill=&quot;#eaeaea&quot; stroke=&quot;#666&quot; width=&quot;150&quot; height=&quot;65&quot; rx=&quot;3&quot; ry=&quot;3&quot; class=&quot;actor&quot;&gt;&lt;/rect&gt;&lt;text x=&quot;75&quot; y=&quot;257.5&quot; dominant-baseline=&quot;central&quot; alignment-baseline=&quot;central&quot; class=&quot;actor&quot; style=&quot;text-anchor: middle; font-size: 14px;&quot;&gt;&lt;tspan x=&quot;75&quot; dy=&quot;0&quot;&gt;Client&lt;/tspan&gt;&lt;/text&gt;&lt;/g&gt;&lt;g&gt;&lt;rect x=&quot;200&quot; y=&quot;225&quot; fill=&quot;#eaeaea&quot; stroke=&quot;#666&quot; width=&quot;150&quot; height=&quot;65&quot; rx=&quot;3&quot; ry=&quot;3&quot; class=&quot;actor&quot;&gt;&lt;/rect&gt;&lt;text x=&quot;275&quot; y=&quot;257.5&quot; dominant-baseline=&quot;central&quot; alignment-baseline=&quot;central&quot; class=&quot;actor&quot; style=&quot;text-anchor: middle; font-size: 14px;&quot;&gt;&lt;tspan x=&quot;275&quot; dy=&quot;0&quot;&gt;Orchestrator&lt;/tspan&gt;&lt;/text&gt;&lt;/g&gt;&lt;g&gt;&lt;rect x=&quot;400&quot; y=&quot;225&quot; fill=&quot;#eaeaea&quot; stroke=&quot;#666&quot; width=&quot;150&quot; height=&quot;65&quot; rx=&quot;3&quot; ry=&quot;3&quot; class=&quot;actor&quot;&gt;&lt;/rect&gt;&lt;text x=&quot;475&quot; y=&quot;257.5&quot; dominant-baseline=&quot;central&quot; alignment-baseline=&quot;central&quot; class=&quot;actor&quot; style=&quot;text-anchor: middle; font-size: 14px;&quot;&gt;&lt;tspan x=&quot;475&quot; dy=&quot;0&quot;&gt;Hub&lt;/tspan&gt;&lt;/text&gt;&lt;/g&gt;&lt;g&gt;&lt;rect x=&quot;600&quot; y=&quot;225&quot; fill=&quot;#eaeaea&quot; stroke=&quot;#666&quot; width=&quot;150&quot; height=&quot;65&quot; rx=&quot;3&quot; ry=&quot;3&quot; class=&quot;actor&quot;&gt;&lt;/rect&gt;&lt;text x=&quot;675&quot; y=&quot;257.5&quot; dominant-baseline=&quot;central&quot; alignment-baseline=&quot;central&quot; class=&quot;actor&quot; style=&quot;text-anchor: middle; font-size: 14px;&quot;&gt;&lt;tspan x=&quot;675&quot; dy=&quot;0&quot;&gt;TestOrchestration&lt;/tspan&gt;&lt;/text&gt;&lt;/g&gt;&lt;g&gt;&lt;rect x=&quot;800&quot; y=&quot;225&quot; fill=&quot;#eaeaea&quot; stroke=&quot;#666&quot; width=&quot;150&quot; height=&quot;65&quot; rx=&quot;3&quot; ry=&quot;3&quot; class=&quot;actor&quot;&gt;&lt;/rect&gt;&lt;text x=&quot;875&quot; y=&quot;257.5&quot; dominant-baseline=&quot;central&quot; alignment-baseline=&quot;central&quot; class=&quot;actor&quot; style=&quot;text-anchor: middle; font-size: 14px;&quot;&gt;&lt;tspan x=&quot;875&quot; dy=&quot;0&quot;&gt;Worker&lt;/tspan&gt;&lt;/text&gt;&lt;/g&gt;&lt;/svg&gt;&lt;/div&gt;
&lt;ol start=&quot;5&quot;&gt;
&lt;li&gt;
&lt;p&gt;The hub is also listening to the Worker Queue and picks up the &lt;code class=&quot;language-text&quot;&gt;TaskScheduled&lt;/code&gt; message and invokes the TaskActivity. For now,  let’s assume all the TaskActivity does is a console log. So the task is immediately completed. When the task is completed the hub queues TaskCompleted event in the Orchestrator queue.&lt;/p&gt;
&lt;div class=&quot;mermaid&quot; data-processed=&quot;true&quot;&gt;&lt;svg id=&quot;mermaid-1587845641378&quot; width=&quot;100%&quot; xmlns=&quot;http://www.w3.org/2000/svg&quot; height=&quot;100%&quot; style=&quot;max-width:1250px;&quot; viewBox=&quot;-50 -10 1250 406&quot;&gt;&lt;style&gt;#mermaid-1587845641378 .label{font-family:&apos;trebuchet ms&apos;, verdana, arial;font-family:var(--mermaid-font-family);color:#333}#mermaid-1587845641378 .label text{fill:#333}#mermaid-1587845641378 .node rect,#mermaid-1587845641378 .node circle,#mermaid-1587845641378 .node ellipse,#mermaid-1587845641378 .node polygon,#mermaid-1587845641378 .node path{fill:#ECECFF;stroke:#9370db;stroke-width:1px}#mermaid-1587845641378 .node .label{text-align:center}#mermaid-1587845641378 .node.clickable{cursor:pointer}#mermaid-1587845641378 .arrowheadPath{fill:#333}#mermaid-1587845641378 .edgePath .path{stroke:#333;stroke-width:1.5px}#mermaid-1587845641378 .edgeLabel{background-color:#e8e8e8;text-align:center}#mermaid-1587845641378 .cluster rect{fill:#ffffde;stroke:#aa3;stroke-width:1px}#mermaid-1587845641378 .cluster text{fill:#333}#mermaid-1587845641378 div.mermaidTooltip{position:absolute;text-align:center;max-width:200px;padding:2px;font-family:&apos;trebuchet ms&apos;, verdana, arial;font-family:var(--mermaid-font-family);font-size:12px;background:#ffffde;border:1px solid #aa3;border-radius:2px;pointer-events:none;z-index:100}#mermaid-1587845641378 .actor{stroke:#ccf;fill:#ECECFF}#mermaid-1587845641378 text.actor{fill:#000;stroke:none}#mermaid-1587845641378 .actor-line{stroke:grey}#mermaid-1587845641378 .messageLine0{stroke-width:1.5;stroke-dasharray:&apos;2 2&apos;;stroke:#333}#mermaid-1587845641378 .messageLine1{stroke-width:1.5;stroke-dasharray:&apos;2 2&apos;;stroke:#333}#mermaid-1587845641378 #arrowhead{fill:#333}#mermaid-1587845641378 .sequenceNumber{fill:#fff}#mermaid-1587845641378 #sequencenumber{fill:#333}#mermaid-1587845641378 #crosshead path{fill:#333 !important;stroke:#333 !important}#mermaid-1587845641378 .messageText{fill:#333;stroke:none}#mermaid-1587845641378 .labelBox{stroke:#ccf;fill:#ECECFF}#mermaid-1587845641378 .labelText{fill:#000;stroke:none}#mermaid-1587845641378 .loopText{fill:#000;stroke:none}#mermaid-1587845641378 .loopLine{stroke-width:2;stroke-dasharray:&apos;2 2&apos;;stroke:#ccf}#mermaid-1587845641378 .note{stroke:#aa3;fill:#fff5ad}#mermaid-1587845641378 .noteText{fill:black;stroke:none;font-family:&apos;trebuchet ms&apos;, verdana, arial;font-family:var(--mermaid-font-family);font-size:14px}#mermaid-1587845641378 .activation0{fill:#f4f4f4;stroke:#666}#mermaid-1587845641378 .activation1{fill:#f4f4f4;stroke:#666}#mermaid-1587845641378 .activation2{fill:#f4f4f4;stroke:#666}#mermaid-1587845641378 .mermaid-main-font{font-family:&quot;trebuchet ms&quot;, verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1587845641378 .section{stroke:none;opacity:0.2}#mermaid-1587845641378 .section0{fill:rgba(102,102,255,0.49)}#mermaid-1587845641378 .section2{fill:#fff400}#mermaid-1587845641378 .section1,#mermaid-1587845641378 .section3{fill:#fff;opacity:0.2}#mermaid-1587845641378 .sectionTitle0{fill:#333}#mermaid-1587845641378 .sectionTitle1{fill:#333}#mermaid-1587845641378 .sectionTitle2{fill:#333}#mermaid-1587845641378 .sectionTitle3{fill:#333}#mermaid-1587845641378 .sectionTitle{text-anchor:start;font-size:11px;text-height:14px;font-family:&apos;trebuchet ms&apos;, verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1587845641378 .grid .tick{stroke:#d3d3d3;opacity:0.8;shape-rendering:crispEdges}#mermaid-1587845641378 .grid .tick text{font-family:&apos;trebuchet ms&apos;, verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1587845641378 .grid path{stroke-width:0}#mermaid-1587845641378 .today{fill:none;stroke:red;stroke-width:2px}#mermaid-1587845641378 .task{stroke-width:2}#mermaid-1587845641378 .taskText{text-anchor:middle;font-family:&apos;trebuchet ms&apos;, verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1587845641378 .taskText:not([font-size]){font-size:11px}#mermaid-1587845641378 .taskTextOutsideRight{fill:#000;text-anchor:start;font-size:11px;font-family:&apos;trebuchet ms&apos;, verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1587845641378 .taskTextOutsideLeft{fill:#000;text-anchor:end;font-size:11px}#mermaid-1587845641378 .task.clickable{cursor:pointer}#mermaid-1587845641378 .taskText.clickable{cursor:pointer;fill:#003163 !important;font-weight:bold}#mermaid-1587845641378 .taskTextOutsideLeft.clickable{cursor:pointer;fill:#003163 !important;font-weight:bold}#mermaid-1587845641378 .taskTextOutsideRight.clickable{cursor:pointer;fill:#003163 !important;font-weight:bold}#mermaid-1587845641378 .taskText0,#mermaid-1587845641378 .taskText1,#mermaid-1587845641378 .taskText2,#mermaid-1587845641378 .taskText3{fill:#fff}#mermaid-1587845641378 .task0,#mermaid-1587845641378 .task1,#mermaid-1587845641378 .task2,#mermaid-1587845641378 .task3{fill:#8a90dd;stroke:#534fbc}#mermaid-1587845641378 .taskTextOutside0,#mermaid-1587845641378 .taskTextOutside2{fill:#000}#mermaid-1587845641378 .taskTextOutside1,#mermaid-1587845641378 .taskTextOutside3{fill:#000}#mermaid-1587845641378 .active0,#mermaid-1587845641378 .active1,#mermaid-1587845641378 .active2,#mermaid-1587845641378 .active3{fill:#bfc7ff;stroke:#534fbc}#mermaid-1587845641378 .activeText0,#mermaid-1587845641378 .activeText1,#mermaid-1587845641378 .activeText2,#mermaid-1587845641378 .activeText3{fill:#000 !important}#mermaid-1587845641378 .done0,#mermaid-1587845641378 .done1,#mermaid-1587845641378 .done2,#mermaid-1587845641378 .done3{stroke:grey;fill:#d3d3d3;stroke-width:2}#mermaid-1587845641378 .doneText0,#mermaid-1587845641378 .doneText1,#mermaid-1587845641378 .doneText2,#mermaid-1587845641378 .doneText3{fill:#000 !important}#mermaid-1587845641378 .crit0,#mermaid-1587845641378 .crit1,#mermaid-1587845641378 .crit2,#mermaid-1587845641378 .crit3{stroke:#f88;fill:red;stroke-width:2}#mermaid-1587845641378 .activeCrit0,#mermaid-1587845641378 .activeCrit1,#mermaid-1587845641378 .activeCrit2,#mermaid-1587845641378 .activeCrit3{stroke:#f88;fill:#bfc7ff;stroke-width:2}#mermaid-1587845641378 .doneCrit0,#mermaid-1587845641378 .doneCrit1,#mermaid-1587845641378 .doneCrit2,#mermaid-1587845641378 .doneCrit3{stroke:#f88;fill:#d3d3d3;stroke-width:2;cursor:pointer;shape-rendering:crispEdges}#mermaid-1587845641378 .milestone{transform:rotate(45deg) scale(0.8, 0.8)}#mermaid-1587845641378 .milestoneText{font-style:italic}#mermaid-1587845641378 .doneCritText0,#mermaid-1587845641378 .doneCritText1,#mermaid-1587845641378 .doneCritText2,#mermaid-1587845641378 .doneCritText3{fill:#000 !important}#mermaid-1587845641378 .activeCritText0,#mermaid-1587845641378 .activeCritText1,#mermaid-1587845641378 .activeCritText2,#mermaid-1587845641378 .activeCritText3{fill:#000 !important}#mermaid-1587845641378 .titleText{text-anchor:middle;font-size:18px;fill:#000;font-family:&apos;trebuchet ms&apos;, verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1587845641378 g.classGroup text{fill:#9370db;stroke:none;font-family:&apos;trebuchet ms&apos;, verdana, arial;font-family:var(--mermaid-font-family);font-size:10px}#mermaid-1587845641378 g.classGroup text .title{font-weight:bolder}#mermaid-1587845641378 g.clickable{cursor:pointer}#mermaid-1587845641378 g.classGroup rect{fill:#ECECFF;stroke:#9370db}#mermaid-1587845641378 g.classGroup line{stroke:#9370db;stroke-width:1}#mermaid-1587845641378 .classLabel .box{stroke:none;stroke-width:0;fill:#ECECFF;opacity:0.5}#mermaid-1587845641378 .classLabel .label{fill:#9370db;font-size:10px}#mermaid-1587845641378 .relation{stroke:#9370db;stroke-width:1;fill:none}#mermaid-1587845641378 .dashed-line{stroke-dasharray:3}#mermaid-1587845641378 #compositionStart{fill:#9370db;stroke:#9370db;stroke-width:1}#mermaid-1587845641378 #compositionEnd{fill:#9370db;stroke:#9370db;stroke-width:1}#mermaid-1587845641378 #aggregationStart{fill:#ECECFF;stroke:#9370db;stroke-width:1}#mermaid-1587845641378 #aggregationEnd{fill:#ECECFF;stroke:#9370db;stroke-width:1}#mermaid-1587845641378 #dependencyStart{fill:#9370db;stroke:#9370db;stroke-width:1}#mermaid-1587845641378 #dependencyEnd{fill:#9370db;stroke:#9370db;stroke-width:1}#mermaid-1587845641378 #extensionStart{fill:#9370db;stroke:#9370db;stroke-width:1}#mermaid-1587845641378 #extensionEnd{fill:#9370db;stroke:#9370db;stroke-width:1}#mermaid-1587845641378 .commit-id,#mermaid-1587845641378 .commit-msg,#mermaid-1587845641378 .branch-label{fill:lightgrey;color:lightgrey;font-family:&apos;trebuchet ms&apos;, verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1587845641378 .pieTitleText{text-anchor:middle;font-size:25px;fill:#000;font-family:&apos;trebuchet ms&apos;, verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1587845641378 .slice{font-family:&apos;trebuchet ms&apos;, verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1587845641378 g.stateGroup text{fill:#9370db;stroke:none;font-size:10px;font-family:&apos;trebuchet ms&apos;, verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1587845641378 g.stateGroup text{fill:#9370db;stroke:none;font-size:10px}#mermaid-1587845641378 g.stateGroup .state-title{font-weight:bolder;fill:#000}#mermaid-1587845641378 g.stateGroup rect{fill:#ECECFF;stroke:#9370db}#mermaid-1587845641378 g.stateGroup line{stroke:#9370db;stroke-width:1}#mermaid-1587845641378 .transition{stroke:#9370db;stroke-width:1;fill:none}#mermaid-1587845641378 .stateGroup .composit{fill:white;border-bottom:1px}#mermaid-1587845641378 .stateGroup .alt-composit{fill:#e0e0e0;border-bottom:1px}#mermaid-1587845641378 .state-note{stroke:#aa3;fill:#fff5ad}#mermaid-1587845641378 .state-note text{fill:black;stroke:none;font-size:10px}#mermaid-1587845641378 .stateLabel .box{stroke:none;stroke-width:0;fill:#ECECFF;opacity:0.5}#mermaid-1587845641378 .stateLabel text{fill:#000;font-size:10px;font-weight:bold;font-family:&apos;trebuchet ms&apos;, verdana, arial;font-family:var(--mermaid-font-family)}:root{--mermaid-font-family: &apos;&quot;trebuchet ms&quot;, verdana, arial&apos;;--mermaid-font-family: &quot;Comic Sans MS&quot;, &quot;Comic Sans&quot;, cursive}

:root { --mermaid-font-family: &quot;trebuchet ms&quot;, verdana, arial;}&lt;/style&gt;&lt;style&gt;#mermaid-1587845641378 {
    color: rgb(0, 0, 0);
    font: normal normal 400 normal 16px / normal &quot;trebuchet ms&quot;, verdana, arial;
  }&lt;/style&gt;&lt;g&gt;&lt;/g&gt;&lt;g&gt;&lt;line id=&quot;actor0&quot; x1=&quot;75&quot; y1=&quot;5&quot; x2=&quot;75&quot; y2=&quot;395&quot; class=&quot;actor-line&quot; stroke-width=&quot;0.5px&quot; stroke=&quot;#999&quot;&gt;&lt;/line&gt;&lt;rect x=&quot;0&quot; y=&quot;0&quot; fill=&quot;#eaeaea&quot; stroke=&quot;#666&quot; width=&quot;150&quot; height=&quot;65&quot; rx=&quot;3&quot; ry=&quot;3&quot; class=&quot;actor&quot;&gt;&lt;/rect&gt;&lt;text x=&quot;75&quot; y=&quot;32.5&quot; dominant-baseline=&quot;central&quot; alignment-baseline=&quot;central&quot; class=&quot;actor&quot; style=&quot;text-anchor: middle; font-size: 14px;&quot;&gt;&lt;tspan x=&quot;75&quot; dy=&quot;0&quot;&gt;Client&lt;/tspan&gt;&lt;/text&gt;&lt;/g&gt;&lt;g&gt;&lt;line id=&quot;actor1&quot; x1=&quot;275&quot; y1=&quot;5&quot; x2=&quot;275&quot; y2=&quot;395&quot; class=&quot;actor-line&quot; stroke-width=&quot;0.5px&quot; stroke=&quot;#999&quot;&gt;&lt;/line&gt;&lt;rect x=&quot;200&quot; y=&quot;0&quot; fill=&quot;#eaeaea&quot; stroke=&quot;#666&quot; width=&quot;150&quot; height=&quot;65&quot; rx=&quot;3&quot; ry=&quot;3&quot; class=&quot;actor&quot;&gt;&lt;/rect&gt;&lt;text x=&quot;275&quot; y=&quot;32.5&quot; dominant-baseline=&quot;central&quot; alignment-baseline=&quot;central&quot; class=&quot;actor&quot; style=&quot;text-anchor: middle; font-size: 14px;&quot;&gt;&lt;tspan x=&quot;275&quot; dy=&quot;0&quot;&gt;Orchestrator&lt;/tspan&gt;&lt;/text&gt;&lt;/g&gt;&lt;g&gt;&lt;line id=&quot;actor2&quot; x1=&quot;475&quot; y1=&quot;5&quot; x2=&quot;475&quot; y2=&quot;395&quot; class=&quot;actor-line&quot; stroke-width=&quot;0.5px&quot; stroke=&quot;#999&quot;&gt;&lt;/line&gt;&lt;rect x=&quot;400&quot; y=&quot;0&quot; fill=&quot;#eaeaea&quot; stroke=&quot;#666&quot; width=&quot;150&quot; height=&quot;65&quot; rx=&quot;3&quot; ry=&quot;3&quot; class=&quot;actor&quot;&gt;&lt;/rect&gt;&lt;text x=&quot;475&quot; y=&quot;32.5&quot; dominant-baseline=&quot;central&quot; alignment-baseline=&quot;central&quot; class=&quot;actor&quot; style=&quot;text-anchor: middle; font-size: 14px;&quot;&gt;&lt;tspan x=&quot;475&quot; dy=&quot;0&quot;&gt;Hub&lt;/tspan&gt;&lt;/text&gt;&lt;/g&gt;&lt;g&gt;&lt;line id=&quot;actor3&quot; x1=&quot;675&quot; y1=&quot;5&quot; x2=&quot;675&quot; y2=&quot;395&quot; class=&quot;actor-line&quot; stroke-width=&quot;0.5px&quot; stroke=&quot;#999&quot;&gt;&lt;/line&gt;&lt;rect x=&quot;600&quot; y=&quot;0&quot; fill=&quot;#eaeaea&quot; stroke=&quot;#666&quot; width=&quot;150&quot; height=&quot;65&quot; rx=&quot;3&quot; ry=&quot;3&quot; class=&quot;actor&quot;&gt;&lt;/rect&gt;&lt;text x=&quot;675&quot; y=&quot;32.5&quot; dominant-baseline=&quot;central&quot; alignment-baseline=&quot;central&quot; class=&quot;actor&quot; style=&quot;text-anchor: middle; font-size: 14px;&quot;&gt;&lt;tspan x=&quot;675&quot; dy=&quot;0&quot;&gt;TestOrchestration&lt;/tspan&gt;&lt;/text&gt;&lt;/g&gt;&lt;g&gt;&lt;line id=&quot;actor4&quot; x1=&quot;875&quot; y1=&quot;5&quot; x2=&quot;875&quot; y2=&quot;395&quot; class=&quot;actor-line&quot; stroke-width=&quot;0.5px&quot; stroke=&quot;#999&quot;&gt;&lt;/line&gt;&lt;rect x=&quot;800&quot; y=&quot;0&quot; fill=&quot;#eaeaea&quot; stroke=&quot;#666&quot; width=&quot;150&quot; height=&quot;65&quot; rx=&quot;3&quot; ry=&quot;3&quot; class=&quot;actor&quot;&gt;&lt;/rect&gt;&lt;text x=&quot;875&quot; y=&quot;32.5&quot; dominant-baseline=&quot;central&quot; alignment-baseline=&quot;central&quot; class=&quot;actor&quot; style=&quot;text-anchor: middle; font-size: 14px;&quot;&gt;&lt;tspan x=&quot;875&quot; dy=&quot;0&quot;&gt;Worker&lt;/tspan&gt;&lt;/text&gt;&lt;/g&gt;&lt;g&gt;&lt;line id=&quot;actor5&quot; x1=&quot;1075&quot; y1=&quot;5&quot; x2=&quot;1075&quot; y2=&quot;395&quot; class=&quot;actor-line&quot; stroke-width=&quot;0.5px&quot; stroke=&quot;#999&quot;&gt;&lt;/line&gt;&lt;rect x=&quot;1000&quot; y=&quot;0&quot; fill=&quot;#eaeaea&quot; stroke=&quot;#666&quot; width=&quot;150&quot; height=&quot;65&quot; rx=&quot;3&quot; ry=&quot;3&quot; class=&quot;actor&quot;&gt;&lt;/rect&gt;&lt;text x=&quot;1075&quot; y=&quot;32.5&quot; dominant-baseline=&quot;central&quot; alignment-baseline=&quot;central&quot; class=&quot;actor&quot; style=&quot;text-anchor: middle; font-size: 14px;&quot;&gt;&lt;tspan x=&quot;1075&quot; dy=&quot;0&quot;&gt;TaskActivity&lt;/tspan&gt;&lt;/text&gt;&lt;/g&gt;&lt;defs&gt;&lt;marker id=&quot;arrowhead&quot; refX=&quot;5&quot; refY=&quot;2&quot; markerWidth=&quot;6&quot; markerHeight=&quot;4&quot; orient=&quot;auto&quot;&gt;&lt;path d=&quot;M 0,0 V 4 L6,2 Z&quot;&gt;&lt;/path&gt;&lt;/marker&gt;&lt;/defs&gt;&lt;defs&gt;&lt;marker id=&quot;crosshead&quot; markerWidth=&quot;15&quot; markerHeight=&quot;8&quot; orient=&quot;auto&quot; refX=&quot;16&quot; refY=&quot;4&quot;&gt;&lt;path fill=&quot;black&quot; stroke=&quot;#000000&quot; stroke-width=&quot;1px&quot; d=&quot;M 9,2 V 6 L16,4 Z&quot; style=&quot;stroke-dasharray: 0, 0;&quot;&gt;&lt;/path&gt;&lt;path fill=&quot;none&quot; stroke=&quot;#000000&quot; stroke-width=&quot;1px&quot; d=&quot;M 0,1 L 6,7 M 6,1 L 0,7&quot; style=&quot;stroke-dasharray: 0, 0;&quot;&gt;&lt;/path&gt;&lt;/marker&gt;&lt;/defs&gt;&lt;defs&gt;&lt;marker id=&quot;sequencenumber&quot; refX=&quot;15&quot; refY=&quot;15&quot; markerWidth=&quot;60&quot; markerHeight=&quot;40&quot; orient=&quot;auto&quot;&gt;&lt;circle cx=&quot;15&quot; cy=&quot;15&quot; r=&quot;6&quot;&gt;&lt;/circle&gt;&lt;/marker&gt;&lt;/defs&gt;&lt;g&gt;&lt;text x=&quot;175&quot; y=&quot;93&quot; class=&quot;messageText&quot; style=&quot;text-anchor: middle;&quot;&gt;ExecutionStarted&lt;/text&gt;&lt;line x1=&quot;75&quot; y1=&quot;100&quot; x2=&quot;275&quot; y2=&quot;100&quot; class=&quot;messageLine1&quot; stroke-width=&quot;2&quot; stroke=&quot;black&quot; marker-end=&quot;url(#arrowhead)&quot; style=&quot;stroke-dasharray: 3, 3; fill: none;&quot;&gt;&lt;/line&gt;&lt;/g&gt;&lt;g&gt;&lt;text x=&quot;375&quot; y=&quot;128&quot; class=&quot;messageText&quot; style=&quot;text-anchor: middle;&quot;&gt;ExecutionStarted&lt;/text&gt;&lt;line x1=&quot;275&quot; y1=&quot;135&quot; x2=&quot;475&quot; y2=&quot;135&quot; class=&quot;messageLine1&quot; stroke-width=&quot;2&quot; stroke=&quot;black&quot; marker-end=&quot;url(#arrowhead)&quot; style=&quot;stroke-dasharray: 3, 3; fill: none;&quot;&gt;&lt;/line&gt;&lt;/g&gt;&lt;g&gt;&lt;text x=&quot;575&quot; y=&quot;163&quot; class=&quot;messageText&quot; style=&quot;text-anchor: middle;&quot;&gt;Orchestration Invoked&lt;/text&gt;&lt;line x1=&quot;475&quot; y1=&quot;170&quot; x2=&quot;675&quot; y2=&quot;170&quot; class=&quot;messageLine0&quot; stroke-width=&quot;2&quot; stroke=&quot;black&quot; marker-end=&quot;url(#arrowhead)&quot; style=&quot;fill: none;&quot;&gt;&lt;/line&gt;&lt;/g&gt;&lt;g&gt;&lt;text x=&quot;675&quot; y=&quot;198&quot; class=&quot;messageText&quot; style=&quot;text-anchor: middle;&quot;&gt;TaskScheduled&lt;/text&gt;&lt;line x1=&quot;475&quot; y1=&quot;205&quot; x2=&quot;875&quot; y2=&quot;205&quot; class=&quot;messageLine1&quot; stroke-width=&quot;2&quot; stroke=&quot;black&quot; marker-end=&quot;url(#arrowhead)&quot; style=&quot;stroke-dasharray: 3, 3; fill: none;&quot;&gt;&lt;/line&gt;&lt;/g&gt;&lt;g&gt;&lt;text x=&quot;675&quot; y=&quot;233&quot; class=&quot;messageText&quot; style=&quot;text-anchor: middle;&quot;&gt;Task Scheduled&lt;/text&gt;&lt;line x1=&quot;875&quot; y1=&quot;240&quot; x2=&quot;475&quot; y2=&quot;240&quot; class=&quot;messageLine1&quot; stroke-width=&quot;2&quot; stroke=&quot;black&quot; marker-end=&quot;url(#arrowhead)&quot; style=&quot;stroke-dasharray: 3, 3; fill: none;&quot;&gt;&lt;/line&gt;&lt;/g&gt;&lt;g&gt;&lt;text x=&quot;775&quot; y=&quot;268&quot; class=&quot;messageText&quot; style=&quot;text-anchor: middle;&quot;&gt;Task Invoked&lt;/text&gt;&lt;line x1=&quot;475&quot; y1=&quot;275&quot; x2=&quot;1075&quot; y2=&quot;275&quot; class=&quot;messageLine0&quot; stroke-width=&quot;2&quot; stroke=&quot;black&quot; marker-end=&quot;url(#arrowhead)&quot; style=&quot;fill: none;&quot;&gt;&lt;/line&gt;&lt;/g&gt;&lt;g&gt;&lt;text x=&quot;375&quot; y=&quot;303&quot; class=&quot;messageText&quot; style=&quot;text-anchor: middle;&quot;&gt;TaskCompleted&lt;/text&gt;&lt;line x1=&quot;475&quot; y1=&quot;310&quot; x2=&quot;275&quot; y2=&quot;310&quot; class=&quot;messageLine1&quot; stroke-width=&quot;2&quot; stroke=&quot;black&quot; marker-end=&quot;url(#arrowhead)&quot; style=&quot;stroke-dasharray: 3, 3; fill: none;&quot;&gt;&lt;/line&gt;&lt;/g&gt;&lt;g&gt;&lt;rect x=&quot;0&quot; y=&quot;330&quot; fill=&quot;#eaeaea&quot; stroke=&quot;#666&quot; width=&quot;150&quot; height=&quot;65&quot; rx=&quot;3&quot; ry=&quot;3&quot; class=&quot;actor&quot;&gt;&lt;/rect&gt;&lt;text x=&quot;75&quot; y=&quot;362.5&quot; dominant-baseline=&quot;central&quot; alignment-baseline=&quot;central&quot; class=&quot;actor&quot; style=&quot;text-anchor: middle; font-size: 14px;&quot;&gt;&lt;tspan x=&quot;75&quot; dy=&quot;0&quot;&gt;Client&lt;/tspan&gt;&lt;/text&gt;&lt;/g&gt;&lt;g&gt;&lt;rect x=&quot;200&quot; y=&quot;330&quot; fill=&quot;#eaeaea&quot; stroke=&quot;#666&quot; width=&quot;150&quot; height=&quot;65&quot; rx=&quot;3&quot; ry=&quot;3&quot; class=&quot;actor&quot;&gt;&lt;/rect&gt;&lt;text x=&quot;275&quot; y=&quot;362.5&quot; dominant-baseline=&quot;central&quot; alignment-baseline=&quot;central&quot; class=&quot;actor&quot; style=&quot;text-anchor: middle; font-size: 14px;&quot;&gt;&lt;tspan x=&quot;275&quot; dy=&quot;0&quot;&gt;Orchestrator&lt;/tspan&gt;&lt;/text&gt;&lt;/g&gt;&lt;g&gt;&lt;rect x=&quot;400&quot; y=&quot;330&quot; fill=&quot;#eaeaea&quot; stroke=&quot;#666&quot; width=&quot;150&quot; height=&quot;65&quot; rx=&quot;3&quot; ry=&quot;3&quot; class=&quot;actor&quot;&gt;&lt;/rect&gt;&lt;text x=&quot;475&quot; y=&quot;362.5&quot; dominant-baseline=&quot;central&quot; alignment-baseline=&quot;central&quot; class=&quot;actor&quot; style=&quot;text-anchor: middle; font-size: 14px;&quot;&gt;&lt;tspan x=&quot;475&quot; dy=&quot;0&quot;&gt;Hub&lt;/tspan&gt;&lt;/text&gt;&lt;/g&gt;&lt;g&gt;&lt;rect x=&quot;600&quot; y=&quot;330&quot; fill=&quot;#eaeaea&quot; stroke=&quot;#666&quot; width=&quot;150&quot; height=&quot;65&quot; rx=&quot;3&quot; ry=&quot;3&quot; class=&quot;actor&quot;&gt;&lt;/rect&gt;&lt;text x=&quot;675&quot; y=&quot;362.5&quot; dominant-baseline=&quot;central&quot; alignment-baseline=&quot;central&quot; class=&quot;actor&quot; style=&quot;text-anchor: middle; font-size: 14px;&quot;&gt;&lt;tspan x=&quot;675&quot; dy=&quot;0&quot;&gt;TestOrchestration&lt;/tspan&gt;&lt;/text&gt;&lt;/g&gt;&lt;g&gt;&lt;rect x=&quot;800&quot; y=&quot;330&quot; fill=&quot;#eaeaea&quot; stroke=&quot;#666&quot; width=&quot;150&quot; height=&quot;65&quot; rx=&quot;3&quot; ry=&quot;3&quot; class=&quot;actor&quot;&gt;&lt;/rect&gt;&lt;text x=&quot;875&quot; y=&quot;362.5&quot; dominant-baseline=&quot;central&quot; alignment-baseline=&quot;central&quot; class=&quot;actor&quot; style=&quot;text-anchor: middle; font-size: 14px;&quot;&gt;&lt;tspan x=&quot;875&quot; dy=&quot;0&quot;&gt;Worker&lt;/tspan&gt;&lt;/text&gt;&lt;/g&gt;&lt;g&gt;&lt;rect x=&quot;1000&quot; y=&quot;330&quot; fill=&quot;#eaeaea&quot; stroke=&quot;#666&quot; width=&quot;150&quot; height=&quot;65&quot; rx=&quot;3&quot; ry=&quot;3&quot; class=&quot;actor&quot;&gt;&lt;/rect&gt;&lt;text x=&quot;1075&quot; y=&quot;362.5&quot; dominant-baseline=&quot;central&quot; alignment-baseline=&quot;central&quot; class=&quot;actor&quot; style=&quot;text-anchor: middle; font-size: 14px;&quot;&gt;&lt;tspan x=&quot;1075&quot; dy=&quot;0&quot;&gt;TaskActivity&lt;/tspan&gt;&lt;/text&gt;&lt;/g&gt;&lt;/svg&gt;&lt;/div&gt;
&lt;/li&gt;
&lt;li&gt;The Orchestration wakes up, the moment the hub detects a message in the Orchestrator Queue and &lt;em&gt;restarts the Orchestration from the beginning&lt;/em&gt;. So all the logs that got printed last time gets printed again. Since this is the second time orchestration is running &lt;code class=&quot;language-text&quot;&gt;Is replaying&lt;/code&gt; is set to &lt;em&gt;True&lt;/em&gt;.&lt;/li&gt;
&lt;/ol&gt;
&lt;div class=&quot;mermaid&quot; data-processed=&quot;true&quot;&gt;&lt;svg id=&quot;mermaid-1587845641419&quot; width=&quot;100%&quot; xmlns=&quot;http://www.w3.org/2000/svg&quot; height=&quot;100%&quot; style=&quot;max-width:1250px;&quot; viewBox=&quot;-50 -10 1250 476&quot;&gt;&lt;style&gt;#mermaid-1587845641419 .label{font-family:&apos;trebuchet ms&apos;, verdana, arial;font-family:var(--mermaid-font-family);color:#333}#mermaid-1587845641419 .label text{fill:#333}#mermaid-1587845641419 .node rect,#mermaid-1587845641419 .node circle,#mermaid-1587845641419 .node ellipse,#mermaid-1587845641419 .node polygon,#mermaid-1587845641419 .node path{fill:#ECECFF;stroke:#9370db;stroke-width:1px}#mermaid-1587845641419 .node .label{text-align:center}#mermaid-1587845641419 .node.clickable{cursor:pointer}#mermaid-1587845641419 .arrowheadPath{fill:#333}#mermaid-1587845641419 .edgePath .path{stroke:#333;stroke-width:1.5px}#mermaid-1587845641419 .edgeLabel{background-color:#e8e8e8;text-align:center}#mermaid-1587845641419 .cluster rect{fill:#ffffde;stroke:#aa3;stroke-width:1px}#mermaid-1587845641419 .cluster text{fill:#333}#mermaid-1587845641419 div.mermaidTooltip{position:absolute;text-align:center;max-width:200px;padding:2px;font-family:&apos;trebuchet ms&apos;, verdana, arial;font-family:var(--mermaid-font-family);font-size:12px;background:#ffffde;border:1px solid #aa3;border-radius:2px;pointer-events:none;z-index:100}#mermaid-1587845641419 .actor{stroke:#ccf;fill:#ECECFF}#mermaid-1587845641419 text.actor{fill:#000;stroke:none}#mermaid-1587845641419 .actor-line{stroke:grey}#mermaid-1587845641419 .messageLine0{stroke-width:1.5;stroke-dasharray:&apos;2 2&apos;;stroke:#333}#mermaid-1587845641419 .messageLine1{stroke-width:1.5;stroke-dasharray:&apos;2 2&apos;;stroke:#333}#mermaid-1587845641419 #arrowhead{fill:#333}#mermaid-1587845641419 .sequenceNumber{fill:#fff}#mermaid-1587845641419 #sequencenumber{fill:#333}#mermaid-1587845641419 #crosshead path{fill:#333 !important;stroke:#333 !important}#mermaid-1587845641419 .messageText{fill:#333;stroke:none}#mermaid-1587845641419 .labelBox{stroke:#ccf;fill:#ECECFF}#mermaid-1587845641419 .labelText{fill:#000;stroke:none}#mermaid-1587845641419 .loopText{fill:#000;stroke:none}#mermaid-1587845641419 .loopLine{stroke-width:2;stroke-dasharray:&apos;2 2&apos;;stroke:#ccf}#mermaid-1587845641419 .note{stroke:#aa3;fill:#fff5ad}#mermaid-1587845641419 .noteText{fill:black;stroke:none;font-family:&apos;trebuchet ms&apos;, verdana, arial;font-family:var(--mermaid-font-family);font-size:14px}#mermaid-1587845641419 .activation0{fill:#f4f4f4;stroke:#666}#mermaid-1587845641419 .activation1{fill:#f4f4f4;stroke:#666}#mermaid-1587845641419 .activation2{fill:#f4f4f4;stroke:#666}#mermaid-1587845641419 .mermaid-main-font{font-family:&quot;trebuchet ms&quot;, verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1587845641419 .section{stroke:none;opacity:0.2}#mermaid-1587845641419 .section0{fill:rgba(102,102,255,0.49)}#mermaid-1587845641419 .section2{fill:#fff400}#mermaid-1587845641419 .section1,#mermaid-1587845641419 .section3{fill:#fff;opacity:0.2}#mermaid-1587845641419 .sectionTitle0{fill:#333}#mermaid-1587845641419 .sectionTitle1{fill:#333}#mermaid-1587845641419 .sectionTitle2{fill:#333}#mermaid-1587845641419 .sectionTitle3{fill:#333}#mermaid-1587845641419 .sectionTitle{text-anchor:start;font-size:11px;text-height:14px;font-family:&apos;trebuchet ms&apos;, verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1587845641419 .grid .tick{stroke:#d3d3d3;opacity:0.8;shape-rendering:crispEdges}#mermaid-1587845641419 .grid .tick text{font-family:&apos;trebuchet ms&apos;, verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1587845641419 .grid path{stroke-width:0}#mermaid-1587845641419 .today{fill:none;stroke:red;stroke-width:2px}#mermaid-1587845641419 .task{stroke-width:2}#mermaid-1587845641419 .taskText{text-anchor:middle;font-family:&apos;trebuchet ms&apos;, verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1587845641419 .taskText:not([font-size]){font-size:11px}#mermaid-1587845641419 .taskTextOutsideRight{fill:#000;text-anchor:start;font-size:11px;font-family:&apos;trebuchet ms&apos;, verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1587845641419 .taskTextOutsideLeft{fill:#000;text-anchor:end;font-size:11px}#mermaid-1587845641419 .task.clickable{cursor:pointer}#mermaid-1587845641419 .taskText.clickable{cursor:pointer;fill:#003163 !important;font-weight:bold}#mermaid-1587845641419 .taskTextOutsideLeft.clickable{cursor:pointer;fill:#003163 !important;font-weight:bold}#mermaid-1587845641419 .taskTextOutsideRight.clickable{cursor:pointer;fill:#003163 !important;font-weight:bold}#mermaid-1587845641419 .taskText0,#mermaid-1587845641419 .taskText1,#mermaid-1587845641419 .taskText2,#mermaid-1587845641419 .taskText3{fill:#fff}#mermaid-1587845641419 .task0,#mermaid-1587845641419 .task1,#mermaid-1587845641419 .task2,#mermaid-1587845641419 .task3{fill:#8a90dd;stroke:#534fbc}#mermaid-1587845641419 .taskTextOutside0,#mermaid-1587845641419 .taskTextOutside2{fill:#000}#mermaid-1587845641419 .taskTextOutside1,#mermaid-1587845641419 .taskTextOutside3{fill:#000}#mermaid-1587845641419 .active0,#mermaid-1587845641419 .active1,#mermaid-1587845641419 .active2,#mermaid-1587845641419 .active3{fill:#bfc7ff;stroke:#534fbc}#mermaid-1587845641419 .activeText0,#mermaid-1587845641419 .activeText1,#mermaid-1587845641419 .activeText2,#mermaid-1587845641419 .activeText3{fill:#000 !important}#mermaid-1587845641419 .done0,#mermaid-1587845641419 .done1,#mermaid-1587845641419 .done2,#mermaid-1587845641419 .done3{stroke:grey;fill:#d3d3d3;stroke-width:2}#mermaid-1587845641419 .doneText0,#mermaid-1587845641419 .doneText1,#mermaid-1587845641419 .doneText2,#mermaid-1587845641419 .doneText3{fill:#000 !important}#mermaid-1587845641419 .crit0,#mermaid-1587845641419 .crit1,#mermaid-1587845641419 .crit2,#mermaid-1587845641419 .crit3{stroke:#f88;fill:red;stroke-width:2}#mermaid-1587845641419 .activeCrit0,#mermaid-1587845641419 .activeCrit1,#mermaid-1587845641419 .activeCrit2,#mermaid-1587845641419 .activeCrit3{stroke:#f88;fill:#bfc7ff;stroke-width:2}#mermaid-1587845641419 .doneCrit0,#mermaid-1587845641419 .doneCrit1,#mermaid-1587845641419 .doneCrit2,#mermaid-1587845641419 .doneCrit3{stroke:#f88;fill:#d3d3d3;stroke-width:2;cursor:pointer;shape-rendering:crispEdges}#mermaid-1587845641419 .milestone{transform:rotate(45deg) scale(0.8, 0.8)}#mermaid-1587845641419 .milestoneText{font-style:italic}#mermaid-1587845641419 .doneCritText0,#mermaid-1587845641419 .doneCritText1,#mermaid-1587845641419 .doneCritText2,#mermaid-1587845641419 .doneCritText3{fill:#000 !important}#mermaid-1587845641419 .activeCritText0,#mermaid-1587845641419 .activeCritText1,#mermaid-1587845641419 .activeCritText2,#mermaid-1587845641419 .activeCritText3{fill:#000 !important}#mermaid-1587845641419 .titleText{text-anchor:middle;font-size:18px;fill:#000;font-family:&apos;trebuchet ms&apos;, verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1587845641419 g.classGroup text{fill:#9370db;stroke:none;font-family:&apos;trebuchet ms&apos;, verdana, arial;font-family:var(--mermaid-font-family);font-size:10px}#mermaid-1587845641419 g.classGroup text .title{font-weight:bolder}#mermaid-1587845641419 g.clickable{cursor:pointer}#mermaid-1587845641419 g.classGroup rect{fill:#ECECFF;stroke:#9370db}#mermaid-1587845641419 g.classGroup line{stroke:#9370db;stroke-width:1}#mermaid-1587845641419 .classLabel .box{stroke:none;stroke-width:0;fill:#ECECFF;opacity:0.5}#mermaid-1587845641419 .classLabel .label{fill:#9370db;font-size:10px}#mermaid-1587845641419 .relation{stroke:#9370db;stroke-width:1;fill:none}#mermaid-1587845641419 .dashed-line{stroke-dasharray:3}#mermaid-1587845641419 #compositionStart{fill:#9370db;stroke:#9370db;stroke-width:1}#mermaid-1587845641419 #compositionEnd{fill:#9370db;stroke:#9370db;stroke-width:1}#mermaid-1587845641419 #aggregationStart{fill:#ECECFF;stroke:#9370db;stroke-width:1}#mermaid-1587845641419 #aggregationEnd{fill:#ECECFF;stroke:#9370db;stroke-width:1}#mermaid-1587845641419 #dependencyStart{fill:#9370db;stroke:#9370db;stroke-width:1}#mermaid-1587845641419 #dependencyEnd{fill:#9370db;stroke:#9370db;stroke-width:1}#mermaid-1587845641419 #extensionStart{fill:#9370db;stroke:#9370db;stroke-width:1}#mermaid-1587845641419 #extensionEnd{fill:#9370db;stroke:#9370db;stroke-width:1}#mermaid-1587845641419 .commit-id,#mermaid-1587845641419 .commit-msg,#mermaid-1587845641419 .branch-label{fill:lightgrey;color:lightgrey;font-family:&apos;trebuchet ms&apos;, verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1587845641419 .pieTitleText{text-anchor:middle;font-size:25px;fill:#000;font-family:&apos;trebuchet ms&apos;, verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1587845641419 .slice{font-family:&apos;trebuchet ms&apos;, verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1587845641419 g.stateGroup text{fill:#9370db;stroke:none;font-size:10px;font-family:&apos;trebuchet ms&apos;, verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1587845641419 g.stateGroup text{fill:#9370db;stroke:none;font-size:10px}#mermaid-1587845641419 g.stateGroup .state-title{font-weight:bolder;fill:#000}#mermaid-1587845641419 g.stateGroup rect{fill:#ECECFF;stroke:#9370db}#mermaid-1587845641419 g.stateGroup line{stroke:#9370db;stroke-width:1}#mermaid-1587845641419 .transition{stroke:#9370db;stroke-width:1;fill:none}#mermaid-1587845641419 .stateGroup .composit{fill:white;border-bottom:1px}#mermaid-1587845641419 .stateGroup .alt-composit{fill:#e0e0e0;border-bottom:1px}#mermaid-1587845641419 .state-note{stroke:#aa3;fill:#fff5ad}#mermaid-1587845641419 .state-note text{fill:black;stroke:none;font-size:10px}#mermaid-1587845641419 .stateLabel .box{stroke:none;stroke-width:0;fill:#ECECFF;opacity:0.5}#mermaid-1587845641419 .stateLabel text{fill:#000;font-size:10px;font-weight:bold;font-family:&apos;trebuchet ms&apos;, verdana, arial;font-family:var(--mermaid-font-family)}:root{--mermaid-font-family: &apos;&quot;trebuchet ms&quot;, verdana, arial&apos;;--mermaid-font-family: &quot;Comic Sans MS&quot;, &quot;Comic Sans&quot;, cursive}

:root { --mermaid-font-family: &quot;trebuchet ms&quot;, verdana, arial;}&lt;/style&gt;&lt;style&gt;#mermaid-1587845641419 {
    color: rgb(0, 0, 0);
    font: normal normal 400 normal 16px / normal &quot;trebuchet ms&quot;, verdana, arial;
  }&lt;/style&gt;&lt;g&gt;&lt;/g&gt;&lt;g&gt;&lt;line id=&quot;actor0&quot; x1=&quot;75&quot; y1=&quot;5&quot; x2=&quot;75&quot; y2=&quot;465&quot; class=&quot;actor-line&quot; stroke-width=&quot;0.5px&quot; stroke=&quot;#999&quot;&gt;&lt;/line&gt;&lt;rect x=&quot;0&quot; y=&quot;0&quot; fill=&quot;#eaeaea&quot; stroke=&quot;#666&quot; width=&quot;150&quot; height=&quot;65&quot; rx=&quot;3&quot; ry=&quot;3&quot; class=&quot;actor&quot;&gt;&lt;/rect&gt;&lt;text x=&quot;75&quot; y=&quot;32.5&quot; dominant-baseline=&quot;central&quot; alignment-baseline=&quot;central&quot; class=&quot;actor&quot; style=&quot;text-anchor: middle; font-size: 14px;&quot;&gt;&lt;tspan x=&quot;75&quot; dy=&quot;0&quot;&gt;Client&lt;/tspan&gt;&lt;/text&gt;&lt;/g&gt;&lt;g&gt;&lt;line id=&quot;actor1&quot; x1=&quot;275&quot; y1=&quot;5&quot; x2=&quot;275&quot; y2=&quot;465&quot; class=&quot;actor-line&quot; stroke-width=&quot;0.5px&quot; stroke=&quot;#999&quot;&gt;&lt;/line&gt;&lt;rect x=&quot;200&quot; y=&quot;0&quot; fill=&quot;#eaeaea&quot; stroke=&quot;#666&quot; width=&quot;150&quot; height=&quot;65&quot; rx=&quot;3&quot; ry=&quot;3&quot; class=&quot;actor&quot;&gt;&lt;/rect&gt;&lt;text x=&quot;275&quot; y=&quot;32.5&quot; dominant-baseline=&quot;central&quot; alignment-baseline=&quot;central&quot; class=&quot;actor&quot; style=&quot;text-anchor: middle; font-size: 14px;&quot;&gt;&lt;tspan x=&quot;275&quot; dy=&quot;0&quot;&gt;Orchestrator&lt;/tspan&gt;&lt;/text&gt;&lt;/g&gt;&lt;g&gt;&lt;line id=&quot;actor2&quot; x1=&quot;475&quot; y1=&quot;5&quot; x2=&quot;475&quot; y2=&quot;465&quot; class=&quot;actor-line&quot; stroke-width=&quot;0.5px&quot; stroke=&quot;#999&quot;&gt;&lt;/line&gt;&lt;rect x=&quot;400&quot; y=&quot;0&quot; fill=&quot;#eaeaea&quot; stroke=&quot;#666&quot; width=&quot;150&quot; height=&quot;65&quot; rx=&quot;3&quot; ry=&quot;3&quot; class=&quot;actor&quot;&gt;&lt;/rect&gt;&lt;text x=&quot;475&quot; y=&quot;32.5&quot; dominant-baseline=&quot;central&quot; alignment-baseline=&quot;central&quot; class=&quot;actor&quot; style=&quot;text-anchor: middle; font-size: 14px;&quot;&gt;&lt;tspan x=&quot;475&quot; dy=&quot;0&quot;&gt;Hub&lt;/tspan&gt;&lt;/text&gt;&lt;/g&gt;&lt;g&gt;&lt;line id=&quot;actor3&quot; x1=&quot;675&quot; y1=&quot;5&quot; x2=&quot;675&quot; y2=&quot;465&quot; class=&quot;actor-line&quot; stroke-width=&quot;0.5px&quot; stroke=&quot;#999&quot;&gt;&lt;/line&gt;&lt;rect x=&quot;600&quot; y=&quot;0&quot; fill=&quot;#eaeaea&quot; stroke=&quot;#666&quot; width=&quot;150&quot; height=&quot;65&quot; rx=&quot;3&quot; ry=&quot;3&quot; class=&quot;actor&quot;&gt;&lt;/rect&gt;&lt;text x=&quot;675&quot; y=&quot;32.5&quot; dominant-baseline=&quot;central&quot; alignment-baseline=&quot;central&quot; class=&quot;actor&quot; style=&quot;text-anchor: middle; font-size: 14px;&quot;&gt;&lt;tspan x=&quot;675&quot; dy=&quot;0&quot;&gt;TestOrchestration&lt;/tspan&gt;&lt;/text&gt;&lt;/g&gt;&lt;g&gt;&lt;line id=&quot;actor4&quot; x1=&quot;875&quot; y1=&quot;5&quot; x2=&quot;875&quot; y2=&quot;465&quot; class=&quot;actor-line&quot; stroke-width=&quot;0.5px&quot; stroke=&quot;#999&quot;&gt;&lt;/line&gt;&lt;rect x=&quot;800&quot; y=&quot;0&quot; fill=&quot;#eaeaea&quot; stroke=&quot;#666&quot; width=&quot;150&quot; height=&quot;65&quot; rx=&quot;3&quot; ry=&quot;3&quot; class=&quot;actor&quot;&gt;&lt;/rect&gt;&lt;text x=&quot;875&quot; y=&quot;32.5&quot; dominant-baseline=&quot;central&quot; alignment-baseline=&quot;central&quot; class=&quot;actor&quot; style=&quot;text-anchor: middle; font-size: 14px;&quot;&gt;&lt;tspan x=&quot;875&quot; dy=&quot;0&quot;&gt;Worker&lt;/tspan&gt;&lt;/text&gt;&lt;/g&gt;&lt;g&gt;&lt;line id=&quot;actor5&quot; x1=&quot;1075&quot; y1=&quot;5&quot; x2=&quot;1075&quot; y2=&quot;465&quot; class=&quot;actor-line&quot; stroke-width=&quot;0.5px&quot; stroke=&quot;#999&quot;&gt;&lt;/line&gt;&lt;rect x=&quot;1000&quot; y=&quot;0&quot; fill=&quot;#eaeaea&quot; stroke=&quot;#666&quot; width=&quot;150&quot; height=&quot;65&quot; rx=&quot;3&quot; ry=&quot;3&quot; class=&quot;actor&quot;&gt;&lt;/rect&gt;&lt;text x=&quot;1075&quot; y=&quot;32.5&quot; dominant-baseline=&quot;central&quot; alignment-baseline=&quot;central&quot; class=&quot;actor&quot; style=&quot;text-anchor: middle; font-size: 14px;&quot;&gt;&lt;tspan x=&quot;1075&quot; dy=&quot;0&quot;&gt;TaskActivity&lt;/tspan&gt;&lt;/text&gt;&lt;/g&gt;&lt;defs&gt;&lt;marker id=&quot;arrowhead&quot; refX=&quot;5&quot; refY=&quot;2&quot; markerWidth=&quot;6&quot; markerHeight=&quot;4&quot; orient=&quot;auto&quot;&gt;&lt;path d=&quot;M 0,0 V 4 L6,2 Z&quot;&gt;&lt;/path&gt;&lt;/marker&gt;&lt;/defs&gt;&lt;defs&gt;&lt;marker id=&quot;crosshead&quot; markerWidth=&quot;15&quot; markerHeight=&quot;8&quot; orient=&quot;auto&quot; refX=&quot;16&quot; refY=&quot;4&quot;&gt;&lt;path fill=&quot;black&quot; stroke=&quot;#000000&quot; stroke-width=&quot;1px&quot; d=&quot;M 9,2 V 6 L16,4 Z&quot; style=&quot;stroke-dasharray: 0, 0;&quot;&gt;&lt;/path&gt;&lt;path fill=&quot;none&quot; stroke=&quot;#000000&quot; stroke-width=&quot;1px&quot; d=&quot;M 0,1 L 6,7 M 6,1 L 0,7&quot; style=&quot;stroke-dasharray: 0, 0;&quot;&gt;&lt;/path&gt;&lt;/marker&gt;&lt;/defs&gt;&lt;defs&gt;&lt;marker id=&quot;sequencenumber&quot; refX=&quot;15&quot; refY=&quot;15&quot; markerWidth=&quot;60&quot; markerHeight=&quot;40&quot; orient=&quot;auto&quot;&gt;&lt;circle cx=&quot;15&quot; cy=&quot;15&quot; r=&quot;6&quot;&gt;&lt;/circle&gt;&lt;/marker&gt;&lt;/defs&gt;&lt;g&gt;&lt;text x=&quot;175&quot; y=&quot;93&quot; class=&quot;messageText&quot; style=&quot;text-anchor: middle;&quot;&gt;ExecutionStarted&lt;/text&gt;&lt;line x1=&quot;75&quot; y1=&quot;100&quot; x2=&quot;275&quot; y2=&quot;100&quot; class=&quot;messageLine1&quot; stroke-width=&quot;2&quot; stroke=&quot;black&quot; marker-end=&quot;url(#arrowhead)&quot; style=&quot;stroke-dasharray: 3, 3; fill: none;&quot;&gt;&lt;/line&gt;&lt;/g&gt;&lt;g&gt;&lt;text x=&quot;375&quot; y=&quot;128&quot; class=&quot;messageText&quot; style=&quot;text-anchor: middle;&quot;&gt;ExecutionStarted&lt;/text&gt;&lt;line x1=&quot;275&quot; y1=&quot;135&quot; x2=&quot;475&quot; y2=&quot;135&quot; class=&quot;messageLine1&quot; stroke-width=&quot;2&quot; stroke=&quot;black&quot; marker-end=&quot;url(#arrowhead)&quot; style=&quot;stroke-dasharray: 3, 3; fill: none;&quot;&gt;&lt;/line&gt;&lt;/g&gt;&lt;g&gt;&lt;text x=&quot;575&quot; y=&quot;163&quot; class=&quot;messageText&quot; style=&quot;text-anchor: middle;&quot;&gt;Orchestration Invoked&lt;/text&gt;&lt;line x1=&quot;475&quot; y1=&quot;170&quot; x2=&quot;675&quot; y2=&quot;170&quot; class=&quot;messageLine0&quot; stroke-width=&quot;2&quot; stroke=&quot;black&quot; marker-end=&quot;url(#arrowhead)&quot; style=&quot;fill: none;&quot;&gt;&lt;/line&gt;&lt;/g&gt;&lt;g&gt;&lt;text x=&quot;675&quot; y=&quot;198&quot; class=&quot;messageText&quot; style=&quot;text-anchor: middle;&quot;&gt;TaskScheduled&lt;/text&gt;&lt;line x1=&quot;475&quot; y1=&quot;205&quot; x2=&quot;875&quot; y2=&quot;205&quot; class=&quot;messageLine1&quot; stroke-width=&quot;2&quot; stroke=&quot;black&quot; marker-end=&quot;url(#arrowhead)&quot; style=&quot;stroke-dasharray: 3, 3; fill: none;&quot;&gt;&lt;/line&gt;&lt;/g&gt;&lt;g&gt;&lt;text x=&quot;675&quot; y=&quot;233&quot; class=&quot;messageText&quot; style=&quot;text-anchor: middle;&quot;&gt;Task Scheduled&lt;/text&gt;&lt;line x1=&quot;875&quot; y1=&quot;240&quot; x2=&quot;475&quot; y2=&quot;240&quot; class=&quot;messageLine1&quot; stroke-width=&quot;2&quot; stroke=&quot;black&quot; marker-end=&quot;url(#arrowhead)&quot; style=&quot;stroke-dasharray: 3, 3; fill: none;&quot;&gt;&lt;/line&gt;&lt;/g&gt;&lt;g&gt;&lt;text x=&quot;775&quot; y=&quot;268&quot; class=&quot;messageText&quot; style=&quot;text-anchor: middle;&quot;&gt;Task Invoked&lt;/text&gt;&lt;line x1=&quot;475&quot; y1=&quot;275&quot; x2=&quot;1075&quot; y2=&quot;275&quot; class=&quot;messageLine0&quot; stroke-width=&quot;2&quot; stroke=&quot;black&quot; marker-end=&quot;url(#arrowhead)&quot; style=&quot;fill: none;&quot;&gt;&lt;/line&gt;&lt;/g&gt;&lt;g&gt;&lt;text x=&quot;375&quot; y=&quot;303&quot; class=&quot;messageText&quot; style=&quot;text-anchor: middle;&quot;&gt;TaskCompleted&lt;/text&gt;&lt;line x1=&quot;475&quot; y1=&quot;310&quot; x2=&quot;275&quot; y2=&quot;310&quot; class=&quot;messageLine1&quot; stroke-width=&quot;2&quot; stroke=&quot;black&quot; marker-end=&quot;url(#arrowhead)&quot; style=&quot;stroke-dasharray: 3, 3; fill: none;&quot;&gt;&lt;/line&gt;&lt;/g&gt;&lt;g&gt;&lt;text x=&quot;375&quot; y=&quot;338&quot; class=&quot;messageText&quot; style=&quot;text-anchor: middle;&quot;&gt;TaskCompleted&lt;/text&gt;&lt;line x1=&quot;275&quot; y1=&quot;345&quot; x2=&quot;475&quot; y2=&quot;345&quot; class=&quot;messageLine1&quot; stroke-width=&quot;2&quot; stroke=&quot;black&quot; marker-end=&quot;url(#arrowhead)&quot; style=&quot;stroke-dasharray: 3, 3; fill: none;&quot;&gt;&lt;/line&gt;&lt;/g&gt;&lt;g&gt;&lt;text x=&quot;575&quot; y=&quot;373&quot; class=&quot;messageText&quot; style=&quot;text-anchor: middle;&quot;&gt;Orchestration Invoked &amp;amp; Completed&lt;/text&gt;&lt;line x1=&quot;475&quot; y1=&quot;380&quot; x2=&quot;675&quot; y2=&quot;380&quot; class=&quot;messageLine0&quot; stroke-width=&quot;2&quot; stroke=&quot;black&quot; marker-end=&quot;url(#arrowhead)&quot; style=&quot;fill: none;&quot;&gt;&lt;/line&gt;&lt;/g&gt;&lt;g&gt;&lt;rect x=&quot;0&quot; y=&quot;400&quot; fill=&quot;#eaeaea&quot; stroke=&quot;#666&quot; width=&quot;150&quot; height=&quot;65&quot; rx=&quot;3&quot; ry=&quot;3&quot; class=&quot;actor&quot;&gt;&lt;/rect&gt;&lt;text x=&quot;75&quot; y=&quot;432.5&quot; dominant-baseline=&quot;central&quot; alignment-baseline=&quot;central&quot; class=&quot;actor&quot; style=&quot;text-anchor: middle; font-size: 14px;&quot;&gt;&lt;tspan x=&quot;75&quot; dy=&quot;0&quot;&gt;Client&lt;/tspan&gt;&lt;/text&gt;&lt;/g&gt;&lt;g&gt;&lt;rect x=&quot;200&quot; y=&quot;400&quot; fill=&quot;#eaeaea&quot; stroke=&quot;#666&quot; width=&quot;150&quot; height=&quot;65&quot; rx=&quot;3&quot; ry=&quot;3&quot; class=&quot;actor&quot;&gt;&lt;/rect&gt;&lt;text x=&quot;275&quot; y=&quot;432.5&quot; dominant-baseline=&quot;central&quot; alignment-baseline=&quot;central&quot; class=&quot;actor&quot; style=&quot;text-anchor: middle; font-size: 14px;&quot;&gt;&lt;tspan x=&quot;275&quot; dy=&quot;0&quot;&gt;Orchestrator&lt;/tspan&gt;&lt;/text&gt;&lt;/g&gt;&lt;g&gt;&lt;rect x=&quot;400&quot; y=&quot;400&quot; fill=&quot;#eaeaea&quot; stroke=&quot;#666&quot; width=&quot;150&quot; height=&quot;65&quot; rx=&quot;3&quot; ry=&quot;3&quot; class=&quot;actor&quot;&gt;&lt;/rect&gt;&lt;text x=&quot;475&quot; y=&quot;432.5&quot; dominant-baseline=&quot;central&quot; alignment-baseline=&quot;central&quot; class=&quot;actor&quot; style=&quot;text-anchor: middle; font-size: 14px;&quot;&gt;&lt;tspan x=&quot;475&quot; dy=&quot;0&quot;&gt;Hub&lt;/tspan&gt;&lt;/text&gt;&lt;/g&gt;&lt;g&gt;&lt;rect x=&quot;600&quot; y=&quot;400&quot; fill=&quot;#eaeaea&quot; stroke=&quot;#666&quot; width=&quot;150&quot; height=&quot;65&quot; rx=&quot;3&quot; ry=&quot;3&quot; class=&quot;actor&quot;&gt;&lt;/rect&gt;&lt;text x=&quot;675&quot; y=&quot;432.5&quot; dominant-baseline=&quot;central&quot; alignment-baseline=&quot;central&quot; class=&quot;actor&quot; style=&quot;text-anchor: middle; font-size: 14px;&quot;&gt;&lt;tspan x=&quot;675&quot; dy=&quot;0&quot;&gt;TestOrchestration&lt;/tspan&gt;&lt;/text&gt;&lt;/g&gt;&lt;g&gt;&lt;rect x=&quot;800&quot; y=&quot;400&quot; fill=&quot;#eaeaea&quot; stroke=&quot;#666&quot; width=&quot;150&quot; height=&quot;65&quot; rx=&quot;3&quot; ry=&quot;3&quot; class=&quot;actor&quot;&gt;&lt;/rect&gt;&lt;text x=&quot;875&quot; y=&quot;432.5&quot; dominant-baseline=&quot;central&quot; alignment-baseline=&quot;central&quot; class=&quot;actor&quot; style=&quot;text-anchor: middle; font-size: 14px;&quot;&gt;&lt;tspan x=&quot;875&quot; dy=&quot;0&quot;&gt;Worker&lt;/tspan&gt;&lt;/text&gt;&lt;/g&gt;&lt;g&gt;&lt;rect x=&quot;1000&quot; y=&quot;400&quot; fill=&quot;#eaeaea&quot; stroke=&quot;#666&quot; width=&quot;150&quot; height=&quot;65&quot; rx=&quot;3&quot; ry=&quot;3&quot; class=&quot;actor&quot;&gt;&lt;/rect&gt;&lt;text x=&quot;1075&quot; y=&quot;432.5&quot; dominant-baseline=&quot;central&quot; alignment-baseline=&quot;central&quot; class=&quot;actor&quot; style=&quot;text-anchor: middle; font-size: 14px;&quot;&gt;&lt;tspan x=&quot;1075&quot; dy=&quot;0&quot;&gt;TaskActivity&lt;/tspan&gt;&lt;/text&gt;&lt;/g&gt;&lt;/svg&gt;&lt;/div&gt;
&lt;ol start=&quot;7&quot;&gt;
&lt;li&gt;
&lt;p&gt;What happens when the the Hub fails in Step #5 while it is running the taskActivity ?&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;In a distributed system , we have to work with the assumption that the hub can fail any time and so can the task. &lt;/li&gt;
&lt;li&gt;The hub does not remove the TaskScheduledEvent unless the TasActivity is complete. So if in case the hub goes down, the service bus message will be present in the queue. When the hub comes back online, it will start from step 5 as if nothing had happened.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;What if, the Task itself throws an exception  ? &lt;/p&gt;
&lt;div class=&quot;mermaid&quot; data-processed=&quot;true&quot;&gt;&lt;svg id=&quot;mermaid-1587845641376&quot; width=&quot;100%&quot; xmlns=&quot;http://www.w3.org/2000/svg&quot; height=&quot;100%&quot; style=&quot;max-width:1350px;&quot; viewBox=&quot;-50 -10 1350 786&quot;&gt;&lt;style&gt;#mermaid-1587845641376 .label{font-family:&apos;trebuchet ms&apos;, verdana, arial;font-family:var(--mermaid-font-family);color:#333}#mermaid-1587845641376 .label text{fill:#333}#mermaid-1587845641376 .node rect,#mermaid-1587845641376 .node circle,#mermaid-1587845641376 .node ellipse,#mermaid-1587845641376 .node polygon,#mermaid-1587845641376 .node path{fill:#ECECFF;stroke:#9370db;stroke-width:1px}#mermaid-1587845641376 .node .label{text-align:center}#mermaid-1587845641376 .node.clickable{cursor:pointer}#mermaid-1587845641376 .arrowheadPath{fill:#333}#mermaid-1587845641376 .edgePath .path{stroke:#333;stroke-width:1.5px}#mermaid-1587845641376 .edgeLabel{background-color:#e8e8e8;text-align:center}#mermaid-1587845641376 .cluster rect{fill:#ffffde;stroke:#aa3;stroke-width:1px}#mermaid-1587845641376 .cluster text{fill:#333}#mermaid-1587845641376 div.mermaidTooltip{position:absolute;text-align:center;max-width:200px;padding:2px;font-family:&apos;trebuchet ms&apos;, verdana, arial;font-family:var(--mermaid-font-family);font-size:12px;background:#ffffde;border:1px solid #aa3;border-radius:2px;pointer-events:none;z-index:100}#mermaid-1587845641376 .actor{stroke:#ccf;fill:#ECECFF}#mermaid-1587845641376 text.actor{fill:#000;stroke:none}#mermaid-1587845641376 .actor-line{stroke:grey}#mermaid-1587845641376 .messageLine0{stroke-width:1.5;stroke-dasharray:&apos;2 2&apos;;stroke:#333}#mermaid-1587845641376 .messageLine1{stroke-width:1.5;stroke-dasharray:&apos;2 2&apos;;stroke:#333}#mermaid-1587845641376 #arrowhead{fill:#333}#mermaid-1587845641376 .sequenceNumber{fill:#fff}#mermaid-1587845641376 #sequencenumber{fill:#333}#mermaid-1587845641376 #crosshead path{fill:#333 !important;stroke:#333 !important}#mermaid-1587845641376 .messageText{fill:#333;stroke:none}#mermaid-1587845641376 .labelBox{stroke:#ccf;fill:#ECECFF}#mermaid-1587845641376 .labelText{fill:#000;stroke:none}#mermaid-1587845641376 .loopText{fill:#000;stroke:none}#mermaid-1587845641376 .loopLine{stroke-width:2;stroke-dasharray:&apos;2 2&apos;;stroke:#ccf}#mermaid-1587845641376 .note{stroke:#aa3;fill:#fff5ad}#mermaid-1587845641376 .noteText{fill:black;stroke:none;font-family:&apos;trebuchet ms&apos;, verdana, arial;font-family:var(--mermaid-font-family);font-size:14px}#mermaid-1587845641376 .activation0{fill:#f4f4f4;stroke:#666}#mermaid-1587845641376 .activation1{fill:#f4f4f4;stroke:#666}#mermaid-1587845641376 .activation2{fill:#f4f4f4;stroke:#666}#mermaid-1587845641376 .mermaid-main-font{font-family:&quot;trebuchet ms&quot;, verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1587845641376 .section{stroke:none;opacity:0.2}#mermaid-1587845641376 .section0{fill:rgba(102,102,255,0.49)}#mermaid-1587845641376 .section2{fill:#fff400}#mermaid-1587845641376 .section1,#mermaid-1587845641376 .section3{fill:#fff;opacity:0.2}#mermaid-1587845641376 .sectionTitle0{fill:#333}#mermaid-1587845641376 .sectionTitle1{fill:#333}#mermaid-1587845641376 .sectionTitle2{fill:#333}#mermaid-1587845641376 .sectionTitle3{fill:#333}#mermaid-1587845641376 .sectionTitle{text-anchor:start;font-size:11px;text-height:14px;font-family:&apos;trebuchet ms&apos;, verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1587845641376 .grid .tick{stroke:#d3d3d3;opacity:0.8;shape-rendering:crispEdges}#mermaid-1587845641376 .grid .tick text{font-family:&apos;trebuchet ms&apos;, verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1587845641376 .grid path{stroke-width:0}#mermaid-1587845641376 .today{fill:none;stroke:red;stroke-width:2px}#mermaid-1587845641376 .task{stroke-width:2}#mermaid-1587845641376 .taskText{text-anchor:middle;font-family:&apos;trebuchet ms&apos;, verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1587845641376 .taskText:not([font-size]){font-size:11px}#mermaid-1587845641376 .taskTextOutsideRight{fill:#000;text-anchor:start;font-size:11px;font-family:&apos;trebuchet ms&apos;, verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1587845641376 .taskTextOutsideLeft{fill:#000;text-anchor:end;font-size:11px}#mermaid-1587845641376 .task.clickable{cursor:pointer}#mermaid-1587845641376 .taskText.clickable{cursor:pointer;fill:#003163 !important;font-weight:bold}#mermaid-1587845641376 .taskTextOutsideLeft.clickable{cursor:pointer;fill:#003163 !important;font-weight:bold}#mermaid-1587845641376 .taskTextOutsideRight.clickable{cursor:pointer;fill:#003163 !important;font-weight:bold}#mermaid-1587845641376 .taskText0,#mermaid-1587845641376 .taskText1,#mermaid-1587845641376 .taskText2,#mermaid-1587845641376 .taskText3{fill:#fff}#mermaid-1587845641376 .task0,#mermaid-1587845641376 .task1,#mermaid-1587845641376 .task2,#mermaid-1587845641376 .task3{fill:#8a90dd;stroke:#534fbc}#mermaid-1587845641376 .taskTextOutside0,#mermaid-1587845641376 .taskTextOutside2{fill:#000}#mermaid-1587845641376 .taskTextOutside1,#mermaid-1587845641376 .taskTextOutside3{fill:#000}#mermaid-1587845641376 .active0,#mermaid-1587845641376 .active1,#mermaid-1587845641376 .active2,#mermaid-1587845641376 .active3{fill:#bfc7ff;stroke:#534fbc}#mermaid-1587845641376 .activeText0,#mermaid-1587845641376 .activeText1,#mermaid-1587845641376 .activeText2,#mermaid-1587845641376 .activeText3{fill:#000 !important}#mermaid-1587845641376 .done0,#mermaid-1587845641376 .done1,#mermaid-1587845641376 .done2,#mermaid-1587845641376 .done3{stroke:grey;fill:#d3d3d3;stroke-width:2}#mermaid-1587845641376 .doneText0,#mermaid-1587845641376 .doneText1,#mermaid-1587845641376 .doneText2,#mermaid-1587845641376 .doneText3{fill:#000 !important}#mermaid-1587845641376 .crit0,#mermaid-1587845641376 .crit1,#mermaid-1587845641376 .crit2,#mermaid-1587845641376 .crit3{stroke:#f88;fill:red;stroke-width:2}#mermaid-1587845641376 .activeCrit0,#mermaid-1587845641376 .activeCrit1,#mermaid-1587845641376 .activeCrit2,#mermaid-1587845641376 .activeCrit3{stroke:#f88;fill:#bfc7ff;stroke-width:2}#mermaid-1587845641376 .doneCrit0,#mermaid-1587845641376 .doneCrit1,#mermaid-1587845641376 .doneCrit2,#mermaid-1587845641376 .doneCrit3{stroke:#f88;fill:#d3d3d3;stroke-width:2;cursor:pointer;shape-rendering:crispEdges}#mermaid-1587845641376 .milestone{transform:rotate(45deg) scale(0.8, 0.8)}#mermaid-1587845641376 .milestoneText{font-style:italic}#mermaid-1587845641376 .doneCritText0,#mermaid-1587845641376 .doneCritText1,#mermaid-1587845641376 .doneCritText2,#mermaid-1587845641376 .doneCritText3{fill:#000 !important}#mermaid-1587845641376 .activeCritText0,#mermaid-1587845641376 .activeCritText1,#mermaid-1587845641376 .activeCritText2,#mermaid-1587845641376 .activeCritText3{fill:#000 !important}#mermaid-1587845641376 .titleText{text-anchor:middle;font-size:18px;fill:#000;font-family:&apos;trebuchet ms&apos;, verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1587845641376 g.classGroup text{fill:#9370db;stroke:none;font-family:&apos;trebuchet ms&apos;, verdana, arial;font-family:var(--mermaid-font-family);font-size:10px}#mermaid-1587845641376 g.classGroup text .title{font-weight:bolder}#mermaid-1587845641376 g.clickable{cursor:pointer}#mermaid-1587845641376 g.classGroup rect{fill:#ECECFF;stroke:#9370db}#mermaid-1587845641376 g.classGroup line{stroke:#9370db;stroke-width:1}#mermaid-1587845641376 .classLabel .box{stroke:none;stroke-width:0;fill:#ECECFF;opacity:0.5}#mermaid-1587845641376 .classLabel .label{fill:#9370db;font-size:10px}#mermaid-1587845641376 .relation{stroke:#9370db;stroke-width:1;fill:none}#mermaid-1587845641376 .dashed-line{stroke-dasharray:3}#mermaid-1587845641376 #compositionStart{fill:#9370db;stroke:#9370db;stroke-width:1}#mermaid-1587845641376 #compositionEnd{fill:#9370db;stroke:#9370db;stroke-width:1}#mermaid-1587845641376 #aggregationStart{fill:#ECECFF;stroke:#9370db;stroke-width:1}#mermaid-1587845641376 #aggregationEnd{fill:#ECECFF;stroke:#9370db;stroke-width:1}#mermaid-1587845641376 #dependencyStart{fill:#9370db;stroke:#9370db;stroke-width:1}#mermaid-1587845641376 #dependencyEnd{fill:#9370db;stroke:#9370db;stroke-width:1}#mermaid-1587845641376 #extensionStart{fill:#9370db;stroke:#9370db;stroke-width:1}#mermaid-1587845641376 #extensionEnd{fill:#9370db;stroke:#9370db;stroke-width:1}#mermaid-1587845641376 .commit-id,#mermaid-1587845641376 .commit-msg,#mermaid-1587845641376 .branch-label{fill:lightgrey;color:lightgrey;font-family:&apos;trebuchet ms&apos;, verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1587845641376 .pieTitleText{text-anchor:middle;font-size:25px;fill:#000;font-family:&apos;trebuchet ms&apos;, verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1587845641376 .slice{font-family:&apos;trebuchet ms&apos;, verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1587845641376 g.stateGroup text{fill:#9370db;stroke:none;font-size:10px;font-family:&apos;trebuchet ms&apos;, verdana, arial;font-family:var(--mermaid-font-family)}#mermaid-1587845641376 g.stateGroup text{fill:#9370db;stroke:none;font-size:10px}#mermaid-1587845641376 g.stateGroup .state-title{font-weight:bolder;fill:#000}#mermaid-1587845641376 g.stateGroup rect{fill:#ECECFF;stroke:#9370db}#mermaid-1587845641376 g.stateGroup line{stroke:#9370db;stroke-width:1}#mermaid-1587845641376 .transition{stroke:#9370db;stroke-width:1;fill:none}#mermaid-1587845641376 .stateGroup .composit{fill:white;border-bottom:1px}#mermaid-1587845641376 .stateGroup .alt-composit{fill:#e0e0e0;border-bottom:1px}#mermaid-1587845641376 .state-note{stroke:#aa3;fill:#fff5ad}#mermaid-1587845641376 .state-note text{fill:black;stroke:none;font-size:10px}#mermaid-1587845641376 .stateLabel .box{stroke:none;stroke-width:0;fill:#ECECFF;opacity:0.5}#mermaid-1587845641376 .stateLabel text{fill:#000;font-size:10px;font-weight:bold;font-family:&apos;trebuchet ms&apos;, verdana, arial;font-family:var(--mermaid-font-family)}:root{--mermaid-font-family: &apos;&quot;trebuchet ms&quot;, verdana, arial&apos;;--mermaid-font-family: &quot;Comic Sans MS&quot;, &quot;Comic Sans&quot;, cursive}

:root { --mermaid-font-family: &quot;trebuchet ms&quot;, verdana, arial;}&lt;/style&gt;&lt;style&gt;#mermaid-1587845641376 {
    color: rgb(0, 0, 0);
    font: normal normal 400 normal 16px / normal &quot;trebuchet ms&quot;, verdana, arial;
  }&lt;/style&gt;&lt;g&gt;&lt;/g&gt;&lt;g&gt;&lt;line id=&quot;actor0&quot; x1=&quot;75&quot; y1=&quot;5&quot; x2=&quot;75&quot; y2=&quot;775&quot; class=&quot;actor-line&quot; stroke-width=&quot;0.5px&quot; stroke=&quot;#999&quot;&gt;&lt;/line&gt;&lt;rect x=&quot;0&quot; y=&quot;0&quot; fill=&quot;#eaeaea&quot; stroke=&quot;#666&quot; width=&quot;150&quot; height=&quot;65&quot; rx=&quot;3&quot; ry=&quot;3&quot; class=&quot;actor&quot;&gt;&lt;/rect&gt;&lt;text x=&quot;75&quot; y=&quot;32.5&quot; dominant-baseline=&quot;central&quot; alignment-baseline=&quot;central&quot; class=&quot;actor&quot; style=&quot;text-anchor: middle; font-size: 14px;&quot;&gt;&lt;tspan x=&quot;75&quot; dy=&quot;0&quot;&gt;Client&lt;/tspan&gt;&lt;/text&gt;&lt;/g&gt;&lt;g&gt;&lt;line id=&quot;actor1&quot; x1=&quot;275&quot; y1=&quot;5&quot; x2=&quot;275&quot; y2=&quot;775&quot; class=&quot;actor-line&quot; stroke-width=&quot;0.5px&quot; stroke=&quot;#999&quot;&gt;&lt;/line&gt;&lt;rect x=&quot;200&quot; y=&quot;0&quot; fill=&quot;#eaeaea&quot; stroke=&quot;#666&quot; width=&quot;150&quot; height=&quot;65&quot; rx=&quot;3&quot; ry=&quot;3&quot; class=&quot;actor&quot;&gt;&lt;/rect&gt;&lt;text x=&quot;275&quot; y=&quot;32.5&quot; dominant-baseline=&quot;central&quot; alignment-baseline=&quot;central&quot; class=&quot;actor&quot; style=&quot;text-anchor: middle; font-size: 14px;&quot;&gt;&lt;tspan x=&quot;275&quot; dy=&quot;0&quot;&gt;Orchestrator&lt;/tspan&gt;&lt;/text&gt;&lt;/g&gt;&lt;g&gt;&lt;line id=&quot;actor2&quot; x1=&quot;475&quot; y1=&quot;5&quot; x2=&quot;475&quot; y2=&quot;775&quot; class=&quot;actor-line&quot; stroke-width=&quot;0.5px&quot; stroke=&quot;#999&quot;&gt;&lt;/line&gt;&lt;rect x=&quot;400&quot; y=&quot;0&quot; fill=&quot;#eaeaea&quot; stroke=&quot;#666&quot; width=&quot;150&quot; height=&quot;65&quot; rx=&quot;3&quot; ry=&quot;3&quot; class=&quot;actor&quot;&gt;&lt;/rect&gt;&lt;text x=&quot;475&quot; y=&quot;32.5&quot; dominant-baseline=&quot;central&quot; alignment-baseline=&quot;central&quot; class=&quot;actor&quot; style=&quot;text-anchor: middle; font-size: 14px;&quot;&gt;&lt;tspan x=&quot;475&quot; dy=&quot;0&quot;&gt;Hub&lt;/tspan&gt;&lt;/text&gt;&lt;/g&gt;&lt;g&gt;&lt;line id=&quot;actor3&quot; x1=&quot;675&quot; y1=&quot;5&quot; x2=&quot;675&quot; y2=&quot;775&quot; class=&quot;actor-line&quot; stroke-width=&quot;0.5px&quot; stroke=&quot;#999&quot;&gt;&lt;/line&gt;&lt;rect x=&quot;600&quot; y=&quot;0&quot; fill=&quot;#eaeaea&quot; stroke=&quot;#666&quot; width=&quot;150&quot; height=&quot;65&quot; rx=&quot;3&quot; ry=&quot;3&quot; class=&quot;actor&quot;&gt;&lt;/rect&gt;&lt;text x=&quot;675&quot; y=&quot;32.5&quot; dominant-baseline=&quot;central&quot; alignment-baseline=&quot;central&quot; class=&quot;actor&quot; style=&quot;text-anchor: middle; font-size: 14px;&quot;&gt;&lt;tspan x=&quot;675&quot; dy=&quot;0&quot;&gt;TestOrchestration&lt;/tspan&gt;&lt;/text&gt;&lt;/g&gt;&lt;g&gt;&lt;line id=&quot;actor4&quot; x1=&quot;875&quot; y1=&quot;5&quot; x2=&quot;875&quot; y2=&quot;775&quot; class=&quot;actor-line&quot; stroke-width=&quot;0.5px&quot; stroke=&quot;#999&quot;&gt;&lt;/line&gt;&lt;rect x=&quot;800&quot; y=&quot;0&quot; fill=&quot;#eaeaea&quot; stroke=&quot;#666&quot; width=&quot;150&quot; height=&quot;65&quot; rx=&quot;3&quot; ry=&quot;3&quot; class=&quot;actor&quot;&gt;&lt;/rect&gt;&lt;text x=&quot;875&quot; y=&quot;32.5&quot; dominant-baseline=&quot;central&quot; alignment-baseline=&quot;central&quot; class=&quot;actor&quot; style=&quot;text-anchor: middle; font-size: 14px;&quot;&gt;&lt;tspan x=&quot;875&quot; dy=&quot;0&quot;&gt;Worker&lt;/tspan&gt;&lt;/text&gt;&lt;/g&gt;&lt;g&gt;&lt;line id=&quot;actor5&quot; x1=&quot;1075&quot; y1=&quot;5&quot; x2=&quot;1075&quot; y2=&quot;775&quot; class=&quot;actor-line&quot; stroke-width=&quot;0.5px&quot; stroke=&quot;#999&quot;&gt;&lt;/line&gt;&lt;rect x=&quot;1000&quot; y=&quot;0&quot; fill=&quot;#eaeaea&quot; stroke=&quot;#666&quot; width=&quot;150&quot; height=&quot;65&quot; rx=&quot;3&quot; ry=&quot;3&quot; class=&quot;actor&quot;&gt;&lt;/rect&gt;&lt;text x=&quot;1075&quot; y=&quot;32.5&quot; dominant-baseline=&quot;central&quot; alignment-baseline=&quot;central&quot; class=&quot;actor&quot; style=&quot;text-anchor: middle; font-size: 14px;&quot;&gt;&lt;tspan x=&quot;1075&quot; dy=&quot;0&quot;&gt;TaskActivity&lt;/tspan&gt;&lt;/text&gt;&lt;/g&gt;&lt;defs&gt;&lt;marker id=&quot;arrowhead&quot; refX=&quot;5&quot; refY=&quot;2&quot; markerWidth=&quot;6&quot; markerHeight=&quot;4&quot; orient=&quot;auto&quot;&gt;&lt;path d=&quot;M 0,0 V 4 L6,2 Z&quot;&gt;&lt;/path&gt;&lt;/marker&gt;&lt;/defs&gt;&lt;defs&gt;&lt;marker id=&quot;crosshead&quot; markerWidth=&quot;15&quot; markerHeight=&quot;8&quot; orient=&quot;auto&quot; refX=&quot;16&quot; refY=&quot;4&quot;&gt;&lt;path fill=&quot;black&quot; stroke=&quot;#000000&quot; stroke-width=&quot;1px&quot; d=&quot;M 9,2 V 6 L16,4 Z&quot; style=&quot;stroke-dasharray: 0, 0;&quot;&gt;&lt;/path&gt;&lt;path fill=&quot;none&quot; stroke=&quot;#000000&quot; stroke-width=&quot;1px&quot; d=&quot;M 0,1 L 6,7 M 6,1 L 0,7&quot; style=&quot;stroke-dasharray: 0, 0;&quot;&gt;&lt;/path&gt;&lt;/marker&gt;&lt;/defs&gt;&lt;defs&gt;&lt;marker id=&quot;sequencenumber&quot; refX=&quot;15&quot; refY=&quot;15&quot; markerWidth=&quot;60&quot; markerHeight=&quot;40&quot; orient=&quot;auto&quot;&gt;&lt;circle cx=&quot;15&quot; cy=&quot;15&quot; r=&quot;6&quot;&gt;&lt;/circle&gt;&lt;/marker&gt;&lt;/defs&gt;&lt;g&gt;&lt;text x=&quot;175&quot; y=&quot;93&quot; class=&quot;messageText&quot; style=&quot;text-anchor: middle;&quot;&gt;ExecutionStarted&lt;/text&gt;&lt;line x1=&quot;75&quot; y1=&quot;100&quot; x2=&quot;275&quot; y2=&quot;100&quot; class=&quot;messageLine1&quot; stroke-width=&quot;2&quot; stroke=&quot;black&quot; marker-end=&quot;url(#arrowhead)&quot; style=&quot;stroke-dasharray: 3, 3; fill: none;&quot;&gt;&lt;/line&gt;&lt;/g&gt;&lt;g&gt;&lt;text x=&quot;375&quot; y=&quot;128&quot; class=&quot;messageText&quot; style=&quot;text-anchor: middle;&quot;&gt;ExecutionStarted&lt;/text&gt;&lt;line x1=&quot;275&quot; y1=&quot;135&quot; x2=&quot;475&quot; y2=&quot;135&quot; class=&quot;messageLine1&quot; stroke-width=&quot;2&quot; stroke=&quot;black&quot; marker-end=&quot;url(#arrowhead)&quot; style=&quot;stroke-dasharray: 3, 3; fill: none;&quot;&gt;&lt;/line&gt;&lt;/g&gt;&lt;g&gt;&lt;text x=&quot;575&quot; y=&quot;163&quot; class=&quot;messageText&quot; style=&quot;text-anchor: middle;&quot;&gt;Orchestration Invoked&lt;/text&gt;&lt;line x1=&quot;475&quot; y1=&quot;170&quot; x2=&quot;675&quot; y2=&quot;170&quot; class=&quot;messageLine0&quot; stroke-width=&quot;2&quot; stroke=&quot;black&quot; marker-end=&quot;url(#arrowhead)&quot; style=&quot;fill: none;&quot;&gt;&lt;/line&gt;&lt;/g&gt;&lt;g&gt;&lt;text x=&quot;675&quot; y=&quot;198&quot; class=&quot;messageText&quot; style=&quot;text-anchor: middle;&quot;&gt;TaskScheduled&lt;/text&gt;&lt;line x1=&quot;475&quot; y1=&quot;205&quot; x2=&quot;875&quot; y2=&quot;205&quot; class=&quot;messageLine1&quot; stroke-width=&quot;2&quot; stroke=&quot;black&quot; marker-end=&quot;url(#arrowhead)&quot; style=&quot;stroke-dasharray: 3, 3; fill: none;&quot;&gt;&lt;/line&gt;&lt;/g&gt;&lt;g&gt;&lt;text x=&quot;675&quot; y=&quot;233&quot; class=&quot;messageText&quot; style=&quot;text-anchor: middle;&quot;&gt;Task Scheduled&lt;/text&gt;&lt;line x1=&quot;875&quot; y1=&quot;240&quot; x2=&quot;475&quot; y2=&quot;240&quot; class=&quot;messageLine1&quot; stroke-width=&quot;2&quot; stroke=&quot;black&quot; marker-end=&quot;url(#arrowhead)&quot; style=&quot;stroke-dasharray: 3, 3; fill: none;&quot;&gt;&lt;/line&gt;&lt;/g&gt;&lt;g&gt;&lt;text x=&quot;775&quot; y=&quot;268&quot; class=&quot;messageText&quot; style=&quot;text-anchor: middle;&quot;&gt;Task Invoked&lt;/text&gt;&lt;line x1=&quot;475&quot; y1=&quot;275&quot; x2=&quot;1075&quot; y2=&quot;275&quot; class=&quot;messageLine0&quot; stroke-width=&quot;2&quot; stroke=&quot;black&quot; marker-end=&quot;url(#arrowhead)&quot; style=&quot;fill: none;&quot;&gt;&lt;/line&gt;&lt;/g&gt;&lt;g&gt;&lt;rect x=&quot;1100&quot; y=&quot;285&quot; fill=&quot;#EDF2AE&quot; stroke=&quot;#666&quot; width=&quot;150&quot; height=&quot;36&quot; rx=&quot;0&quot; ry=&quot;0&quot; class=&quot;note&quot;&gt;&lt;/rect&gt;&lt;text x=&quot;1096&quot; y=&quot;309&quot; class=&quot;noteText&quot;&gt;&lt;tspan x=&quot;1116&quot;&gt;Throws Exception! &lt;/tspan&gt;&lt;/text&gt;&lt;text x=&quot;1096&quot; y=&quot;325&quot; class=&quot;noteText&quot;&gt;&lt;tspan x=&quot;1116&quot;&gt;&lt;/tspan&gt;&lt;/text&gt;&lt;/g&gt;&lt;g&gt;&lt;text x=&quot;375&quot; y=&quot;349&quot; class=&quot;messageText&quot; style=&quot;text-anchor: middle;&quot;&gt;TaskFailed&lt;/text&gt;&lt;line x1=&quot;475&quot; y1=&quot;356&quot; x2=&quot;275&quot; y2=&quot;356&quot; class=&quot;messageLine1&quot; stroke-width=&quot;2&quot; stroke=&quot;black&quot; marker-end=&quot;url(#arrowhead)&quot; style=&quot;stroke-dasharray: 3, 3; fill: none;&quot;&gt;&lt;/line&gt;&lt;/g&gt;&lt;g&gt;&lt;text x=&quot;375&quot; y=&quot;384&quot; class=&quot;messageText&quot; style=&quot;text-anchor: middle;&quot;&gt;TaskFailed&lt;/text&gt;&lt;line x1=&quot;275&quot; y1=&quot;391&quot; x2=&quot;475&quot; y2=&quot;391&quot; class=&quot;messageLine1&quot; stroke-width=&quot;2&quot; stroke=&quot;black&quot; marker-end=&quot;url(#arrowhead)&quot; style=&quot;stroke-dasharray: 3, 3; fill: none;&quot;&gt;&lt;/line&gt;&lt;/g&gt;&lt;g&gt;&lt;text x=&quot;575&quot; y=&quot;419&quot; class=&quot;messageText&quot; style=&quot;text-anchor: middle;&quot;&gt;Orchestration Invoked&lt;/text&gt;&lt;line x1=&quot;475&quot; y1=&quot;426&quot; x2=&quot;675&quot; y2=&quot;426&quot; class=&quot;messageLine0&quot; stroke-width=&quot;2&quot; stroke=&quot;black&quot; marker-end=&quot;url(#arrowhead)&quot; style=&quot;fill: none;&quot;&gt;&lt;/line&gt;&lt;/g&gt;&lt;g&gt;&lt;rect x=&quot;500&quot; y=&quot;436&quot; fill=&quot;#EDF2AE&quot; stroke=&quot;#666&quot; width=&quot;150&quot; height=&quot;68&quot; rx=&quot;0&quot; ry=&quot;0&quot; class=&quot;note&quot;&gt;&lt;/rect&gt;&lt;text x=&quot;496&quot; y=&quot;460&quot; class=&quot;noteText&quot;&gt;&lt;tspan x=&quot;516&quot;&gt;Error Handling &lt;/tspan&gt;&lt;/text&gt;&lt;text x=&quot;496&quot; y=&quot;476&quot; class=&quot;noteText&quot;&gt;&lt;tspan x=&quot;516&quot;&gt; Runs  till &lt;/tspan&gt;&lt;/text&gt;&lt;text x=&quot;496&quot; y=&quot;492&quot; class=&quot;noteText&quot;&gt;&lt;tspan x=&quot;516&quot;&gt;ScheduleWithRetry&lt;/tspan&gt;&lt;/text&gt;&lt;/g&gt;&lt;g&gt;&lt;text x=&quot;375&quot; y=&quot;532&quot; class=&quot;messageText&quot; style=&quot;text-anchor: middle;&quot;&gt;Timer Fired&lt;/text&gt;&lt;line x1=&quot;475&quot; y1=&quot;539&quot; x2=&quot;275&quot; y2=&quot;539&quot; class=&quot;messageLine1&quot; stroke-width=&quot;2&quot; stroke=&quot;black&quot; marker-end=&quot;url(#arrowhead)&quot; style=&quot;stroke-dasharray: 3, 3; fill: none;&quot;&gt;&lt;/line&gt;&lt;/g&gt;&lt;g&gt;&lt;text x=&quot;375&quot; y=&quot;567&quot; class=&quot;messageText&quot; style=&quot;text-anchor: middle;&quot;&gt;Timer Fired&lt;/text&gt;&lt;line x1=&quot;275&quot; y1=&quot;574&quot; x2=&quot;475&quot; y2=&quot;574&quot; class=&quot;messageLine1&quot; stroke-width=&quot;2&quot; stroke=&quot;black&quot; marker-end=&quot;url(#arrowhead)&quot; style=&quot;stroke-dasharray: 3, 3; fill: none;&quot;&gt;&lt;/line&gt;&lt;/g&gt;&lt;g&gt;&lt;text x=&quot;575&quot; y=&quot;602&quot; class=&quot;messageText&quot; style=&quot;text-anchor: middle;&quot;&gt;Orchestration Invoked&lt;/text&gt;&lt;line x1=&quot;475&quot; y1=&quot;609&quot; x2=&quot;675&quot; y2=&quot;609&quot; class=&quot;messageLine0&quot; stroke-width=&quot;2&quot; stroke=&quot;black&quot; marker-end=&quot;url(#arrowhead)&quot; style=&quot;fill: none;&quot;&gt;&lt;/line&gt;&lt;/g&gt;&lt;g&gt;&lt;text x=&quot;675&quot; y=&quot;637&quot; class=&quot;messageText&quot; style=&quot;text-anchor: middle;&quot;&gt;TaskScheduled&lt;/text&gt;&lt;line x1=&quot;475&quot; y1=&quot;644&quot; x2=&quot;875&quot; y2=&quot;644&quot; class=&quot;messageLine1&quot; stroke-width=&quot;2&quot; stroke=&quot;black&quot; marker-end=&quot;url(#arrowhead)&quot; style=&quot;stroke-dasharray: 3, 3; fill: none;&quot;&gt;&lt;/line&gt;&lt;/g&gt;&lt;g&gt;&lt;rect x=&quot;500&quot; y=&quot;654&quot; fill=&quot;#EDF2AE&quot; stroke=&quot;#666&quot; width=&quot;150&quot; height=&quot;36&quot; rx=&quot;0&quot; ry=&quot;0&quot; class=&quot;note&quot;&gt;&lt;/rect&gt;&lt;text x=&quot;496&quot; y=&quot;678&quot; class=&quot;noteText&quot;&gt;&lt;tspan x=&quot;516&quot;&gt;Happy path restarts&lt;/tspan&gt;&lt;/text&gt;&lt;/g&gt;&lt;g&gt;&lt;rect x=&quot;0&quot; y=&quot;710&quot; fill=&quot;#eaeaea&quot; stroke=&quot;#666&quot; width=&quot;150&quot; height=&quot;65&quot; rx=&quot;3&quot; ry=&quot;3&quot; class=&quot;actor&quot;&gt;&lt;/rect&gt;&lt;text x=&quot;75&quot; y=&quot;742.5&quot; dominant-baseline=&quot;central&quot; alignment-baseline=&quot;central&quot; class=&quot;actor&quot; style=&quot;text-anchor: middle; font-size: 14px;&quot;&gt;&lt;tspan x=&quot;75&quot; dy=&quot;0&quot;&gt;Client&lt;/tspan&gt;&lt;/text&gt;&lt;/g&gt;&lt;g&gt;&lt;rect x=&quot;200&quot; y=&quot;710&quot; fill=&quot;#eaeaea&quot; stroke=&quot;#666&quot; width=&quot;150&quot; height=&quot;65&quot; rx=&quot;3&quot; ry=&quot;3&quot; class=&quot;actor&quot;&gt;&lt;/rect&gt;&lt;text x=&quot;275&quot; y=&quot;742.5&quot; dominant-baseline=&quot;central&quot; alignment-baseline=&quot;central&quot; class=&quot;actor&quot; style=&quot;text-anchor: middle; font-size: 14px;&quot;&gt;&lt;tspan x=&quot;275&quot; dy=&quot;0&quot;&gt;Orchestrator&lt;/tspan&gt;&lt;/text&gt;&lt;/g&gt;&lt;g&gt;&lt;rect x=&quot;400&quot; y=&quot;710&quot; fill=&quot;#eaeaea&quot; stroke=&quot;#666&quot; width=&quot;150&quot; height=&quot;65&quot; rx=&quot;3&quot; ry=&quot;3&quot; class=&quot;actor&quot;&gt;&lt;/rect&gt;&lt;text x=&quot;475&quot; y=&quot;742.5&quot; dominant-baseline=&quot;central&quot; alignment-baseline=&quot;central&quot; class=&quot;actor&quot; style=&quot;text-anchor: middle; font-size: 14px;&quot;&gt;&lt;tspan x=&quot;475&quot; dy=&quot;0&quot;&gt;Hub&lt;/tspan&gt;&lt;/text&gt;&lt;/g&gt;&lt;g&gt;&lt;rect x=&quot;600&quot; y=&quot;710&quot; fill=&quot;#eaeaea&quot; stroke=&quot;#666&quot; width=&quot;150&quot; height=&quot;65&quot; rx=&quot;3&quot; ry=&quot;3&quot; class=&quot;actor&quot;&gt;&lt;/rect&gt;&lt;text x=&quot;675&quot; y=&quot;742.5&quot; dominant-baseline=&quot;central&quot; alignment-baseline=&quot;central&quot; class=&quot;actor&quot; style=&quot;text-anchor: middle; font-size: 14px;&quot;&gt;&lt;tspan x=&quot;675&quot; dy=&quot;0&quot;&gt;TestOrchestration&lt;/tspan&gt;&lt;/text&gt;&lt;/g&gt;&lt;g&gt;&lt;rect x=&quot;800&quot; y=&quot;710&quot; fill=&quot;#eaeaea&quot; stroke=&quot;#666&quot; width=&quot;150&quot; height=&quot;65&quot; rx=&quot;3&quot; ry=&quot;3&quot; class=&quot;actor&quot;&gt;&lt;/rect&gt;&lt;text x=&quot;875&quot; y=&quot;742.5&quot; dominant-baseline=&quot;central&quot; alignment-baseline=&quot;central&quot; class=&quot;actor&quot; style=&quot;text-anchor: middle; font-size: 14px;&quot;&gt;&lt;tspan x=&quot;875&quot; dy=&quot;0&quot;&gt;Worker&lt;/tspan&gt;&lt;/text&gt;&lt;/g&gt;&lt;g&gt;&lt;rect x=&quot;1000&quot; y=&quot;710&quot; fill=&quot;#eaeaea&quot; stroke=&quot;#666&quot; width=&quot;150&quot; height=&quot;65&quot; rx=&quot;3&quot; ry=&quot;3&quot; class=&quot;actor&quot;&gt;&lt;/rect&gt;&lt;text x=&quot;1075&quot; y=&quot;742.5&quot; dominant-baseline=&quot;central&quot; alignment-baseline=&quot;central&quot; class=&quot;actor&quot; style=&quot;text-anchor: middle; font-size: 14px;&quot;&gt;&lt;tspan x=&quot;1075&quot; dy=&quot;0&quot;&gt;TaskActivity&lt;/tspan&gt;&lt;/text&gt;&lt;/g&gt;&lt;/svg&gt;&lt;/div&gt;
&lt;/li&gt;
&lt;/ol&gt;</content:encoded></item><item><title><![CDATA[Running Dot Net Core outside MS ecosystem - 2]]></title><description><![CDATA[Dockerize the app Follow directions here As of writing, this pointed to images of dot net core v2.2. Replace it with 3.1 Create an asp.net…]]></description><link>https://abhikmitra.github.io/blog/dotnet-app2/</link><guid isPermaLink="false">https://abhikmitra.github.io/blog/dotnet-app2/</guid><pubDate>Mon, 13 Apr 2020 18:00:00 GMT</pubDate><content:encoded>&lt;h3&gt;Dockerize the app&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;Follow directions &lt;a href=&quot;https://docs.docker.com/engine/examples/dotnetcore/&quot;&gt;here&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;As of writing, this pointed to images of dot net core v2.2. Replace it with 3.1&lt;/li&gt;
&lt;li&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;h3&gt;Create an asp.net core app&lt;/h3&gt;
&lt;p&gt;End State: &lt;a href=&quot;https://github.com/abhikmitra/dotnet-outside-ms/tree/1CreateApp&quot;&gt;The repo at the end of Part 1&lt;/a&gt;  &lt;/p&gt;</content:encoded></item><item><title><![CDATA[Running Dot Net Core outside MS ecosystem - 1]]></title><description><![CDATA[Create a Repo Using github for creating my repo , even though Github is a part of Microsoft , it still does not fall into my typical day to…]]></description><link>https://abhikmitra.github.io/blog/dotnet-app1/</link><guid isPermaLink="false">https://abhikmitra.github.io/blog/dotnet-app1/</guid><pubDate>Mon, 13 Apr 2020 18:00:00 GMT</pubDate><content:encoded>&lt;h3&gt;Create a Repo&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;Using github for creating my repo , even though Github is a part of Microsoft , it still does not fall into my typical day to day flow .&lt;/li&gt;
&lt;li&gt;As of writing, sadly I was not able to get a gitgnore in the list of github .gitignore so we will initialize the repo with just a readme&lt;/li&gt;
&lt;li&gt;You can find the repository &lt;a href=&quot;https://github.com/abhikmitra/dotnet-outside-ms&quot;&gt;here&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;h3&gt;Create an asp.net core app&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;Clone the app&lt;/li&gt;
&lt;/ol&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber NaN&quot; class=&quot;language-text line-numbers&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;git clone git@github.com:abhikmitra/dotnet-outside-ms.git&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;ol start=&quot;2&quot;&gt;
&lt;li&gt;I will be using Visual Studio 2019 as my preferred editor&lt;/li&gt;
&lt;li&gt;Our stack will be ASP.NET Core 3.1 on .NET Core so that it is cross platform. I will start of with a Simple API template.&lt;/li&gt;
&lt;li&gt;I am not selecting the the “Enable Docker Setup” as I want to do that myself. I have named the solution &lt;code class=&quot;language-text&quot;&gt;BackendApp&lt;/code&gt; and the project is &lt;code class=&quot;language-text&quot;&gt;BackendAPI&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Since Github doe snot have a .gitignore template for  dot net apps, we are gonna use this &lt;a href=&quot;https://raw.githubusercontent.com/OmniSharp/generator-aspnet/master/templates/gitignore.txt&quot;&gt;.gitignore&lt;/a&gt;. This might not be enough , we will see.&lt;/li&gt;
&lt;li&gt;The app is going to expose one endpoint called &lt;code class=&quot;language-text&quot;&gt;api/environment/iscontainerized&lt;/code&gt;. The controller checks for the environment variable “containerized” and returns if its true or false. If you run the app , it should return false.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;End State: &lt;a href=&quot;https://github.com/abhikmitra/dotnet-outside-ms/tree/1CreateApp&quot;&gt;The repo at the end of Part 1&lt;/a&gt;  &lt;/p&gt;</content:encoded></item><item><title><![CDATA[Hello World - Starting a new Blog Series]]></title><description><![CDATA[This is my first post on my blog! How exciting!  For the last few years, I have been building distributed systems in Dot Net. As a result, I…]]></description><link>https://abhikmitra.github.io/blog/hello-world/</link><guid isPermaLink="false">https://abhikmitra.github.io/blog/hello-world/</guid><pubDate>Sun, 12 Apr 2020 18:00:00 GMT</pubDate><content:encoded>&lt;p&gt;This is my first post on my blog! How exciting! &lt;/p&gt;
&lt;p&gt;For the last few years, I have been building distributed systems in Dot Net. As a result, I live in the Microsoft ecosystem bubble of &lt;code class=&quot;language-text&quot;&gt;Azure&lt;/code&gt;, &lt;code class=&quot;language-text&quot;&gt;Service Fabric&lt;/code&gt;, &lt;code class=&quot;language-text&quot;&gt;Windows&lt;/code&gt;, &lt;code class=&quot;language-text&quot;&gt;Azure DevOps&lt;/code&gt; , etc. &lt;/p&gt;
&lt;p&gt;With DotNet being open source and cross-platform, .NET core should work with all the OSS tech out there. This series will look at how we can build a DotNet app, make it talk to some of the leading OSS frameworks and build a polyglot app.&lt;/p&gt;
&lt;p&gt;And I want to do all of this without using anything from the typical dot net ecosystem other than the language itself. That means no Azure, no service fabric, etc.&lt;/p&gt;
&lt;p&gt;The primary aim for this series is for me to learn and some how documenting what I learn helps me grok things easily. Hope, some of you might benefit from this as well. &lt;/p&gt;</content:encoded></item></channel></rss>